<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>250714-250720 å‘¨è®° 2024-xv6-labs(2)</title>
    <url>/2025/07/21/250714-250720-%E5%91%A8%E8%AE%B0-2024-xv6-labs-2/</url>
    <content><![CDATA[æœ¬å‘¨å®Œæˆäº†å‰©ä¸‹çš„å®éªŒã€‚ä¸Šä¸€ç¯‡è§2024-xv6-labs-1
1. net lab1.1 NICç¬¬ä¸€ä¸ªå®éªŒæ˜¯è¡¥å…¨e1000_transmit() å’Œ e1000_recv()
é‡ç‚¹åœ¨äºå…ˆè¦ç†è§£e1000åˆå§‹åŒ–çš„ä»£ç ï¼Œä»¥åŠe1000_dev.hé‡Œç»™å‡ºçš„å„å¯„å­˜å™¨çš„å®šä¹‰ã€‚
ç„¶åç†æ¸…ä¸€ä¸‹å·¥ä½œæµç¨‹ï¼štransmitæ‰€åšçš„ï¼Œå…¶å®å°±æ˜¯å°†å‘é€åŒºå’Œå‘é€ç¯çš„å°¾éƒ¨æ›´æ–°ä¸ºå¸¦å‘é€çš„æ•°æ®å¯¹åº”çš„å…ƒæ•°æ®ã€‚æ³¨æ„æ­¤æ—¶statusåº”ä¸º0è€Œä¸æ˜¯E1000_TXD_STAT_DDï¼Œå› ä¸ºè¿™åªæ˜¯ä»£è¡¨å°†æ•°æ®å¡«å…¥å‘é€åŒºï¼Œå¹¶æ²¡æœ‰çœŸæ­£å‘é€ã€‚ç„¶åæ›´æ–°E100_TDTçš„å€¼ã€‚ä½†ä¸ºäº†é˜²æ­¢ç«æ€æ¡ä»¶ï¼Œæ‰€ä»¥è¿˜è¦æ³¨æ„ç”¨e1000_lockåŠ é”ã€‚
è€Œreceiveæ‰€åšçš„å°±æ˜¯ä»¥å¸§ä¸ºå•ä½ï¼Œä¸æ–­åœ°å°†ç¼“å†²åŒºé‡Œçš„æ•°æ®äº¤ç»™net_rx()ï¼Œå¹¶æ›´æ–°ç¼“å†²åŒºå’ŒE1000_RDTï¼Œç›´åˆ°é‡è§E1000_RXD_STAT_DDã€‚è¿™é‡Œä¸ç”¨åŠ é”ï¼Œä½†å€¼å¾—æ³¨æ„çš„æ˜¯E1000_RDTå¿…é¡»åœ¨æœ€åæ›´æ–°ï¼Ÿæƒ³ä¸é€šã€‚
1.2 UDP Receiveè¯´æ¥æƒ­æ„§ï¼Œè¿™ä¸ªéƒ¨åˆ†æˆ‘å®åœ¨æ²¡æœ‰æ€è·¯ï¼Œæ˜¯è®©aiå†™çš„ã€‚ã€‚ã€‚
2. lock2.1 Memory allocatorè¿™é‡Œéœ€è¦åšçš„ï¼Œå°±æ˜¯kinitåˆå§‹åŒ–å†…å­˜ç®¡ç†çš„æ•°æ®ç»“æ„æ—¶ï¼Œæ˜¯åˆå§‹åŒ–kmem[NCPU]è€Œä¸æ˜¯å•ä¸ªkmemï¼Œå³é€šè¿‡æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼ä¸ºæ¯ä¸ªkmemåˆ†é…ä¸€æŠŠé”ã€‚ç„¶åå…¶ä»–è·Ÿå•ä¸ªkmemå‡ ä¹ä¸€è‡´ã€‚ä½†æ˜¯åœ¨kallocé‡Œï¼Œå¦‚æœæŸä¸ªkmemæ²¡æœ‰ç©ºé—²é¡µäº†ï¼Œåº”æ‰¾ä¸€ä¸ªè¿˜æœ‰ç©ºé—²é¡µçš„kmemï¼Œæ‹¿ä¸€é¡µè¿›è¡Œåˆ†é…ã€‚
æ³¨æ„åœ¨è°ƒç”¨cpuidå–å½“å‰cpuçš„idçš„æ—¶å€™è¦push_off()å…³ä¸­æ–­ï¼Œè°ƒç”¨å®Œæ¯•è¦pop_off()é‡æ–°å¼€å¯ã€‚
ä½†è¿™ä¸ªå®éªŒéƒ¨åˆ†æˆ‘ä¸ªäººè§‰å¾—å¾ˆæœ‰æ„æ€çš„å°±æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚
2.2 Buffer cacheè¿™ä¸ªé¢˜è™½ç„¶æ˜¯çº¢é¢˜ã€‚ä½†å®é™…ä¸Šæœ¬è´¨å¹¶ä¸å¤æ‚ï¼Œå®ƒå®é™…ä¸Šè¯´çš„æ˜¯ï¼š
åŸæœ‰ä¸€ä¸ªé“¾è¡¨å’Œä¸€æŠŠå¤§é”ï¼Œå¯æ˜¯è¿™æ ·å¤ªä½æ•ˆäº†ï¼Œå› ä¸ºéœ€è¦è¿›è¡Œä¿®æ”¹çš„å¯èƒ½æ˜¯ä¸¤ä¸ªä¸åŒçš„èŠ‚ç‚¹ï¼Œæ²¡æœ‰å¿…è¦ä¸€æŠŠå¤§é”æŠŠå…¨å±€é”æ­»ã€‚äºæ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œå°†å¤§é“¾è¡¨æ‹†æˆå¤šä¸ªå°é“¾è¡¨åˆ†åˆ«å­˜å…¥æ¯ä¸ªå“ˆå¸Œæ¡¶é‡Œï¼Œç„¶åå¯¹æ¯ä¸ªå“ˆå¸Œæ¡¶ç»™äºˆé”ã€‚è¿™æ ·éœ€è¦è¿›è¡Œä¿®æ”¹çš„è‹¥æ˜¯ä¸¤ä¸ªä¸åŒçš„èŠ‚ç‚¹ï¼Œåˆ™å¯ä»¥å®ç°å¹¶å‘äº†ã€‚
å°†åŸbcacheçš„å®šä¹‰æ”¹ä¸ºï¼š
  struct bucket&#123;  struct spinlock lock;  // Linked list of all buffers, through prev/next.  // Sorted by how recently the buffer was used.  // head.next is most recent, head.prev is least.  struct buf head;&#125;;struct &#123;  struct bucket table[NHASH];  struct buf buf[NBUF];&#125; bcache;

ç„¶åä¿®æ”¹ä¸‹é¢çš„ä»£ç ï¼Œä½¿å…¶ç¬¦åˆè¿™ä¸ªæ–°æ•°æ®ç»“æ„å³å¯ã€‚ã€‚ã€‚
æ‰æ€ªï¼ï¼ï¼ğŸ¤£ğŸ¤£ğŸ¤£
è¿˜å¾—æœ‰ä¸€æ­¥ï¼Œå¦åˆ™panic: bget: no buffersï¼š
å› ä¸ºåˆå§‹åŒ–æ—¶å€™ï¼Œæ‰€æœ‰çš„ç¼“å­˜åŒºéƒ½åœ¨åŒä¸€ä¸ªæ¡¶é‡Œï¼Œå…¶ä»–æ¡¶å…¨ä¸ºç©ºï¼
æ­¤æ—¶å°±åº”è¯¥åƒä¸Šä¸€é¢˜ä¸€æ ·ï¼Œä»keyå¯¹åº”çš„æ¡¶å¤„â€œå·â€ä¸€å—ç¼“å­˜ï¼š
b-&gt;next-&gt;prev = b-&gt;prev;b-&gt;prev-&gt;next = b-&gt;next;release(&amp;bcache.table[key].lock);acquire(&amp;bcache.table[gethash(blockno)].lock);b-&gt;next = bcache.table[gethash(blockno)].head.next;b-&gt;prev = &amp;bcache.table[gethash(blockno)].head;bcache.table[gethash(blockno)].head.next-&gt;prev = b;bcache.table[gethash(blockno)].head.next = b;release(&amp;bcache.table[gethash(blockno)].lock);

3. fsè¿™ä¸ªå®éªŒå¾ˆå¥‡æ€ªï¼Œmake gradeæ—¶ä¼šå› ä¸ºqemu-system-riscv64: terminating on signal 15 from pid xxxx(make)å¯¼è‡´failï¼Œä½†æ˜¯å•ç‹¬åœ°åœ¨qemuç¯å¢ƒä¸­è¿è¡Œbigfile symlinktest usertests -qå´æ²¡æœ‰é—®é¢˜ã€‚éš¾é“æ˜¯æˆ‘wsl2 ubuntuç³»ç»Ÿçš„ç‰ˆæœ¬é—®é¢˜å—ï¼Ÿ
3.1 Large filesè¿™é‡Œå°±æ˜¯å°†fs.hé‡Œé¢NDIRECTå†å‡å°‘ä¸€å—ä½œä¸ºåŒé‡é—´æ¥å—ã€‚ç„¶åæ·»åŠ å®šä¹‰
#define NDOUBLE (NINDIRECT*NINDIRECT)#define MAXFILE (NDIRECT + NINDIRECT + NDOUBLE)
åœ¨bmapé‡Œä»¿ç…§åˆ†é…é—´æ¥å—çš„å†™æ³•ï¼Œåˆ†é…åŒé‡é—´æ¥å—ã€‚
åœ¨itruncé‡Œä»¿ç…§é‡Šæ”¾é—´æ¥å—çš„å†™æ³•ï¼Œé‡Šæ”¾åŒé‡é—´æ¥å—ã€‚
ï¼ˆä¸è¿‡ï¼Œè¿™ä¸ªæ˜¯çœŸç»•å•Šï¼‰
è¿™é‡Œä¸€å®šè¦ç†æ¸…æ¥šï¼šå¯¹äºåŒé‡é—´æ¥å—ï¼Œ256ä¸ªå—ä¸ºä¸€ç»„ï¼Œç¬¬0å±‚çš„dataå°±è¡¨ç¤ºæ¯ä¸€ç»„ã€‚ç¬¬ä¸€å±‚çš„dataåˆ™è¡¨ç¤ºæ¯ä¸€ç»„çš„æ¯ä¸€å—çš„åœ°å€ï¼Œè€Œç¬¬äºŒå±‚çš„dataæ‰è¡¨ç¤ºçœŸæ­£çš„æ•°æ®ã€‚
æ‰€ä»¥ï¼Œå¯¹äºåˆ†é…ï¼Œbn / NINDIRECTè®¡ç®—å¾—ç»„å·ï¼›å¯¹äºæ¯ä¸ªå—åœ¨è¯¥ç»„çš„åºå·åˆ™ç”±bn % NINDIRECTç»™å‡ºã€‚
å¯¹äºé‡Šæ”¾ï¼Œip-&gt;addrs[NDIRECT+1]!=0æ„å‘³ç€å­˜åœ¨æœªé‡Šæ”¾çš„ç»„ã€‚å› æ­¤è¦å¯¹æ¯ä¸€ä¸ªæœªé‡Šæ”¾çš„ç»„ï¼Œè¯»å–å®ƒå¯¹åº”çš„ç¬¬ä¸€å±‚é—´æ¥å—çš„dataï¼Œå› ä¸ºä¸€ä¸ªdata[i]!=0å°±è¡¨ç¤ºä¸€ä¸ªè¿™ä¸€ç»„æœªé‡Šæ”¾æ‰çš„å—çš„åœ°å€ã€‚å°±è¿™æ ·ä»ç¬¬2å±‚ä¸€ç›´åˆ°ç¬¬0å±‚é€å±‚é‡Šæ”¾ã€‚
3.2 Symbolic linksé¦–å…ˆæ˜¯sys_symlinkï¼Œè¦åœ¨ç›®æ ‡è·¯å¾„å¤„åˆ›å»ºä¸€ä¸ªT_SYMLINKç±»å‹çš„æ–‡ä»¶ã€‚å¹¶åœ¨å¯¹åº”çš„inodeé‡Œåˆ†é…ä¸€ä¸ªç¼“å†²å—ï¼Œå†™å…¥targetï¼Œå³æºæ–‡ä»¶çš„è·¯å¾„ã€‚
åä¸€æ­¥çœ‹èµ·æ¥å¤æ‚ï¼Œå®é™…ä¸Šå°±æ˜¯writeiå‡½æ•°çš„è°ƒç”¨ã€‚
ç„¶åæ˜¯æ”¹å†™sys_openã€‚è¿™é‡Œä¸»è¦æ˜¯æ·»åŠ ä¸€ä¸ªT_SYMLINKä¸”ä¸æ˜¯O_NOFOLLOWçš„å¤„ç†ã€‚
ä¸ºäº†æ–¹ä¾¿å¤„ç†é“¾æ¥çš„æ–‡ä»¶ä¹Ÿæ˜¯ç¬¦å·é“¾æ¥çš„æƒ…å†µï¼Œç”¨äº†ä¸€ä¸ªé€’å½’çš„å‡½æ•°follow
  struct inode*follow(char *path, int cnt)&#123;  if(cnt&gt;=10)&#123;    return 0;  &#125;  struct inode *ip = namei(path);  if(ip==0)&#123;    return 0;  &#125;  ilock(ip);  if(ip-&gt;type != T_SYMLINK)&#123;    return ip;  &#125;  char target[MAXPATH];  if(readi(ip, 0, (uint64)target, 0, MAXPATH) != MAXPATH)&#123;    iunlockput(ip);    return 0;  &#125;  iunlockput(ip);  struct inode *ans = follow(target,cnt+1);  return ans;&#125;


ps:sys_openæ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿå®ƒæ˜¯åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆfdï¼‰ï¼Œå°†å®ƒç»‘å®šåˆ°ä¸€ä¸ª struct file*ï¼Œä¾›åç»­ read(fd) &#x2F;write(fd) ä½¿ç”¨ã€‚ç¤ºæ„å¦‚ä¸‹ï¼š

// 1. ä»ç”¨æˆ·æ‹¿å‚æ•°ï¼šè·¯å¾„ å’Œ æ‰“å¼€æ–¹å¼argstr(0, path);argint(1, &amp;omode);// 2. æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶çš„ inodeï¼ˆå¦‚æœæ²¡æœ‰è€Œä¸”å¸¦ O_CREATEï¼Œåˆ™åˆ›å»ºï¼‰ip = namei(path) / create(path);// 3. åˆ†é…ä¸€ä¸ª file ç»“æ„f = filealloc();// 4. åˆ†é…ä¸€ä¸ª fd å¹¶å°†å…¶ä¸ file* ç»‘å®šfd = fdalloc(f);      // è¿›ç¨‹çš„ proc-&gt;ofile[fd] = f;// 5. åˆå§‹åŒ– file ç»“æ„ï¼šæŒ‡å‘ inodeï¼Œè®¾ç½®è¯»å†™æƒé™f-&gt;ip = ip;f-&gt;readable = ...f-&gt;writable = ...

4. mmapå‘ƒå‘ƒï¼Œè¿™ä¸ªä¹Ÿä¸æ˜¯æˆ‘è‡ªå·±å†™çš„ã€‚ã€‚ã€‚ğŸ˜­
è¿™ä¸ªå®éªŒæˆ‘æ‰“ç®—åé¢å†â€œè¡¥ç¥¨â€ã€‚ï¼ˆè™½ç„¶è¿™ä¸ªflagå¤§æ¦‚ç‡ä¼šå€’ï¼‰
]]></content>
      <categories>
        <category>2024-xv6-labs</category>
      </categories>
      <tags>
        <tag>C</tag>
        <tag>Projects</tag>
        <tag>Operating System</tag>
        <tag>2024-xv6-labs</tag>
      </tags>
  </entry>
  <entry>
    <title>250721 thinking å•è°ƒæ ˆ</title>
    <url>/2025/07/21/250721-thinking-%E5%8D%95%E8%B0%83%E6%A0%88/</url>
    <content><![CDATA[
ä»–å‘è¿œæ–¹æœ›å»ï¼Œæ— æ³•çœ‹åˆ°é«˜å±±èƒŒåçš„çŸ®å±±ï¼Œåªçœ‹åˆ°ä¸€åº§åº§æ›´é«˜çš„å±±å³°ã€‚â€”â€”â€”â€”by çµç¥

1. æ€»ç»“å•è°ƒæ ˆå°±æ˜¯ä¿æŒæ ˆå†…å…ƒç´ å•è°ƒçš„æ ˆã€‚å½“æ–°å…ƒç´ ç ´åå•è°ƒæ€§æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¼¹å‡ºçš„ç¬é—´å°±æ‰¾åˆ°æ ˆé¡¶å…ƒç´ å¯¹åº”çš„ç­”æ¡ˆã€‚
æ ˆé‡Œå­˜æ”¾ç€æš‚æ—¶è¿˜æ²¡æœ‰æ‰¾åˆ°å¯¹åº”ç­”æ¡ˆçš„å…ƒç´ ã€‚æ–°å…ƒç´ å…¥æ ˆæ—¶ï¼Œå¦‚æœæ ˆé¡¶å…ƒç´ ä½¿å¾—æ ˆå•è°ƒæ€§è¢«ç ´ç¯ï¼Œé‚£ä¹ˆæ ˆé¡¶å…ƒç´ çš„ç­”æ¡ˆäº§ç”Ÿï¼Œæ ˆé¡¶å…ƒç´ æ‰¾åˆ°ç­”æ¡ˆï¼Œå‡ºæ ˆã€‚å› æ­¤éœ€è¦å»ºç«‹çš„æ ˆçš„å•è°ƒæ€§ä¸é¢˜ç›®çš„ç­”æ¡ˆéœ€æ±‚å¾€å¾€æ˜¯â€œåè¿‡æ¥â€ã€‚è¦ä¸‹ä¸€ä¸ªæ›´å¤§å°±è¦å•å‡ï¼›è¦ä¸‹ä¸€ä¸ªæ›´å°å°±è¦å•å¢ã€‚
algorithm generalized-monotonic-stack(A, cmp, process)    stack S â† âˆ…    for i â† 0 to n-1 do:        while S â‰  âˆ… and condition(A[i], A[S.top()]) do: // æ ˆçš„å•è°ƒæ€§è¢«ç ´åï¼Œwhileæ˜¯ä¸ºäº†è®©æ ˆé‡Œæ»¡è¶³æ¡ä»¶çš„å…ƒç´ éƒ½å¯ä»¥å‡ºæ ˆ            j â† S.pop() // æ ˆé¡¶å‡ºæ ˆ            recordAnswer(j, i)  // è®¡ç®—å¹¶è®°å½•æ ˆé¡¶å¯¹åº”çš„ç­”æ¡ˆ        end while        S.push(i) // æ ˆä¸ºç©ºæˆ–è€…æ ˆçš„å•è°ƒæ€§æ²¡æœ‰è¢«ç ´åï¼Œåˆ™æ–°å…ƒç´ ä¸€å®šä¸æ˜¯æŸä¸ªå…ƒç´ çš„ç­”æ¡ˆï¼Œå…¥æ ˆ    end forend algorithm

æ—¶é—´å¤æ‚åº¦ä¸ºä»€ä¹ˆæ˜¯ O(n)ï¼Ÿæ¯ä¸ªå…ƒç´ æœ€å¤šå…¥æ ˆä¸€æ¬¡ï¼Œå‡ºæ ˆä¸€æ¬¡ï¼Œæ€»æ“ä½œæ•° â‰¤ 2nã€‚
2. é—®é¢˜åˆ†ç±»ç±»å‹1ï¼šæ‰¾ä¸‹ä¸€ä¸ªæ›´å¤§&#x2F;æ›´å°å…ƒç´ æ¨¡æ¿ï¼š
// ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ while (!st.empty() &amp;&amp; arr[i] &gt; arr[st.top()]) &#123;    result[st.top()] = arr[i];    st.pop();&#125;// ä¸‹ä¸€ä¸ªæ›´å°å…ƒç´   while (!st.empty() &amp;&amp; arr[i] &lt; arr[st.top()]) &#123;    result[st.top()] = arr[i];    st.pop();&#125;

ç±»å‹2ï¼šè®¡ç®—é¢ç§¯&#x2F;è·ç¦»æ¨¡æ¿ï¼š
// æŸ±çŠ¶å›¾æœ€å¤§çŸ©å½¢while (!st.empty() &amp;&amp; heights[i] &lt; heights[st.top()]) &#123;    int h = heights[st.top()];    st.pop();    int w = st.empty() ? i : i - st.top() - 1;    maxArea = max(maxArea, h * w);&#125;// æ¯æ—¥æ¸©åº¦ï¼ˆè®¡ç®—è·ç¦»ï¼‰while (!st.empty() &amp;&amp; temps[i] &gt; temps[st.top()]) &#123;    int j = st.top();    st.pop();    result[j] = i - j;  // è·ç¦»&#125;

3. å…¸å‹ä¾‹é¢˜ä¾‹1ï¼šä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ vector&lt;int&gt; nextGreaterElement(vector&lt;int&gt;&amp; nums) &#123;    int n = nums.size();    vector&lt;int&gt; result(n, -1);    stack&lt;int&gt; st;      for (int i = 0; i &lt; n; i++) &#123;        while (!st.empty() &amp;&amp; nums[i] &gt; nums[st.top()]) &#123;            result[st.top()] = nums[i];            st.pop();        &#125;        st.push(i);    &#125;    return result;&#125;

ä¾‹2ï¼šæŸ±çŠ¶å›¾æœ€å¤§çŸ©å½¢
é«˜åº¦ï¼šå‡ºæ ˆå…ƒç´ çš„é«˜åº¦
å®½åº¦ï¼šå½“å‰ä½ç½® - æ ˆé¡¶ä½ç½® - 1

å¯»æ‰¾å½“å‰é«˜åº¦å¯¹åº”çš„ä¸‹ä¸€ä¸ªæ›´å°çš„é«˜åº¦ã€‚é‚£ä¹ˆåœ¨è¿™ä¸ªç­”æ¡ˆå¯¹åº”çš„ä¸‹æ ‡åˆ°æ ˆé¡¶å¯¹åº”çš„ä¸‹æ ‡è¿™æ®µè·ç¦»ï¼Œå°±æ˜¯å½“å‰é«˜åº¦å¯¹åº”çš„æœ€å¤§å®½åº¦ã€‚è€Œå½“å‰é«˜åº¦ä¹Ÿå³æ˜¯ä¸‹æ ‡å–å€¼åœ¨è¿™ä¸ªèŒƒå›´å†…çŸ©å½¢é«˜åº¦å–å€¼çš„æœ€å¤§å€¼ï¼ˆçŸ­æ¿æ•ˆåº”ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œçš„é«˜åº¦ä¹˜ä»¥å®½åº¦å¾—åˆ°çš„çŸ©å½¢é¢ç§¯å°±æ˜¯åœ¨ä¸‹æ ‡å–å€¼åœ¨è¿™ä¸ªèŒƒå›´å†…çš„æœ€å¤§é¢ç§¯ã€‚
int largestRectangleArea(vector&lt;int&gt;&amp; heights) &#123;    stack&lt;int&gt; st;    heights.push_back(0);  // å“¨å…µï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯æœ€åä¸€ä¸ªå…ƒç´ ä¹Ÿèƒ½å‡ºæ ˆ    int maxArea = 0;      for (int i = 0; i &lt; heights.size(); i++) &#123;        while (!st.empty() &amp;&amp; heights[i] &lt; heights[st.top()]) &#123;            int h = heights[st.top()];            st.pop();            int w = st.empty() ? i : i - st.top() - 1;            maxArea = max(maxArea, h * w);        &#125;        st.push(i);    &#125;    return maxArea;&#125;

ä¾‹3ï¼šæ¥é›¨æ°´int trap(vector&lt;int&gt;&amp; height) &#123;    stack&lt;int&gt; st;    int water = 0;      for (int i = 0; i &lt; height.size(); i++) &#123;        while (!st.empty() &amp;&amp; height[i] &gt; height[st.top()]) &#123;            int bottom = st.top();            st.pop();            if (st.empty()) break;                      int distance = i - st.top() - 1;            int h = min(height[i], height[st.top()]) - height[bottom];            water += distance * h;        &#125;        st.push(i);    &#125;    return water;&#125;

ä¾‹4: æœ€å¤§äºŒå‰æ ‘TreeNode* constructMaximumBinaryTree(vector&lt;int&gt;&amp; nums) &#123;        stack&lt;TreeNode*&gt;st;        for(auto &amp;i: nums)&#123;            TreeNode* cur = new TreeNode(i);            while(!st.empty() &amp;&amp; st.top()-&gt;val&lt;i)&#123;                cur-&gt;left=st.top();                st.pop();            &#125;             if(!st.empty())&#123;                st.top()-&gt;right=cur;            &#125;            st.push(cur);        &#125;        while(st.size()&gt;1)&#123;            st.pop();        &#125;        return st.top();    &#125;

4. å¸¸ç”¨æŠ€å·§æŠ€å·§1ï¼šå“¨å…µåœ¨æ•°ç»„æœ«å°¾åŠ  0 æˆ–æ— ç©·å¤§ï¼Œç¡®ä¿æ‰€æœ‰å…ƒç´ éƒ½èƒ½å‡ºæ ˆï¼š
heights.push_back(0);

æŠ€å·§2ï¼šå¾ªç¯æ•°ç»„éå†ä¸¤éæ¨¡æ‹Ÿå¾ªç¯ï¼š
for (int i = 0; i &lt; 2 * n; i++) &#123;    // ä½¿ç”¨ nums[i % n]    if (i &lt; n) st.push(i);  // åªåœ¨ç¬¬ä¸€è½®å…¥æ ˆ&#125;

æŠ€å·§3ï¼šå­˜å‚¨ä¸‹æ ‡ vs å­˜å‚¨å€¼
éœ€è¦è®¡ç®—è·ç¦»&#x2F;é¢ç§¯ï¼šå­˜å‚¨ä¸‹æ ‡
åªéœ€è¦å…ƒç´ å€¼ï¼šå­˜å‚¨å€¼

5. è§£é¢˜ç»†èŠ‚
é€’å¢æ ˆè¿˜æ˜¯é€’å‡æ ˆï¼Ÿ

å¼¹å‡ºå…ƒç´ çš„æ¡ä»¶ï¼Ÿ

å¼¹å‡ºæ—¶å¦‚ä½•å¤„ç†ï¼Œè¿›è€Œå¾—åˆ°ç­”æ¡ˆï¼Ÿ

æ˜¯å¦éœ€è¦å“¨å…µï¼Ÿ


]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>data structure &amp; algorithm</tag>
        <tag>Monotonic Stack</tag>
      </tags>
  </entry>
  <entry>
    <title>250721 thinking äºŒåˆ†æŸ¥æ‰¾</title>
    <url>/2025/07/21/250721-thinking-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</url>
    <content><![CDATA[1. æ€»ç»“äºŒåˆ†æŸ¥æ‰¾çš„åŸç†éå¸¸ç®€å•ï¼Œä½†æ˜¯ä¸€äº›ç»†èŠ‚ä¾‹å¦‚æ˜¯ l&lt;rè¿˜æ˜¯ l&lt;=rã€æ›´æ–° ræ—¶æ˜¯ r=midè¿˜æ˜¯ r=mid-1ï¼ˆlåŒç†ï¼‰ç­‰åœ°æ–¹å´æœ‰äº›è®©äººå¤´ç–¼ï¼Œå®é™…å†™æ¥å¦‚æœä¸æ³¨æ„å°±å¯èƒ½ä¼šé€ æˆæ­»å¾ªç¯ã€‚
äºæ˜¯æ€»ç»“ä¸€ç§æ¨¡æ¿ï¼š
å®šä¹‰åŸŸä¸º[lo, hi)çš„å•å¢çš„f(x), æ‰¾å‡ºæœ€å°çš„ans, ä½¿å¾—f(ans)&gt;0æˆç«‹ã€‚
å•å‡åŒç†ï¼Œç”šè‡³å¯ä»¥è¿›è¡Œé¢„å¤„ç†å…ˆè½¬åŒ–ä¸ºå•å¢çš„æƒ…å†µã€‚
ä¼ªä»£ç å¦‚ä¸‹ï¼š
algorithm binary-search(lo,hi)	while the search area has elments do:		mid &lt;- lo + (hi-lo)/2;		if f(mid) satisfied: // the answer may occur here            		ans := mid;			hi &lt;- mid;             // the search area could have no elments when in the next loop, so return ans;             // but mid&gt;ans if next loop continues,              // for this is a right-open area, hi &lt;- mid;		else :			lo &lt;- mid + 1;             // mid is not the answer, and mid &lt; answer;            // for this is a left-close area, lo &lt;- mid + 1;	end while	return ans;

2. ä¾‹
å·²çŸ¥ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ çš„ä½ç½®å¹¶è¿”å›ã€‚è‹¥è¯¥å…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›å…ƒç´ åº”æ’å…¥çš„ä½ç½®ã€‚

å®šä¹‰åŸŸä¸º[0, nums.size())ï¼Œæ‰¾å‡ºæœ€å°çš„ans, nums[ans] &gt;&#x3D; targetæˆç«‹
int searchInsert(vector&lt;int&gt;&amp; nums, int target)&#123;Â  Â  Â  Â  int left=0,right=nums.size(),ans; // f(ans)= nums[ans] çš„å®šä¹‰åŸŸï¼š ans \in [left, right)Â  Â  Â  Â  while(left&lt;right)&#123;Â  Â  Â  Â  Â  Â  int mid=(right-left)/2 + left;//é˜²æ­¢ç›´æ¥right+lefté€ æˆæº¢å‡ºÂ  Â  Â  Â  Â  Â  if(nums[mid]&gt;=target)&#123;//å› ä¸ºæˆ‘ä»¬è¦æ‰¾çš„å°±æ˜¯nums[ans]&gt;=targetÂ  Â  Â  Â  Â  Â  Â  Â  ans=mid; //æ‰€ä»¥midå¯èƒ½ä¸ºç­”æ¡ˆã€‚Â  Â  Â  Â  Â  Â  Â  Â  right=mid; //ä¹Ÿå¯èƒ½midä¸æ˜¯ç­”æ¡ˆï¼Œæ›´æ–°å¼€çš„ä¸Šç•Œä¸ºmidÂ  Â  Â  Â  Â  Â  &#125;Â  Â  Â  Â  Â  Â  else&#123;Â  Â  Â  Â  Â  Â  Â  Â  left=mid+1; // å¦åˆ™midç»å¯¹ä¸æ˜¯ç­”æ¡ˆã€‚æ›´æ–°é—­çš„ä¸‹ç•Œä¸ºmid+1ã€‚Â  Â  Â  Â  Â  Â  &#125;Â  Â  Â  Â  &#125;Â  Â  Â  Â  return ans;Â &#125;


ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°Â xÂ ï¼Œè®¡ç®—å¹¶è¿”å›Â xÂ çš„Â ç®—æœ¯å¹³æ–¹æ ¹Â ã€‚ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œç»“æœåªä¿ç•™Â æ•´æ•°éƒ¨åˆ†Â ï¼Œå°æ•°éƒ¨åˆ†å°†è¢«Â èˆå» ã€‚

å®šä¹‰åŸŸä¸º$[0, +\infty)$, æ‰¾å‡ºæœ€å¤§çš„$\text{ans}$, $\text{ans}^2 \leqslant x$
int mySqrt(int x) &#123;Â  Â  Â  Â long long l = 0, r = x+1, ans; // ans \in [0, +\infty), ä½†è¿™é‡Œå¯¹rè¿™æ ·èµ‹å€¼åªæ˜¯ä¸ºäº†è®©anså¿«é€Ÿæ”¶æ•›ã€‚ä¸ºä»€ä¹ˆx+1: x=0,1æ—¶ ans = x &lt; x+1ã€‚  Â  Â  Â  Â  while (l &lt; r) &#123;Â  Â  Â  Â  Â  Â  long long Â mid = (l+r)&gt;&gt;1;Â  Â  Â  Â  Â  Â  if (mid * mid &lt;= x) &#123;//å› ä¸ºè¦æ‰¾çš„å°±æ˜¯ans*ans&lt;=xÂ  Â  Â  Â  Â  Â  Â  Â  ans = mid; //æ‰€ä»¥midå¯èƒ½ä¸ºç­”æ¡ˆã€‚Â  Â  Â  Â  Â  Â  Â  Â  l = mid + 1; //ä¹Ÿå¯èƒ½midä¸æ˜¯ç­”æ¡ˆï¼Œæ›´æ–°é—­çš„ä¸‹ç•Œä¸ºmid+1Â  Â  Â  Â  Â  Â  &#125; else &#123;Â  Â  Â  Â  Â  Â  Â  Â  r = mid; // å¦åˆ™midç»å¯¹ä¸æ˜¯ç­”æ¡ˆã€‚æ›´æ–°å¼€çš„ä¸Šç•Œä¸ºmidã€‚Â  Â  Â  Â  Â  Â  &#125;Â  Â  Â  Â  &#125;Â  Â  Â  Â  return ans; Â  Â  &#125;

ä¹Ÿæœ‰ä¸€äº›æ›´æŠ½è±¡çš„äºŒåˆ†æŸ¥æ‰¾ï¼š
3350.æ£€æµ‹ç›¸é‚»é€’å¢å­æ•°ç»„II
ä»¤f(x)ï¼šk=xæ—¶æ•°ç»„æ˜¯å¦å­˜åœ¨ä¸¤ä¸ªç›¸é‚»ä¸”é•¿åº¦ä¸º k çš„ä¸¥æ ¼é€’å¢å­æ•°ç»„,å­˜åœ¨åˆ™f(x)=1å¦åˆ™f(x)=0ã€‚
åˆ™f(x)å•å‡ã€‚æ»¡è¶³äºŒåˆ†æŸ¥æ‰¾çš„ä½¿ç”¨
äºæ˜¯åŸé—®é¢˜å³ä¸º
å®šä¹‰åŸŸä¸º$[2, \lceil nums.length&#x2F;2 \rceil)$, æ‰¾å‡ºæœ€å¤§çš„$\text{ans}$, $f(\text{ans})&gt;&#x3D;1$
è§£æ³•ç¤ºä¾‹ï¼š
func f(x int, lengths []int) bool &#123;    count := 0    for _, l := range lengths &#123;        if l &gt;= 2*x &#123;             return true        &#125;        if l &gt;= x &#123;            count++            if count &gt;= 2 &#123;                return true            &#125;        &#125;else&#123;            count = 0        &#125;    &#125;    return false&#125;func maxIncreasingSubarrays(nums []int) int &#123;    n := len(nums)    lengths := []int&#123;&#125;    cur := 1    for i := 1; i &lt; n; i++ &#123;        if nums[i] &gt; nums[i-1] &#123;            cur++        &#125; else &#123;            lengths = append(lengths, cur)            cur = 1        &#125;    &#125;    lengths = append(lengths, cur)    lo := 1; hi := len(nums)/2+1    var ans int    for lo&lt;hi&#123;        mi := lo + (hi-lo)/2        if f(mi,lengths)&#123;            ans = mi            lo = mi + 1        &#125;else&#123;            hi=mi        &#125;    &#125;    return ans&#125;
]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>data structure &amp; algorithm</tag>
        <tag>binary search</tag>
      </tags>
  </entry>
  <entry>
    <title>250728-250803 å‘¨è®° ç¼“å­˜æ± é¡¹ç›®å­¦ä¹ </title>
    <url>/2025/08/04/250728-250803-%E5%91%A8%E8%AE%B0-%E7%BC%93%E5%AD%98%E6%B1%A0%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[æœ¬å‘¨ä¸»è¦è·Ÿç€ä»£ç éšæƒ³å½•å­¦ä¹ äº†LRU, LFU, ä»¥åŠARCä¸‰ç§ç¼“å­˜æ›¿æ¢ç®—æ³•çš„åŸç†å’ŒC++å®ç°ã€‚
1. LRULRUæ˜¯Least Recently Usedçš„ç¼©å†™ï¼Œå³æ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„å…ƒç´ ã€‚
ç¼“å­˜çš„å®ç°ä½¿ç”¨äº†ä¸€ä¸ªå“ˆå¸Œè¡¨å’Œä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚å“ˆå¸Œè¡¨ç”¨äºå¿«é€ŸæŸ¥æ‰¾ç¼“å­˜ä¸­çš„å…ƒç´ ï¼ŒåŒå‘é“¾è¡¨ç”¨äºç»´æŠ¤ç¼“å­˜ä¸­çš„å…ƒç´ é¡ºåºã€‚
æ¯å½“æ¶‰åŠä¸€ä¸ªå…ƒç´ çš„keyæ—¶ï¼Œå°†è¯¥å…ƒç´ ç§»åŠ¨åˆ°åŒå‘é“¾è¡¨çš„å¤´éƒ¨ã€‚å½“ç¼“å­˜æ»¡æ—¶ï¼Œå°†åŒå‘é“¾è¡¨çš„å°¾éƒ¨å…ƒç´ åˆ é™¤ã€‚åŒæ—¶å°†è¯¥å…ƒç´ ä»å“ˆå¸Œè¡¨ä¸­åˆ é™¤ã€‚
1.1 æ”¹è¿›ä»¥ä¸Šçš„LRUå­˜åœ¨ç€ç¼“å­˜æ±¡æŸ“ã€é”çš„ç²’åº¦è¿‡å¤§çš„é—®é¢˜ã€‚
ç¼“å­˜æ±¡æŸ“ï¼šå½“æ–°åŠ è¿›æ¥çš„ä¸€æ¬¡æ€§çš„æ•°æ®å¾ˆå¤šï¼Œå¯¼è‡´ç¼“å­˜æ»¡æ—¶ï¼Œä¼ ç»Ÿçš„LRUä¼šç›´æ¥åˆ é™¤å°¾éƒ¨å…ƒç´ ã€‚ä½†æ˜¯ï¼Œå°¾éƒ¨å…ƒç´ å¯èƒ½æ˜¯çƒ­é—¨æ•°æ®ã€‚é”çš„ç²’åº¦å¤§ï¼šä¸€æŠŠå¤§é”é”å…¨å±€ã€‚å¤šçº¿ç¨‹é«˜å¹¶å‘çš„è®¿é—®ä¸‹ï¼ŒåŒæ­¥ç­‰å¾…å°†æ˜¯ä¸€ç¬”æå¤§çš„æ—¶é—´å¼€é”€ã€‚
æ•…è€ƒè™‘ä»¥ä¸‹æ”¹è¿›ï¼š
1.1.1 LRU-KLRU-Kåœ¨æ™®é€šçš„LRUçš„åŸºç¡€ä¸Šï¼Œæ–°å¢åŠ äº†ä¸€ä¸ªå°çš„LRUå‰¯ç¼“å­˜ã€‚å½“æ•°æ®è¿›å…¥æ—¶ï¼Œå®ƒä¼šå…ˆè¿›å…¥å‰¯ç¼“å­˜ï¼Œå¹¶è®¿é—®è®¡æ•°åŠ ä¸€ã€‚åªæœ‰å½“å®ƒçš„è®¿é—®è®¡æ•°å¤§äºç­‰äºKæ—¶ï¼Œæ‰ä¼šç§»å‡ºå‰¯ç¼“å­˜ï¼Œè¿›å…¥ä¸»ç¼“å­˜ã€‚
å½“ä¸»å‰¯ç¼“å­˜æ»¡æ—¶ï¼Œæ·˜æ±°æœºåˆ¶ä¸æ™®é€šLRUä¸€è‡´ã€‚
è¿™æ ·å°±å¯ä»¥é¿å…ç¼“å­˜æ±¡æŸ“çš„é—®é¢˜ã€‚ä½¿å¾—å¤§é‡è¿›å…¥çš„ä¸€æ¬¡æ€§æ•°æ®ä¸ä¼šæŒ¤å‡ºçƒ­é—¨æ•°æ®ã€‚
1.1.2 LRU-Hashä¸2024-xv6-labs-2ä¸­2.2 Buffer cacheçš„æ€æƒ³ä¸€è‡´ï¼Œæ—¢ç„¶ä¸€ä¸ªé“¾è¡¨é…å…¨å±€å¤§é”æ•ˆç‡ä½ï¼Œé‚£å°±æŠŠé“¾è¡¨åˆ†æˆå¤šä¸ªå°é“¾è¡¨ï¼Œæ¯ä¸ªå°é“¾è¡¨å³æ˜¯ä¸€ä¸ªå°çš„lruç¼“å­˜ï¼Œå„è‡ªé…ç½®æœ€å¤§å®¹é‡ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆvectorå³å¯ï¼‰ç»Ÿä¸€ç®¡ç†ï¼Œæ¯ä¸ªå“ˆå¸Œæ¡¶é…ä¸€ä¸ªé”ã€‚æ¯ä¸ªæ–°æ¥çš„å…ƒç´ æ ¹æ®keyçš„å“ˆå¸Œå€¼æ’å…¥å¯¹åº”çš„å°é“¾è¡¨ä¸­ã€‚è‹¥å®¹é‡åœ¨è¿™ä¹‹å‰å·²æ»¡ï¼Œåˆ™åŒç†åˆ é™¤è¿™ä¸ªå°é“¾è¡¨çš„å°¾éƒ¨å…ƒç´ ã€‚
2. LFULFUæ˜¯Least Frequently Usedçš„ç¼©å†™ï¼Œå³æ·˜æ±°ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„å…ƒç´ ã€‚
ç¼“å­˜çš„å®ç°ä½¿ç”¨äº†ä¸€ä¸ªè®°å½•é”®-å€¼å¯¹&lt;key, value&gt;çš„å“ˆå¸Œè¡¨aå’Œä¸€ä¸ªè®°å½•é¢‘ç‡-åˆ—è¡¨å¯¹&lt;freq, linklist&gt;çš„å“ˆå¸Œè¡¨bã€‚å“ˆå¸Œè¡¨aç”¨äºå¿«é€ŸæŸ¥æ‰¾ç¼“å­˜ä¸­çš„å…ƒç´ ï¼Œå“ˆå¸Œè¡¨bç”¨äºæ ¹æ®é¢‘ç‡é«˜æ•ˆåœ°ç»´æŠ¤ç¼“å­˜ä¸­çš„å…ƒç´ ã€‚
æ¯å½“æ¶‰åŠä¸€ä¸ªå…ƒç´ çš„keyæ—¶ï¼Œå°†è¯¥å…ƒç´ çš„é¢‘ç‡å¢åŠ 1ï¼Œå¹¶å°†è¯¥å…ƒç´ ç§»åŠ¨åˆ°å“ˆå¸Œè¡¨bä¸­å¯¹åº”é¢‘ç‡çš„é“¾è¡¨å¤´éƒ¨ã€‚ç§»åŠ¨åè‹¥åŸé“¾è¡¨ä¸ºç©ºåˆ™åˆ å»ã€‚å½“ç¼“å­˜æ»¡æ—¶ï¼Œå°†å“ˆå¸Œè¡¨bä¸­é¢‘ç‡æœ€ä½çš„é“¾è¡¨çš„å°¾éƒ¨å…ƒç´ åˆ é™¤ã€‚åŒæ—¶å°†è¯¥å…ƒç´ ä»å“ˆå¸Œè¡¨aä¸­åˆ é™¤ã€‚
2.1 æ”¹è¿›æ™®é€šLFUå­˜åœ¨ç€æ–°æ¥çš„å…ƒç´ å®¹æ˜“è¢«ç§»å‡ºï¼ˆå³ä½¿æ˜¯æœªæ¥çš„çƒ­é—¨æ•°æ®ï¼‰ã€è€Œè¿‡æ—¶çš„çƒ­é—¨æ•°æ®å¾ˆéš¾è¢«ç§»å‡ºçš„é—®é¢˜ï¼Œè€Œä¸”è®¿é—®æ¬¡æ•°è‹¥ä¸€ç›´å¢é•¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸Šæº¢ã€‚
åŒæ—¶ä¸æ™®é€šLRUä¸€æ ·ï¼Œå­˜åœ¨é”çš„ç²’åº¦è¿‡å¤§çš„é—®é¢˜ã€‚
æ”¹è¿›å¦‚ä¸‹ï¼š
2.1.1 æœ€å¤§å¹³å‡è®¿é—®æ¬¡æ•°é™åˆ¶é¦–å…ˆè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ã€‚å½“æ•°æ®è®¿é—®&#x2F;æ’å…¥å‘ç”Ÿæ—¶ï¼Œä¸ä»…éœ€è¦è®°å½•å½“å‰æœ€å°è®¿é—®æ¬¡æ•°ï¼Œè¿˜éœ€è¦è®¡ç®—å¹³å‡è®¿é—®æ¬¡æ•°ã€‚ç„¶åå½“å¹³å‡è®¿é—®æ¬¡æ•°è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œå°±éœ€è¦å¯¹è®°å½•çš„è®¿é—®æ¬¡æ•°è¿›è¡Œè°ƒæ•´ã€‚æ‰€æœ‰çš„å…ƒç´ çš„è®¿é—®æ¬¡æ•°å‡å»é˜ˆå€¼çš„ä¸€åŠï¼Œæ“ä½œåå°äº0è€…è®¾ä¸º1ã€‚ç„¶åæ›´æ–°è®°å½•&lt;freq-linklist&gt;çš„å“ˆå¸Œè¡¨ï¼Œå°†å…ƒç´ æ’å…¥å¯¹åº”é¢‘ç‡çš„é“¾è¡¨ä¸­ã€‚
è¿™æ ·çš„æ–¹å¼ä¸ä»…å¯ä»¥é¿å…è®¿é—®æ¬¡æ•°çš„ä¸Šæº¢ï¼Œè¿˜å¯ä»¥åŠ å¿«æ•°æ®çš„æ›´æ–°ï¼Œè®©æ—§çš„çƒ­ç‚¹æ•°æ®â€è€åŒ–â€ï¼Œç¼“è§£æŒ¤å æœªæ¥çš„çƒ­ç‚¹æ•°æ®ç©ºé—´çš„é—®é¢˜ã€‚
2.1.2 LFU-HashåŒLRU-Hashçš„æ€æƒ³ï¼Œåˆ†æˆå¤šä¸ªè®°å½•&lt;freq-linklist&gt;çš„å°å“ˆå¸Œè¡¨ï¼Œæ¯ä¸ªè¡¨å³æ˜¯ä¸€ä¸ªå°çš„lfuç¼“å­˜ï¼Œå„è‡ªé…ç½®æœ€å¤§å®¹é‡ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆvectorå³å¯ï¼‰ç»Ÿä¸€ç®¡ç†ï¼Œæ¯ä¸ªå“ˆå¸Œæ¡¶é…ä¸€ä¸ªé”ã€‚æ¯ä¸ªæ–°æ¥çš„å…ƒç´ æ ¹æ®keyçš„å“ˆå¸Œå€¼æ’å…¥å¯¹åº”çš„å°é“¾è¡¨ä¸­ã€‚è‹¥å®¹é‡åœ¨è¿™ä¹‹å‰å·²æ»¡ï¼Œåˆ™åŒç†åˆ é™¤é¢‘ç‡æœ€ä½çš„é“¾è¡¨çš„å°¾éƒ¨å…ƒç´ ã€‚
3. ARCARCæ˜¯Adaptive Replacement Cacheçš„ç¼©å†™ï¼Œå³è‡ªé€‚åº”æ›¿æ¢ç¼“å­˜ã€‚
å½“è®¿é—®çš„æ•°æ®è¶‹å‘äºè®¿é—®æœ€è¿‘çš„å†…å®¹ï¼Œä¼šæ›´å¤šåœ°å‘½ä¸­LRU listï¼›å½“ç³»ç»Ÿè¶‹å‘äºè®¿é—®é¢‘ç¹è®¿é—®çš„å†…å®¹æ—¶ï¼Œä¼šæ›´å¤šåœ°å‘½ä¸­LFU listã€‚
LRUå’ŒLFUå„æœ‰ä¼˜åŠ£ï¼Œè€Œå®é™…åº”ç”¨ç¯å¢ƒæ›´ä¸ºå¤æ‚ï¼Œéœ€è¦å°†ä¸¤ç§æ··åˆï¼Œå–é•¿è¡¥çŸ­ã€‚äºæ˜¯å°±æœ‰äº†ç»“åˆLRUå’ŒLFUçš„ç¼“å­˜æ›¿æ¢ç®—æ³•ï¼Œå³ARCã€‚
åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå°†ç¼“å­˜åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯LRUç¼“å­˜ï¼Œä¸€éƒ¨åˆ†æ˜¯LFUç¼“å­˜ï¼Œç„¶åæ¯ä¸ªç¼“å­˜æœ‰ä¸€ä¸ªè‡ªå·±çš„ghostç¼“å­˜ã€‚
å½“æ–°æ•°æ®è¿›å…¥æ—¶ï¼Œå…ˆè¿›å…¥LRU listï¼Œå¹¶è®¿é—®æ¬¡æ•°è®¾ä¸ºä¸€ã€‚å½“å†æ¬¡è®¿é—®è¿™ä¸ªæ•°æ®æ—¶ï¼Œè®¿é—®æ¬¡æ•°å¢åŠ 1ã€‚å½“è®¿é—®æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼åï¼ŒLFU listé‡Œä¹Ÿæ’å…¥è¿™ä¸ªå…ƒç´ ã€‚äºæ˜¯ï¼Œè¯¥æ•°æ®å—ä¸ä»…ä»…åªä¿å­˜åœ¨LRUçš„ç¼“å­˜ç›®å½•ä¸­ï¼Œä¹Ÿå°†ä¿å­˜åˆ°LFUä¸­ã€‚æ‰€ä»¥ä¸€ä¸ªæœ€è¿‘çš„çƒ­é—¨æ•°æ®è‹¥æœ‰æ›´æ–°åº”è¯¥æ˜¯ä¸¤ä¸ªè¡¨åŒæ—¶è¿›è¡Œçš„ã€‚
è¿™æ ·ï¼Œé‚£äº›çœŸæ­£è¢«é¢‘ç¹è®¿é—®çš„é¡µé¢å°†ä¸€ç›´å‘†åœ¨ç¼“å­˜ä¸­ï¼Œä¸ä¼šè¢«å†·æ•°æ®çš„åŠ å…¥è€Œè¯¯æ·˜æ±°ï¼Œä¸ç»å¸¸è®¿é—®çš„æ•°æ®ä¼šå‘é“¾è¡¨å¤´éƒ¨ç§»åŠ¨ï¼Œæœ€ç»ˆè¢«æ·˜æ±°å‡ºå»ã€‚
å½“ç¼“å­˜æ»¡æ—¶ï¼Œéœ€è¦æ·˜æ±°ä¸€ä¸ªå…ƒç´ ã€‚æ·˜æ±°çš„é€»è¾‘ä¸å¯¹åº”çš„æ™®é€šLRUå’Œæ™®é€šLFUä¸€è‡´ï¼Œåªæ˜¯æ·˜æ±°å‡ºçš„å…ƒç´ è¦æ’å…¥å¯¹åº”çš„ghostç¼“å­˜ä¸­ã€‚ghostç¼“å­˜çš„æ·˜æ±°æ¨¡å¼å°±æ˜¯ç®€å•çš„FIFOå³å¯ã€‚
è¿™æ ·ï¼Œè®¿é—®å…ƒç´ åœ¨å“ªä¸€è¾¹ghostä¸­æ‰¾åˆ°ï¼Œå°±è¯´æ˜é‚£ä¸€è¾¹çš„å®¹é‡å°äº†è€Œå¯¹é¢çš„å®¹é‡å¤§äº†ã€‚å¯¹é¢çš„å®¹é‡å¦‚æœä¸ä¸º0åˆ™å‡ä¸€ï¼Œç„¶åè¿™è¾¹çš„å®¹é‡åŠ ä¸€ã€‚å¦åˆ™è·³è¿‡ã€‚
]]></content>
      <categories>
        <category>cache</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>projects</tag>
        <tag>cache</tag>
      </tags>
  </entry>
  <entry>
    <title>250824 thinking Trie</title>
    <url>/2025/08/24/250824-thinking-Trie/</url>
    <content><![CDATA[å­—å…¸æ ‘ï¼ˆTrieï¼‰æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚æ¯ä¸ªèŠ‚ç‚¹æœ‰26ä¸ªå­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹çš„åºå·åˆ†åˆ«ä»£è¡¨26ä¸ªå­—æ¯ã€‚å› æ­¤ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸ªèŠ‚ç‚¹çš„è·¯å¾„è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æœ‰æ—¶å€™ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¼šæœ‰ä¸€ä¸ªæ ‡è®°ï¼Œç”¨äºè¡¨ç¤ºæ˜¯å¦ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²çš„ç»“æŸã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„æ ‡è®°ä¸ºtrueï¼Œé‚£ä¹ˆä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„è·¯å¾„è¡¨ç¤ºçš„å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ªå•è¯ã€‚
C++ç¤ºä¾‹ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„C++å®ç°ï¼Œæ”¯æŒæ’å…¥ã€æœç´¢å’Œå‰ç¼€æœç´¢ã€‚
class Node &#123;public:    int end;    vector&lt;unique_ptr&lt;Node&gt;&gt; son;    Node():end(0),son(26)&#123;&#125;;&#125;;class Trie &#123;public:    unique_ptr&lt;Node&gt; root;    Trie() &#123;        root=make_unique&lt;Node&gt;();    &#125;        void insert(string word) &#123;        Node* cur=root.get();        for(auto chr: word)&#123;            if(cur-&gt;son[chr-&#x27;a&#x27;]==nullptr)                cur-&gt;son[chr-&#x27;a&#x27;]=make_unique&lt;Node&gt;();            cur=cur-&gt;son[chr-&#x27;a&#x27;].get();        &#125;        cur-&gt;end=1;    &#125;        bool search(string word) &#123;        Node* cur = root.get();        for (char c : word) &#123;            c -= &#x27;a&#x27;;            if (cur-&gt;son[c] == nullptr) &#123;                 return false;            &#125;            cur = cur-&gt;son[c].get();        &#125;        return cur-&gt;end==1;    &#125;        bool startsWith(string prefix) &#123;        Node* cur = root.get();        for (char c : prefix) &#123;            c -= &#x27;a&#x27;;            if (cur-&gt;son[c] == nullptr) &#123;                 return false;            &#125;            cur = cur-&gt;son[c].get();        &#125;        return true;    &#125;&#125;;
]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>data structure &amp; algorithm</tag>
        <tag>string</tag>
        <tag>Trie</tag>
      </tags>
  </entry>
  <entry>
    <title>250811-250817 å‘¨è®° linuxå‘½ä»¤ä¸shellç¼–ç¨‹å­¦ä¹ (2)</title>
    <url>/2025/08/19/250811-250817-%E5%91%A8%E8%AE%B0-linux%E5%91%BD%E4%BB%A4%E4%B8%8Eshell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-2/</url>
    <content><![CDATA[2. ç¬¬äºŒéƒ¨åˆ† shell è„šæœ¬ç¼–ç¨‹åŸºç¡€2.11 æ„å»ºåŸºç¡€è„šæœ¬2.11.2 åˆ›å»º shell è„šæœ¬æ–‡ä»¶
å…¶ä¸­è¾“å…¥å‘½ä»¤ã€‚ åœ¨åˆ›å»º shell è„šæœ¬æ–‡ä»¶æ—¶,å¿…é¡»åœ¨æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒæŒ‡å®šè¦ä½¿ç”¨çš„ shell,æ ¼å¼å¦‚ä¸‹:  #!&#x2F;bin&#x2F;bash  åœ¨æ™®é€šçš„ shell è„šæœ¬ä¸­,#ç”¨ä½œæ³¨é‡Šè¡Œã€‚shell å¹¶ä¸ä¼šå¤„ç† shell è„šæœ¬ä¸­çš„æ³¨é‡Šè¡Œã€‚ç„¶è€Œ,shell è„šæœ¬æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ˜¯ä¸ªä¾‹å¤–,#åé¢çš„æƒŠå¹å·ä¼šå‘Šè¯‰ shell ç”¨å“ªä¸ª shell æ¥è¿è¡Œè„šæœ¬ã€‚(æ˜¯çš„,å¯ä»¥ä½¿ç”¨ bash shell,ç„¶åä½¿ç”¨å¦ä¸€ä¸ª shell æ¥è¿è¡Œä½ çš„è„šæœ¬ã€‚)
é€šè¿‡ chmod å‘½ä»¤(å‚è§ç¬¬ 7 ç« )èµ‹äºˆæ–‡ä»¶å±ä¸»æ‰§è¡Œæ–‡ä»¶çš„æƒé™åï¼Œå°±å¯ä»¥ç›´æ¥./script.shæ¥è¿è¡Œè„šæœ¬äº†ã€‚

2.11.3 æ˜¾ç¤ºæ¶ˆæ¯
å¦‚æœåœ¨ echo å‘½ä»¤åé¢åŠ ä¸Šå­—ç¬¦ä¸²,é‚£ä¹ˆ echo å‘½ä»¤å°±ä¼šæ˜¾ç¤ºå‡ºè¿™ä¸ªå­—ç¬¦ä¸²
echoè¾“å‡ºé»˜è®¤å¥æœ«å¸¦ä¸€ä¸ªæ¢è¡Œç¬¦\n,å¯ä»¥ä½¿ç”¨-né€‰é¡¹å–æ¶ˆæ¢è¡Œç¬¦

2.11.4 ä½¿ç”¨å˜é‡2.11.4.1 ç¯å¢ƒå˜é‡
åæ–œçº¿å…è®¸ shell è„šæœ¬æŒ‰ç…§å­—é¢æ„ä¹‰è§£é‡Š$,è€Œä¸æ˜¯å¼•ç”¨å˜é‡
é€šè¿‡${variable}å½¢å¼å¼•ç”¨çš„å˜é‡ã€‚èŠ±æ‹¬å·é€šå¸¸ç”¨äºå¸®åŠ©ç•Œå®š$åçš„å˜é‡åã€‚

2.11.4.2 ç”¨æˆ·è‡ªå®šä¹‰å˜é‡
ä½¿ç”¨ç­‰å·ä¸ºå˜é‡èµ‹å€¼ã€‚åœ¨å˜é‡ã€ç­‰å·å’Œå€¼ä¹‹é—´ä¸èƒ½å‡ºç°ç©ºæ ¼
shell è„šæœ¬ä¼šä»¥å­—ç¬¦ä¸²å½¢å¼å­˜å‚¨æ‰€æœ‰çš„å˜é‡å€¼,è„šæœ¬ä¸­çš„å„ä¸ªå‘½ä»¤å¯ä»¥è‡ªè¡Œå†³å®šå˜é‡å€¼çš„æ•°æ®ç±»å‹ã€‚
shell è„šæœ¬ä¸­å®šä¹‰çš„å˜é‡åœ¨è„šæœ¬çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œä¼šä¸€ç›´ä¿æŒç€å®ƒä»¬çš„å€¼,åœ¨è„šæœ¬ç»“æŸæ—¶ä¼šè¢«åˆ é™¤ã€‚
å¼•ç”¨å˜é‡å€¼æ—¶è¦åŠ $,å¯¹å˜é‡èµ‹å€¼æ—¶åˆ™ä¸ç”¨åŠ $

2.11.4.3 å‘½ä»¤æ›¿æ¢
å°†å‘½ä»¤è¾“å‡ºèµ‹ç»™å˜é‡: var=$(command)æˆ–è€…: var=`command` æ³¨æ„,èµ‹å€¼å·å’Œå‘½ä»¤æ›¿æ¢ ç¬¦ä¹‹é—´æ²¡æœ‰ç©ºæ ¼

2.11.5 é‡å®šå‘è¾“å…¥å’Œè¾“å‡º2.11.5.1 è¾“å‡ºé‡å®šå‘
æœ€åŸºæœ¬çš„é‡å®šå‘ä¼šå°†å‘½ä»¤çš„è¾“å‡ºå‘é€è‡³æ–‡ä»¶ã€‚bash shell ä½¿ç”¨â€œ&gt;â€æ¥å®ç°è¯¥æ“ä½œ
å°†å‘½ä»¤è¾“å‡ºè¿½åŠ åˆ°å·²æœ‰æ–‡ä»¶ä¸­ï¼š&gt;&gt;

2.11.5.2 è¾“å…¥é‡å®šå‘
è¾“å…¥é‡å®šå‘ä¼šå°†æ–‡ä»¶çš„å†…å®¹ä½œä¸ºå‘½ä»¤çš„è¾“å…¥ã€‚ä½¿ç”¨â€œ&lt;â€æ¥å®ç°è¯¥æ“ä½œ command &lt; inputfile
ä¸€ç§ç®€å•çš„è®°å¿†æ–¹æ³•æ˜¯,åœ¨å‘½ä»¤è¡Œä¸­,å‘½ä»¤æ€»æ˜¯åœ¨å·¦ä¾§,è€Œé‡å®šå‘è¿ç®—ç¬¦â€œæŒ‡å‘â€æ•°æ®æµåŠ¨çš„æ–¹å‘ã€‚å°äºå·è¯´æ˜æ•°æ®æ­£åœ¨ä»è¾“å…¥æ–‡ä»¶æµå‘å‘½ä»¤ã€‚
è¿˜æœ‰å¦å¤–ä¸€ç§è¾“å…¥é‡å®šå‘çš„æ–¹æ³•,ç§°ä¸ºå†…è”è¾“å…¥é‡å®šå‘ã€‚è¿™ç§æ–¹æ³• æ— é¡»ä½¿ç”¨æ–‡ä»¶è¿›è¡Œé‡å®šå‘,åªéœ€åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šç”¨äºè¾“å…¥é‡å®šå‘çš„æ•°æ®å³å¯ã€‚
å†…è”è¾“å…¥é‡å®šå‘çš„æ ¼å¼å¦‚ä¸‹: command &lt;&lt; delimiter
å…¶ä¸­,delimiter æ˜¯ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å­—ç¬¦ä¸²,ç”¨äºæ ‡è¯†è¾“å…¥é‡å®šå‘çš„ç»“æŸã€‚
å†…è”è¾“å…¥é‡å®šå‘çš„å·¥ä½œåŸç†æ˜¯,shell ä¼šå°†å‘½ä»¤è¡Œä¸­æ‰€æœ‰ä½äº delimiter ä¹‹å‰çš„æ–‡æœ¬ä½œä¸ºå‘½ä»¤çš„è¾“å…¥ã€‚ä¾‹å¦‚ï¼š



$ wc &lt;&lt; EOF &gt; test string 1 &gt; test string 2 &gt; test string 3 &gt; EOF 


å› æ­¤å¯ä»¥åœ¨è„šæœ¬ä¸­åƒè¿™æ ·ç”¨ï¼š

cat &gt;&gt; $outfile &lt;&lt; EOF INSERT INTO members (lname,fname,address,city,state,zip) VALUES (&#x27;$lname&#x27;, &#x27;$fname&#x27;, &#x27;$address&#x27;, &#x27;$city&#x27;, &#x27;$state&#x27;, &#x27;$zip&#x27;); EOF


å¿«é€Ÿåœ°æ ¹æ®csvæ–‡ä»¶ç”Ÿæˆsqlè¯­å¥

2.11.6 ç®¡é“
å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ command1 | command2
å®é™…ä¸Š,Linux ç³»ç»Ÿä¼šåŒæ—¶è¿è¡Œè¿™ä¸¤ä¸ªå‘½ä»¤, åœ¨ç³»ç»Ÿå†…éƒ¨å°†äºŒè€…è¿æ¥èµ·æ¥ã€‚å½“ç¬¬ä¸€ä¸ªå‘½ä»¤äº§ç”Ÿè¾“å‡ºæ—¶,å®ƒä¼šè¢«ç«‹å³ä¼ ç»™ç¬¬äºŒä¸ªå‘½ä»¤ã€‚æ•°æ®ä¼ è¾“ ä¸ä¼šç”¨åˆ°ä»»ä½•ä¸­é—´æ–‡ä»¶æˆ–ç¼“å†²åŒºã€‚
ç®¡é“å¯ä»¥ä¸²è”çš„å‘½ä»¤æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚å¯ä»¥æŒç»­åœ°å°†å‘½ä»¤è¾“å‡ºé€šè¿‡ç®¡é“ä¼ ç»™å…¶ä»–å‘½ä»¤æ¥ç»†åŒ–æ“ä½œã€‚


2.11.7 æ‰§è¡Œæ•°å­¦è¿ç®—2.11.7.2 ä½¿ç”¨æ‹¬å·
è¦å°†æ•°å­¦è¿ç®—ç»“æœèµ‹ç»™å˜é‡,ä½¿ç”¨var=$((expression))
bash shell çš„æ•°å­¦è¿ç®—ç¬¦åªæ”¯æŒæ•´æ•°è¿ç®—, z shell(zsh)æä¾›äº†å®Œæ•´çš„æµ®ç‚¹æ•°æ“ä½œã€‚

2.11.8 é€€å‡ºè„šæœ¬2.11.8.1 æŸ¥çœ‹é€€å‡ºçŠ¶æ€ç 
Linux æä¾›äº†ä¸“é—¨çš„å˜é‡$?æ¥ä¿å­˜æœ€åä¸€ä¸ªå·²æ‰§è¡Œå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ã€‚
æŒ‰ç…§æƒ¯ä¾‹,å¯¹äºæˆåŠŸç»“æŸçš„å‘½ä»¤,å…¶é€€å‡ºçŠ¶æ€ç æ˜¯ 0ã€‚å¯¹äºå› é”™è¯¯è€Œç»“æŸçš„å‘½ä»¤,å…¶é€€å‡ºçŠ¶æ€ç æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚

2.1.8.2 exit å‘½ä»¤
exit å‘½ä»¤å…è®¸åœ¨è„šæœ¬ç»“æŸæ—¶æŒ‡å®šä¸€ä¸ªé€€å‡ºçŠ¶æ€ç 
é€€å‡ºçŠ¶æ€ç å¿…é¡»æ˜¯ 0 åˆ° 255 ä¹‹é—´çš„æ•´æ•°ã€‚å¦‚æœæŒ‡å®šäº†è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å€¼,åˆ™ä¼šè‡ªåŠ¨å¯¹256å–æ¨¡ã€‚

2.12 ç»“æ„åŒ–å‘½ä»¤2.12.1 ä½¿ç”¨ if-then è¯­å¥if command; then    commandsfi

2.12.2 if-then-elseif command; then    commandselse    commandsfi

2.12.3 if-then-elif-elseif command; then    commandselif command; then    commands(çœç•¥å¯èƒ½çš„å¤šä¸ªelifè¯­å¥)else    commandsfi

2.12.4 test å‘½ä»¤
bash shell æä¾›äº†å¦ä¸€ç§æ¡ä»¶æµ‹è¯•æ–¹å¼:

if [ condition ]; then    commandsfi


ç¬¬ä¸€ä¸ªæ–¹æ‹¬å·ä¹‹åå’Œç¬¬äºŒä¸ªæ–¹æ‹¬å·ä¹‹å‰å¿…é¡»ç•™æœ‰ç©ºæ ¼

2.12.4.1 æ•°å€¼æ¯”è¾ƒ


æ¯”è¾ƒ
æè¿°



n1 -eq n2
æ£€æŸ¥ n1 æ˜¯å¦ç­‰äº n2


n1 -ge n2
æ£€æŸ¥ n1 æ˜¯å¦å¤§äºæˆ–ç­‰äº n2


n1 -gt n2
æ£€æŸ¥ n1 æ˜¯å¦å¤§äº n2


n1 -le n2
æ£€æŸ¥ n1 æ˜¯å¦å°äºæˆ–ç­‰äº n2


n1 -lt n2
æ£€æŸ¥ n1 æ˜¯å¦å°äº n2


n1 -ne n2
æ£€æŸ¥ n1 æ˜¯å¦ä¸ç­‰äº n2


2.12.4.2 å­—ç¬¦ä¸²æ¯”è¾ƒ


æ¯”è¾ƒ
æè¿°



-z string
æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º


-n string
æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºç©º


string1 &#x3D; string2
æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰


string1 !&#x3D; string2
æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ç›¸ç­‰


string1 &lt; string2
æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦å°äº string2


string1 &gt; string2
æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦å¤§äº string2



æµ‹è¯•è¡¨è¾¾å¼ä½¿ç”¨æ ‡å‡†çš„æ•°å­¦æ¯”è¾ƒç¬¦å·æ¥è¡¨ç¤ºå­—ç¬¦ä¸²æ¯”è¾ƒ,è€Œç”¨æ–‡æœ¬ä»£ç æ¥è¡¨ç¤ºæ•°å€¼æ¯”è¾ƒã€‚

2.12.4.3 æ–‡ä»¶æ¯”è¾ƒ


æ¯”è¾ƒ
æè¿°



-e filename
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨


-f filename
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶


-d filename
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç›®å½•


-r filename
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¯è¯»


-w filename
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¯å†™


-x filename
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¯æ‰§è¡Œ


-s filename
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”éç©º


filename1 -nt filename2
æ£€æŸ¥ filename1 æ˜¯å¦æ¯” filename2 æ–°


filename1 -ot filename2
æ£€æŸ¥ filename1 æ˜¯å¦æ¯” filename2 æ—§


2.12.5 å¤åˆæ¡ä»¶æµ‹è¯•
if-then è¯­å¥å…è®¸ä½¿ç”¨å¸ƒå°”é€»è¾‘å°†æµ‹è¯•æ¡ä»¶ç»„åˆèµ·æ¥ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§å¸ƒå°”è¿ç®—ç¬¦ï¼š
[ condition1 ] &amp;&amp; [ condition2 ] 
[ condition1 ] || [ condition2 ]



2.12.6 if-then çš„é«˜çº§ç‰¹æ€§2.12.6.1 ä½¿ç”¨å•æ‹¬å·if (command); then    commandsfi


å•æ‹¬å·ä¸­çš„å‘½ä»¤ä¼šåœ¨å­ shell ä¸­æ‰§è¡Œ,è€Œä¸æ˜¯åœ¨å½“å‰ shell ä¸­æ‰§è¡Œã€‚
å•æ‹¬å·ä¸­çš„å‘½ä»¤å¯ä»¥ä½¿ç”¨åˆ†å·åˆ†éš”å¤šä¸ªå‘½ä»¤ã€‚
å•æ‹¬å·ä¸­çš„å‘½ä»¤å¯ä»¥ä½¿ç”¨åå¼•å·æˆ–ç¾å…ƒç¬¦å·å¼•ç”¨å˜é‡ã€‚

2.12.6.2 ä½¿ç”¨åŒæ‹¬å·if ((expression)); then    commandsfi


åŒæ‹¬å·ä¸­çš„è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨çš„è¿ç®—ç¬¦ï¼š




ç¬¦å·
æè¿°



val++
åå¢


valâ€“
åå‡


++val
å…ˆå¢


â€“val
å…ˆå‡


!
é€»è¾‘æ±‚å


~
ä½æ±‚å


**
å¹‚è¿ç®—


&lt;&lt;
å·¦ä½ç§»


&gt;&gt;
å³ä½ç§»


&amp;
ä½å¸ƒå°” AND


|
ä½å¸ƒå°” OR


&amp;&amp;
é€»è¾‘ AND


||
é€»è¾‘ OR



åŒæ‹¬å·å‘½ä»¤æ—¢å¯ä»¥åœ¨ if è¯­å¥ä¸­ä½¿ç”¨,ä¹Ÿå¯ä»¥åœ¨è„šæœ¬ä¸­çš„æ™®é€šå‘½ä»¤é‡Œç”¨æ¥èµ‹å€¼
åŒæ‹¬å·ä¸­è¡¨è¾¾å¼çš„å¤§äºå·å’Œå°äºå·ä¸ç”¨è½¬ä¹‰ã€‚è¿™æ˜¯åŒæ‹¬å·å‘½ä»¤åˆä¸€ä¸ªä¼˜è¶Šæ€§çš„ä½“ç°ã€‚

2.12.6.3 ä½¿ç”¨åŒæ–¹æ‹¬å·
åŒæ–¹æ‹¬å·å‘½ä»¤æä¾›äº†é’ˆå¯¹å­—ç¬¦ä¸²æ¯”è¾ƒçš„é«˜çº§ç‰¹æ€§

if [[ expression ]]; then    commandsfi

æä¾›äº† test å‘½ä»¤æ‰€ä¸å…·å¤‡çš„å¦ä¸€ä¸ªç‰¹æ€§â€”â€”æ¨¡å¼åŒ¹é…ã€‚
åŒç­‰å·(&#x3D;&#x3D;)ä¼šå°†å³ä¾§çš„å­—ç¬¦ä¸²è§†ä¸ºä¸€ä¸ªæ¨¡å¼å¹¶åº”ç”¨æ¨¡å¼åŒ¹é…è§„åˆ™ã€‚

2.12.7 case å‘½ä»¤
æœ‰äº† case å‘½ä»¤,å°±æ— é¡»å†å†™å¤§é‡çš„ elif è¯­å¥æ¥æ£€æŸ¥åŒä¸€ä¸ªå˜é‡çš„å€¼äº†ã€‚case å‘½ä»¤ä¼šé‡‡ ç”¨åˆ—è¡¨æ ¼å¼æ¥æ£€æŸ¥å˜é‡çš„å¤šä¸ªå€¼:

case variable in    pattern1)        commands        ;;    pattern2)        commands        ;;    *)        commands        ;;esac

2.13 æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤2.13.1 for å‘½ä»¤for variable in list; do    commandsdone

2.13.1.2 è¯»å–åˆ—è¡¨ä¸­çš„å¤æ‚å€¼
for å¾ªç¯å‡å®šå„ä¸ªå€¼ä¹‹é—´æ˜¯ ä»¥ç©ºæ ¼åˆ†éš”çš„ã€‚å¦‚æœæŸä¸ªå€¼å«æœ‰ç©ºæ ¼, åˆ™å¿…é¡»å°†å…¶æ”¾å…¥åŒå¼•å·å†…ã€‚

2.13.1.5 æ›´æ”¹å­—æ®µåˆ†éš”ç¬¦
IFS ç¯å¢ƒå˜é‡å®šä¹‰äº† bash shell ç”¨ä½œå­—æ®µåˆ†éš”ç¬¦çš„ä¸€ç³»åˆ—å­—ç¬¦ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹,bash shell ä¼šå°†ä¸‹åˆ—å­—ç¬¦è§†ä¸ºå­—æ®µåˆ†éš”ç¬¦ã€‚
ç©ºæ ¼
åˆ¶è¡¨ç¬¦
æ¢è¡Œç¬¦


ä¿®æ”¹ IFS ç¯å¢ƒå˜é‡å¯ä»¥æ”¹å˜ bash shell ç”¨ä½œå­—æ®µåˆ†éš”ç¬¦çš„å­—ç¬¦ã€‚ä¿®æ”¹ IFS çš„å€¼,ä½¿å…¶åªèƒ½è¯†åˆ«æ¢è¡Œç¬¦: IFS=$&#39;\n&#39;


åœ¨ Bash é‡Œï¼Œ$â€™â€¦â€™ æ˜¯ ANSI-C é£æ ¼çš„å­—ç¬¦ä¸²ï¼Œä¼šè¯†åˆ« C è¯­è¨€é£æ ¼çš„è½¬ä¹‰ç¬¦$â€™\nâ€™ â†’ çœŸæ­£çš„æ¢è¡Œç¬¦$â€™\tâ€™ â†’ åˆ¶è¡¨ç¬¦ï¼ˆTabï¼‰$â€™\x41â€™ â†’ å­—ç¬¦ A


åœ¨å¤„ç†ä»£ç é‡è¾ƒå¤§çš„è„šæœ¬æ—¶,å¯èƒ½åœ¨ä¸€ä¸ªåœ°æ–¹éœ€è¦ä¿®æ”¹ IFS çš„å€¼,ç„¶åå†å°†å…¶æ¢å¤åŸçŠ¶,è€Œè„šæœ¬çš„å…¶ä»–åœ°æ–¹åˆ™ç»§ç»­æ²¿ç”¨ IFS çš„é»˜è®¤å€¼ã€‚ä¸€ç§å®‰å…¨çš„åšæ³•æ˜¯åœ¨ä¿®æ”¹ IFS ä¹‹å‰ä¿å­˜åŸæ¥çš„ IFS å€¼,ä¹‹åå†æ¢å¤å®ƒã€‚è¿™ç§æŠ€æœ¯å¯ä»¥åƒä¸‹é¢è¿™æ ·æ¥å®ç°:IFS.OLD=$IFS IFS=$&#39;\n&#39;&lt;åœ¨ä»£ç ä¸­ä½¿ç”¨æ–°çš„ IFS å€¼&gt;IFS=$IFS.OLDè¿™å°±ä¿è¯äº†åœ¨è„šæœ¬çš„åç»­æ“ä½œä¸­ä½¿ç”¨çš„æ˜¯ IFS çš„é»˜è®¤å€¼ã€‚

2.13.1.6 ä½¿ç”¨é€šé…ç¬¦è¯»å–ç›®å½•
ç”¨ for å‘½ä»¤æ¥è‡ªåŠ¨éå†ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚
åœ¨æ–‡ä»¶åæˆ–è·¯å¾„åä¸­ä½¿ç”¨ é€šé…ç¬¦,è¿™ä¼šå¼ºåˆ¶ shell ä½¿ç”¨æ–‡ä»¶åé€šé…ç¬¦åŒ¹é…(file globbing)ã€‚

for file in /path/*; do    commandsdone


åœ¨ Linux ä¸­,ç›®å½•åå’Œæ–‡ä»¶åä¸­åŒ…å«ç©ºæ ¼æ˜¯å®Œå…¨åˆæ³•çš„ã€‚è¦åº”å¯¹è¿™ç§æƒ…å†µ,åº”è¯¥å°†$file å˜ é‡æ”¾å…¥åŒå¼•å·å†…ã€‚å¦åˆ™,é‡åˆ°å«æœ‰ç©ºæ ¼çš„ç›®å½•åæˆ–æ–‡ä»¶åæ—¶ä¼šäº§ç”Ÿé”™è¯¯


å¯ä»¥åœ¨ for å‘½ä»¤ä¸­åˆ—å‡ºå¤šä¸ªç›®å½•é€šé…ç¬¦

for file in /path/* /path2/*; do    commandsdone

2.13.2 C è¯­è¨€é£æ ¼çš„ for å‘½ä»¤
bash ä¸­ä»¿ C è¯­è¨€çš„ for å¾ªç¯çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹:  for (( variable assignment ; condition ; iteration process )); do    commandsdone

2.13.3 while å‘½ä»¤2.13.3.1 while çš„åŸºæœ¬æ ¼å¼while [ condition ]; do    commandsdone

2.13.7 å¾ªç¯æ§åˆ¶2.13.7.1 break å‘½ä»¤for var in list; do    commands    if [ condition ]; then        break    fidone

2.13.7.2 continue å‘½ä»¤for var in list; do    commands    if [ condition ]; then        continue    fidone

2.13.8 å¤„ç†å¾ªç¯çš„è¾“å‡º
å¯¹å¾ªç¯çš„è¾“å‡ºä½¿ç”¨ç®¡é“æˆ–è¿›è¡Œé‡å®šå‘ã€‚é€šè¿‡åœ¨ done å‘½ä»¤ä¹‹å æ·»åŠ ä¸€ä¸ªå¤„ç†å‘½ä»¤æ¥å®ç°

for var in list; do    commandsdone &gt; output.txt


â€œ|â€ä»¥åŠâ€&lt;â€éƒ½å¯ä»¥åƒè¿™æ ·ç”¨

2.14 å¤„ç†ç”¨æˆ·è¾“å…¥2.14.1 ä¼ é€’å‚æ•°2.14.1.1 è¯»å–å‚æ•°
bash shell ä¼šå°†æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°éƒ½æŒ‡æ´¾ç»™ç§°ä½œä½ç½®å‚æ•°(positional parameter)çš„ç‰¹æ®Šå˜é‡ã€‚ è¿™ä¹ŸåŒ…æ‹¬ shell è„šæœ¬åç§°ã€‚
ä½ç½®å˜é‡çš„åç§°éƒ½æ˜¯æ ‡å‡†æ•°å­—:$0 å¯¹åº”è„šæœ¬å,$1 å¯¹åº”ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°,$2 å¯¹åº”ç¬¬äºŒä¸ªå‘½ä»¤è¡Œå‚æ•°,ä»¥æ­¤ç±»æ¨ã€‚

2.14.1.2 è¯»å–è„šæœ¬å
basename å‘½ä»¤å¯ä»¥è¿”å›ä¸åŒ…å«è·¯å¾„çš„è„šæœ¬å

2.14.2 ç‰¹æ®Šå‚æ•°å˜é‡2.14.2.1 å‚æ•°ç»Ÿè®¡
$#å«æœ‰è„šæœ¬è¿è¡Œæ—¶æºå¸¦çš„å‘½ä»¤è¡Œå‚æ•°çš„ä¸ªæ•°ï¼Œä¸åŒ…å«è„šæœ¬åã€‚
$&#123;!#&#125; ä»£è¡¨äº†æœ€åä¸€ä¸ªä½ç½®å˜é‡

2.14.2.2 è·å–æ‰€æœ‰çš„æ•°æ®
$*å˜é‡å’Œ$@å˜é‡å¯ä»¥è½»æ¾è®¿é—®æ‰€æœ‰å‚æ•°,å®ƒä»¬å„è‡ªåŒ…å«äº†æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°
$*å˜é‡ä¼šå°†æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°è§†ä¸ºä¸€ä¸ªå•è¯ã€‚è¿™ä¸ªå•è¯å«æœ‰å‘½ä»¤è¡Œä¸­å‡ºç°çš„æ¯ä¸€ä¸ªå‚æ•°ã€‚ åŸºæœ¬ä¸Š,$*å˜é‡ä¼šå°†è¿™äº›å‚æ•°è§†ä¸ºä¸€ä¸ªæ•´ä½“,è€Œä¸æ˜¯ä¸€ç³»åˆ—ä¸ªä½“ã€‚
$@å˜é‡ä¼šå°†æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°è§†ä¸ºåŒä¸€å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªç‹¬ç«‹çš„å•è¯,ä»¥ä¾¿ä½ èƒ½éå†å¹¶å¤„ç†å…¨éƒ¨å‚æ•°ã€‚è¿™é€šå¸¸ä½¿ç”¨ for å‘½ä»¤å®Œæˆã€‚

2.14.3 ç§»åŠ¨å‚æ•°
shift å‘½ä»¤ä¼šå°†æ‰€æœ‰çš„ä½ç½®å‚æ•°å‘å·¦ç§»åŠ¨ã€‚æ¯ä¸ªä½ç½®å‚æ•°çš„å˜é‡åéƒ½ä¼šå‡ 1ã€‚$1 ä¼šå˜æˆ$0,$2 ä¼šå˜æˆ$1,ä»¥æ­¤ç±»æ¨ã€‚è¢«åˆ é™¤çš„å‚æ•°ä¼šè¢«ä¸¢å¼ƒã€‚
shift å‘½ä»¤å¯ä»¥æ¥å—ä¸€ä¸ªå¯é€‰çš„å‚æ•°,ç”¨äºæŒ‡å®šè¦å·¦ç§»å‡ ä½ã€‚é»˜è®¤æƒ…å†µä¸‹,å®ƒä¼šå°†æ‰€æœ‰çš„ä½ç½®å‚æ•°å‘å·¦ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚

2.14.4.3 ä½¿ç”¨ getopts å‘½ä»¤
getopts optstring variable
getopts å‘½ä»¤è¦ç”¨åˆ°ä¸¤ä¸ªç¯å¢ƒå˜é‡ã€‚å¦‚æœé€‰é¡¹éœ€è¦åŠ å¸¦å‚æ•°å€¼,é‚£ä¹ˆ OPTARG ç¯å¢ƒå˜é‡ä¿å­˜çš„å°±æ˜¯è¿™ä¸ªå€¼ã€‚OPTIND ç¯å¢ƒå˜é‡ä¿å­˜ç€å‚æ•°åˆ—è¡¨ä¸­ getopts æ­£åœ¨å¤„ç†çš„å‚æ•°ä½ç½®ã€‚è¿™æ ·åœ¨å¤„ç†å®Œå½“å‰é€‰é¡¹ä¹‹åå°±èƒ½ç»§ç»­å¤„ç†å…¶ä»–å‘½ä»¤è¡Œå‚æ•°äº†ã€‚ä½¿ç”¨ä¸¾ä¾‹ï¼š

while getopts :ab: opt; do    case $opt in        a)            echo &quot;Option a&quot; ;;        b)            echo &quot;Option b with value $OPTARG&quot; ;;        \?)            echo &quot;Invalid option: -$opt&quot; ;;    esacdone


åœ¨è§£æå‘½ä»¤è¡Œé€‰é¡¹æ—¶,getopts å‘½ä»¤ä¼šç§» é™¤èµ·å§‹çš„è¿å­—ç¬¦,æ‰€ä»¥åœ¨ case è¯­å¥ä¸­ä¸ç”¨è¿å­—ç¬¦ã€‚
é€‰é¡¹å­—ç¬¦ä¸²ä¸­çš„å†’å·(:)è¡¨ç¤ºè¯¥é€‰é¡¹éœ€è¦ä¸€ä¸ªå‚æ•°å€¼ã€‚

2.14.6 è·å–ç”¨æˆ·è¾“å…¥2.14.6.1 åŸºæœ¬çš„è¯»å–
read å‘½ä»¤ä»æ ‡å‡†è¾“å…¥(é”®ç›˜)æˆ–å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸­æ¥å—è¾“å…¥ã€‚è·å–è¾“å…¥å,read å‘½ä»¤ä¼š å°†æ•°æ®å­˜å…¥å˜é‡ã€‚read variable
read å‘½ä»¤ä¹Ÿæä¾›äº†-p é€‰é¡¹,å…è®¸ç›´æ¥æŒ‡å®šæç¤ºç¬¦:read -p &quot;Enter your name: &quot; name

2.14.6.2 è¶…æ—¶
ç”¨-t é€‰é¡¹æ¥æŒ‡å®šä¸€ä¸ªè®¡æ—¶å™¨ã€‚-t é€‰é¡¹ä¼šæŒ‡å®š read å‘½ä»¤ç­‰å¾…è¾“å…¥çš„ ç§’æ•°ã€‚å¦‚æœè®¡æ—¶å™¨è¶…æ—¶,åˆ™ read å‘½ä»¤ä¼šè¿”å›é 0 é€€å‡ºçŠ¶æ€ç 
ç”¨-n é€‰é¡¹æ¥æŒ‡å®š read å‘½ä»¤è¯»å–çš„å­—ç¬¦æ•°ï¼Œreadä¼šåœ¨æ¥æ”¶åˆ°è®¾å®šä¸ªæ•°çš„å­—ç¬¦åè‡ªåŠ¨é€€å‡ºã€‚

2.14.6.3 æ— æ˜¾ç¤ºè¯»å–
-s é€‰é¡¹å¯ä»¥é¿å…åœ¨ read å‘½ä»¤ä¸­è¾“å…¥çš„æ•°æ®å‡ºç°åœ¨å±å¹•ä¸Š(å…¶å®æ•°æ®è¿˜æ˜¯ä¼šè¢«æ˜¾ç¤º,åªä¸ è¿‡ read å‘½ä»¤å°†æ–‡æœ¬é¢œè‰²è®¾æˆäº†è·ŸèƒŒæ™¯è‰²ä¸€æ ·)

2.14.6.4 ä»æ–‡ä»¶ä¸­è¯»å–
æ¯æ¬¡è°ƒç”¨ read å‘½ä»¤éƒ½ä¼šä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–ä¸€è¡Œæ–‡æœ¬ã€‚ å½“æ–‡ä»¶ä¸­æ²¡æœ‰å†…å®¹å¯è¯»æ—¶,read å‘½ä»¤ä¼šé€€å‡ºå¹¶è¿”å›é 0 é€€å‡ºçŠ¶æ€ç ã€‚

while read line; do    echo $linedone &lt; input.txt

2.15 å‘ˆç°æ•°æ®2.15.1 ç†è§£è¾“å…¥å’Œè¾“å‡º


æ–‡ä»¶æè¿°ç¬¦
ç¼©å†™
æè¿°



0
STDIN
æ ‡å‡†è¾“å…¥


1
STDOUT
æ ‡å‡†è¾“å‡º


2
STDERR
æ ‡å‡†é”™è¯¯



shell å¯¹äºé”™è¯¯æ¶ˆæ¯çš„å¤„ç†æ˜¯è·Ÿæ™®é€šè¾“å‡ºåˆ†å¼€çš„ã€‚åªä½¿ç”¨â€œ&gt;â€é‡å®šå‘åªèƒ½é‡å®šå‘æ ‡å‡†è¾“å‡º,è€Œä¸èƒ½é‡å®šå‘æ ‡å‡†é”™è¯¯ã€‚
åœ¨é»˜è®¤æƒ…å†µä¸‹,STDERR å’Œ STDOUT æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹â€”â€”â€”â€”æ˜¾ç¤ºå™¨ã€‚

2.15.1.2 é‡å®šå‘é”™è¯¯
åªé‡å®šå‘é”™è¯¯


command 2&gt; &amp;1 2ä¸â€œ&gt;â€å¿…é¡»ç´§æŒ¨ç€,å¦åˆ™æ— æ³•æ­£å¸¸å·¥ä½œ


é‡å®šå‘é”™è¯¯æ¶ˆæ¯å’Œæ­£å¸¸è¾“å‡º


å¦‚æœæƒ³é‡å®šå‘é”™è¯¯æ¶ˆæ¯å’Œæ­£å¸¸è¾“å‡º,åˆ™å¿…é¡»ä½¿ç”¨ä¸¤ä¸ªé‡å®šå‘ç¬¦å·ã€‚ä½ éœ€è¦åœ¨é‡å®šå‘ç¬¦å·ä¹‹å‰ æ”¾ä¸Šéœ€è¦é‡å®šå‘çš„æ–‡ä»¶æè¿°ç¬¦,ç„¶åè®©å®ƒä»¬æŒ‡å‘ç”¨äºä¿å­˜æ•°æ®çš„è¾“å‡ºæ–‡ä»¶
å°† STDERR å’Œ STDOUT çš„è¾“å‡ºé‡å®šå‘åˆ°åŒä¸€ä¸ªæ–‡ä»¶ï¼š&amp;&gt;

2.15.2 åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡º
æœ‰æ„åœ¨è„šæœ¬ä¸­ç”Ÿæˆé”™è¯¯æ¶ˆæ¯,å¯ä»¥å°†å•ç‹¬çš„ä¸€è¡Œè¾“å‡ºé‡å®šå‘åˆ° STDERR: &gt;&amp;2 
åœ¨é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦æ—¶,å¿…é¡»åœ¨æ–‡ä»¶ æè¿°ç¬¦ç´¢å¼•å€¼ä¹‹å‰åŠ ä¸€ä¸ª&amp;
å¯ä»¥ç†è§£ä¸ºï¼š0ã€1ã€2ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œ&amp;1ã€&amp;2ã€&amp;3ä¸ºæ–‡ä»¶æè¿°ç¬¦æ‰€æŒ‡ä»£çš„å…·ä½“çš„æ–‡ä»¶&#x2F;è®¾å¤‡åã€‚

2.15.2.2 æ°¸ä¹…é‡å®šå‘
exec å‘½ä»¤ä¼šå‘Šè¯‰ shell åœ¨è„šæœ¬æ‰§è¡ŒæœŸé—´é‡å®šå‘æŸä¸ªç‰¹å®šæ–‡ä»¶æè¿°ç¬¦: exec 1&gt; output.txtã€‚è¿˜å¯ä»¥ç”¨æ¥åˆ›å»ºæ–°çš„æ–‡ä»¶æè¿°ç¬¦ã€‚exec 3&gt; testfile

2.15.3 åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å…¥
exec å‘½ä»¤å…è®¸å°† STDIN é‡å®šå‘ä¸ºæ–‡ä»¶: exec 0&lt; input.txt
åªè¦è„šæœ¬éœ€è¦è¾“å…¥, è¿™ä¸ªé‡å®šå‘å°±ä¼šèµ·ä½œç”¨ï¼š

exec 0&lt; testfile count=1  while read line; do     echo &quot;Line #$count: $line&quot;     count=$[ $count + 1 ] done

2.15.4 åˆ›å»ºè‡ªå·±çš„é‡å®šå‘2.15.4.2 é‡å®šå‘æ–‡ä»¶æè¿°ç¬¦
æ¢å¤å·²é‡å®šå‘çš„æ–‡ä»¶æè¿°ç¬¦ï¼š

exec 3&gt;&amp;1 exec 1&gt;test14out...exec 1&gt;&amp;3# 1æ¢å¤


2.15.4.5 å…³é—­æ–‡ä»¶æè¿°ç¬¦
è¦å…³é—­æ–‡ä»¶æè¿°ç¬¦,åªéœ€å°†å…¶é‡å®šå‘åˆ°ç‰¹æ®Šç¬¦å·&amp;-å³å¯: exec 3&gt;&amp;-

2.15.5 åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦
lsof å‘½ä»¤å¯ä»¥åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ã€‚
æœ€å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬-p å’Œ-d,å‰è€…å…è®¸æŒ‡å®šè¿›ç¨‹ ID(PID),åè€…å…è®¸æŒ‡å®šè¦æ˜¾ç¤ºçš„æ–‡ä»¶æè¿°ç¬¦ç¼–å·(å¤šä¸ªç¼–å·ä¹‹é—´ä»¥é€—å·åˆ†éš”)ã€‚
$$: å½“å‰è¿›ç¨‹çš„ PID
lsofçš„é»˜è®¤è¾“å‡ºï¼š




åˆ—
æè¿°



COMMAND
è¿›ç¨‹å¯¹åº”çš„å‘½ä»¤åçš„å‰ 9 ä¸ªå­—ç¬¦


PID
è¿›ç¨‹çš„ PID


USER
è¿›ç¨‹å±ä¸»çš„ç™»å½•å


FD
æ–‡ä»¶æè¿°ç¬¦ç¼–å·ä»¥åŠè®¿é—®ç±»å‹(r ä»£è¡¨è¯»,w ä»£è¡¨å†™,u ä»£è¡¨è¯»&#x2F;å†™)


TYPE
æ–‡ä»¶çš„ç±»å‹(CHR ä»£è¡¨å­—ç¬¦å‹,BLK ä»£è¡¨å—å‹,DIR ä»£è¡¨ç›®å½•,REG ä»£è¡¨å¸¸è§„æ–‡ä»¶)


DEVICE
è®¾å¤‡å·(ä¸»è®¾å¤‡å·å’Œä»è®¾å¤‡å·)


SIZE
å¦‚æœæœ‰çš„è¯,è¡¨ç¤ºæ–‡ä»¶çš„å¤§å°


NODE
æœ¬åœ°æ–‡ä»¶çš„èŠ‚ç‚¹å·


NAME
æ–‡ä»¶å


2.15.6 æŠ‘åˆ¶å‘½ä»¤è¾“å‡º
é‡å®šå‘åˆ° &#x2F;dev&#x2F;null å¯ä»¥æŠ‘åˆ¶å‘½ä»¤çš„è¾“å‡º
ä¹Ÿå¯ä»¥åœ¨è¾“å…¥é‡å®šå‘ä¸­å°†&#x2F;dev&#x2F;null ä½œä¸ºè¾“å…¥æ–‡ä»¶ï¼Œå¿«é€Ÿæ¸…é™¤ç°æœ‰æ–‡ä»¶ä¸­çš„æ•°æ®ï¼šcat /dev/null &gt; testfile

2.15.7 ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶2.15.7.1 åˆ›å»ºæœ¬åœ°ä¸´æ—¶æ–‡ä»¶
mktemp ä¼šåœ¨æœ¬åœ°ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚åœ¨ä½¿ç”¨ mktemp å‘½ä»¤æ—¶,åªéœ€æŒ‡å®š ä¸€ä¸ªæ–‡ä»¶åæ¨¡æ¿å³å¯ã€‚æ¨¡æ¿å¯ä»¥åŒ…å«ä»»æ„æ–‡æœ¬å­—ç¬¦,åŒæ—¶åœ¨æ–‡ä»¶åæœ«å°¾è¦åŠ ä¸Š 6 ä¸ª Xã€‚
mktemp å‘½ä»¤ä¼šä»»æ„åœ°å°† 6 ä¸ª X æ›¿æ¢ä¸ºåŒç­‰æ•°é‡çš„å­—ç¬¦,ä»¥ä¿è¯æ–‡ä»¶ååœ¨ç›®å½•ä¸­æ˜¯å”¯ä¸€çš„ã€‚ ä½ å¯ä»¥åˆ›å»ºå¤šä¸ªä¸´æ—¶æ–‡ä»¶,å¹¶ç¡®ä¿æ¯ä¸ªæ–‡ä»¶åéƒ½ä¸é‡å¤
mktemp å‘½ä»¤çš„è¾“å‡ºæ­£æ˜¯å®ƒæ‰€åˆ›å»ºçš„æ–‡ä»¶åã€‚

2.15.7.2 åœ¨&#x2F;tmp ç›®å½•ä¸­åˆ›å»ºä¸´æ—¶æ–‡ä»¶
-t é€‰é¡¹ä¼šå¼ºåˆ¶ mktemp å‘½ä»¤åœ¨ç³»ç»Ÿçš„ä¸´æ—¶ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ã€‚åœ¨ä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ—¶,mktemp å‘½ä»¤ä¼šè¿”å›æ‰€åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å,è€Œä¸åªæ˜¯æ–‡ä»¶å

2.15.7.3 åˆ›å»ºä¸´æ—¶ç›®å½•
-d é€‰é¡¹ä¼šå‘Šè¯‰ mktemp å‘½ä»¤åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•ã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨è¯¥ç›®å½•,æ¯”å¦‚åœ¨å…¶ä¸­ åˆ›å»ºå…¶ä»–çš„ä¸´æ—¶æ–‡ä»¶

2.15.8 è®°å½•æ¶ˆæ¯
tee å‘½ä»¤å°±åƒæ˜¯è¿æ¥ç®¡é“çš„ T å‹æ¥å¤´,å®ƒèƒ½å°†æ¥è‡ª STDIN çš„æ•°æ®åŒæ—¶é€å¾€ä¸¤å¤„ã€‚ä¸€å¤„æ˜¯ STDOUT,å¦ä¸€å¤„æ˜¯ tee å‘½ä»¤è¡Œæ‰€æŒ‡å®šçš„æ–‡ä»¶åï¼ˆè¿™ä¸ªæ–‡ä»¶ä¸éœ€è¦å…ˆå‰å­˜åœ¨ï¼‰
é…åˆç®¡é“å‘½ä»¤æ¥é‡å®šå‘å‘½ä»¤è¾“å‡º: command | tee testfile
tee å‘½ä»¤çš„ -a é€‰é¡¹ä¼šå°†è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶ä¸­,è€Œä¸æ˜¯è¦†ç›–æ–‡ä»¶å†…å®¹

2.16 è„šæœ¬æ§åˆ¶2.16.1 å¤„ç†ä¿¡å·2.16.1.1 é‡æ¸© Linux ä¿¡å·


ä¿¡å·å€¼
ä¿¡å·å
æè¿°



1
SIGHUP
æŒ‚èµ·(hang up)è¿›ç¨‹


2
SIGINT
ä¸­æ–­(interrupt)è¿›ç¨‹


3
SIGQUIT
åœæ­¢(stop)è¿›ç¨‹


9
SIGKILL
æ— æ¡ä»¶ç»ˆæ­¢(terminate)è¿›ç¨‹


15
SIGTERM
å°½å¯èƒ½ç»ˆæ­¢è¿›ç¨‹


18
SIGCONT
ç»§ç»­è¿è¡Œåœæ­¢çš„è¿›ç¨‹


19
SIGSTOP
æ— æ¡ä»¶åœæ­¢,ä½†ä¸ç»ˆæ­¢è¿›ç¨‹


20
SIGTSTP
åœæ­¢æˆ–æš‚åœ(pause),ä½†ä¸ç»ˆæ­¢è¿›ç¨‹


2.16.2 ä»¥åå°æ¨¡å¼è¿è¡Œè„šæœ¬2.16.2.1 åå°è¿è¡Œè„šæœ¬
ä»¥åå°æ¨¡å¼è¿è¡Œ shell è„šæœ¬éå¸¸ç®€å•,åªéœ€åœ¨è„šæœ¬ååé¢åŠ ä¸Š&amp;å³å¯

2.16.3 åœ¨éæ§åˆ¶å°ä¸‹è¿è¡Œè„šæœ¬
æœ‰æ—¶å€™,å³ä¾¿é€€å‡ºäº†ç»ˆç«¯ä¼šè¯,ä½ ä¹Ÿæƒ³åœ¨ç»ˆç«¯ä¼šè¯ä¸­å¯åŠ¨ shell è„šæœ¬,è®©è„šæœ¬ä¸€ç›´ä»¥åå°æ¨¡ å¼è¿è¡Œåˆ°ç»“æŸã€‚è¿™å¯ä»¥ç”¨ nohup å‘½ä»¤æ¥å®ç°
nohup å‘½ä»¤èƒ½é˜»æ–­å‘ç»™ç‰¹å®šè¿›ç¨‹çš„ SIGHUP ä¿¡å·ã€‚å½“é€€å‡ºç»ˆç«¯ä¼šè¯æ—¶,è¿™å¯ä»¥é¿å…è¿›ç¨‹é€€å‡º
nohup command

2.16.4 ä½œä¸šæ§åˆ¶2.16.4.1 æŸ¥çœ‹ä½œä¸š
jobs æ˜¯ä½œä¸šæ§åˆ¶ä¸­çš„å…³é”®å‘½ä»¤,è¯¥å‘½ä»¤å…è®¸ç”¨æˆ·æŸ¥çœ‹ shell å½“å‰æ­£åœ¨å¤„ç†çš„ä½œä¸š
å¯ä»¥ä½¿ç”¨ jobs å‘½ä»¤çš„-l é€‰é¡¹(å°å†™å­—æ¯ l)æŸ¥çœ‹ä½œä¸šçš„ PID

2.16.4.2 é‡å¯å·²åœæ­¢çš„ä½œä¸š
æš‚åœï¼š ^Z
è¦ä»¥åå°æ¨¡å¼é‡å¯ä½œä¸š,å¯ä»¥ä½¿ç”¨ bg å‘½ä»¤
å¦‚æœå­˜åœ¨å¤šä¸ªä½œä¸š,åˆ™éœ€è¦åœ¨ bg å‘½ä»¤ååŠ ä¸Šä½œä¸šå·

2.16.6 å®šæ—¶è¿è¡Œä½œä¸š2.16.6.1 ä½¿ç”¨ at å‘½ä»¤è°ƒåº¦ä½œä¸š
at [-f filename] timeã€‚é€‚ç”¨äºè®¡åˆ’è¿è¡Œå°‘æ•°å‡ æ¬¡ã€‚

2.16.6.2 è°ƒåº¦éœ€è¦å®šæœŸè¿è¡Œçš„è„šæœ¬
Linux ç³»ç»Ÿä½¿ç”¨ cron ç¨‹åºè°ƒåº¦éœ€è¦å®šæœŸæ‰§è¡Œçš„ä½œä¸šã€‚cron åœ¨åå°è¿è¡Œ,å¹¶ä¼šæ£€æŸ¥ä¸€ä¸ªç‰¹æ®Šçš„ è¡¨(cron æ—¶é—´è¡¨),ä»ä¸­è·çŸ¥å·²å®‰æ’æ‰§è¡Œçš„ä½œä¸š
cron æ—¶é—´è¡¨é€šè¿‡ä¸€ç§ç‰¹åˆ«çš„æ ¼å¼æŒ‡å®šä½œä¸šä½•æ—¶è¿è¡Œ,å…¶æ ¼å¼å¦‚ä¸‹:minutepasthour hourofday dayofmonth month dayofweek command
cron æ—¶é—´è¡¨å…è®¸ä½¿ç”¨ç‰¹å®šå€¼ã€å–å€¼èŒƒå›´(æ¯”å¦‚ 1-5)æˆ–è€…é€šé…ç¬¦(*)æ¥æŒ‡å®šå„ä¸ªå­—æ®µã€‚
å¦‚æœæƒ³åœ¨æ¯å¤©çš„ 10:15 è¿è¡Œä¸€ä¸ªå‘½ä»¤,å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ cron æ—¶é—´è¡¨å­—æ®µ: 15 10 * * * command
åˆ—å‡ºå·²æœ‰çš„ cron æ—¶é—´è¡¨ï¼šcrontab -l
å‘cron æ—¶é—´è¡¨æ·»åŠ å­—æ®µï¼š crontab -e, ç„¶åæ·»åŠ 15 10 * * * command
ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨å, cron ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´è¿è¡Œå‘½ä»¤

]]></content>
      <categories>
        <category>Linux Command Line and Shell Scripting Bible</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>reading note</tag>
        <tag>linux</tag>
        <tag>Linux Command Line and Shell Scripting Bible</tag>
      </tags>
  </entry>
  <entry>
    <title>250811-250817 å‘¨è®° linuxå‘½ä»¤ä¸shellç¼–ç¨‹å­¦ä¹ (1)</title>
    <url>/2025/08/18/250811-250817-%E5%91%A8%E8%AE%B0-linux%E5%91%BD%E4%BB%A4%E4%B8%8Eshell%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-1/</url>
    <content><![CDATA[æœ¬å‘¨å­¦ä¹ äº†Linux Command Line and Shell Scripting Bibleè¿™æœ¬ä¹¦çš„ç¬¬ä¸€éƒ¨åˆ†åˆ°ç¬¬äºŒéƒ¨åˆ†ã€‚è¿™é‡Œå¯¹ä¸€äº›æˆ‘è‡ªå·±ä¸ç†Ÿæ‚‰çš„ã€æˆ‘è‡ªå·±è§‰å¾—æ¯”è¾ƒé‡è¦çš„å†…å®¹è¿›è¡Œè®°å½•æ‘˜è¦ã€‚
1. ç¬¬ä¸€éƒ¨åˆ† linuxå‘½ä»¤è¡Œ1.3 bash shellåŸºç¡€å‘½ä»¤1.3.5 åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•1.3.5.3 è¿‡æ»¤è¾“å‡ºåˆ—è¡¨
æ¨¡å¼åŒ¹é…: é—®å·(?)ä»£è¡¨ä»»æ„å•ä¸ªå­—ç¬¦; æ˜Ÿå·(*)ä»£è¡¨é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚
æ–¹æ‹¬å·ä»£è¡¨å•ä¸ªå­—ç¬¦ä½ç½®å¹¶ç»™å‡ºäº†è¯¥ä½ç½®ä¸Šçš„å¤šä¸ªå¯èƒ½çš„é€‰æ‹©ã€‚ä½ å¯ä»¥å°†å¯èƒ½çš„å­—ç¬¦é€ä¸€åˆ—å‡º,ä¹Ÿå¯ä»¥æŒ‡å®šå­—ç¬¦èŒƒå›´,æ¯”å¦‚å­—æ¯èŒƒå›´[aâ€“i]ã€‚
è¿˜å¯ä»¥ä½¿ç”¨æƒŠå¹å·(!)å°†ä¸éœ€è¦çš„å†…å®¹æ’é™¤åœ¨å¤–ã€‚

1.3.6 å¤„ç†æ–‡ä»¶1.3.6.2 å¤åˆ¶æ–‡ä»¶
cp å‘½ä»¤å¯ä»¥å®Œæˆæ–‡ä»¶å’Œç›®å½•ä»æ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªä½ç½®å¤åˆ¶åˆ°å¦ä¸€ä¸ªä½ç½®çš„æ“ä½œã€‚ 
cp å‘½ä»¤æœ€åŸºæœ¬çš„ç”¨æ³•éœ€è¦ä¸¤ä¸ªå‚æ•°,å³æºå¯¹è±¡å’Œç›®æ ‡å¯¹è±¡:cp source destinationã€‚ å½“å‚æ•° source å’Œ destination éƒ½æ˜¯æ–‡ä»¶åæ—¶,cp å‘½ä»¤ä¼šå°†æºæ–‡ä»¶å¤åˆ¶æˆä¸€ä¸ªæ–°çš„ç›®æ ‡æ–‡ä»¶,å¹¶ä»¥ destination å‘½åã€‚æ–°æ–‡ä»¶åœ¨å½¢å¼ä¸Šå°±åƒå…¨æ–°çš„æ–‡ä»¶ä¸€æ ·,æœ‰æ–°çš„ä¿®æ”¹æ—¶é—´ã€‚
å¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨,åˆ™ cp å‘½ä»¤ å¯èƒ½å¹¶ä¸ä¼šæé†’ä½ è¿™ä¸€ç‚¹ã€‚æœ€å¥½åŠ ä¸Š-i é€‰é¡¹,å¼ºåˆ¶ shell è¯¢é—®æ˜¯å¦éœ€è¦è¦†ç›–å·²æœ‰æ–‡ä»¶ã€‚
cp å‘½ä»¤çš„-R é€‰é¡¹å¨åŠ›å¼ºå¤§ã€‚å¯ä»¥ç”¨å®ƒåœ¨å•ä¸ªå‘½ä»¤ä¸­é€’å½’åœ°å¤åˆ¶æ•´ä¸ªç›®å½•çš„å†…å®¹ã€‚
åœ¨æ‰§è¡Œ cp â€“R å‘½ä»¤ä¹‹å‰,ç›®å½• NewDocuments å¹¶ä¸å­˜åœ¨ã€‚å®ƒæ˜¯éšç€ cp â€“R å‘½ä»¤è¢«åˆ›å»ºçš„, æ•´ä¸ª Documents ç›®å½•ä¸­çš„å†…å®¹éƒ½è¢«å¤åˆ¶åˆ°å…¶ä¸­ã€‚æ³¨æ„,æ–°çš„ NewDocuments ç›®å½•ä¸­æ‰€æœ‰çš„æ–‡ä»¶éƒ½ æœ‰å¯¹åº”çš„æ–°æ—¥æœŸã€‚NewDocuments ç›®å½•ç°åœ¨å·²ç»æˆäº† Documents ç›®å½•çš„å®Œæ•´å‰¯æœ¬ã€‚

1.3.6.3 ä½¿ç”¨å‘½ä»¤è¡Œè¡¥å…¨
åˆ¶è¡¨é”®è¡¥å…¨å…è®¸ä½ åœ¨è¾“å…¥æ–‡ä»¶å æˆ–ç›®å½•åçš„æ—¶å€™,æŒ‰ä¸€ä¸‹åˆ¶è¡¨é”®,è®© shell å¸®ä½ å°†å†…å®¹è¡¥å……å®Œæ•´ã€‚
ä½¿ç”¨åˆ¶è¡¨é”®è¡¥å…¨çš„æŠ€å·§åœ¨äºè¦ç»™ shell æä¾›è¶³å¤Ÿçš„æ–‡ä»¶åä¿¡æ¯,ä½¿å…¶èƒ½å¤Ÿå°†æ‰€éœ€æ–‡ä»¶åä¸å…¶ ä»–æ–‡ä»¶ååŒºåˆ†å¼€ã€‚

1.3.6.4 é“¾æ¥æ–‡ä»¶
é“¾æ¥æ˜¯ç›®å½•ä¸­æŒ‡ å‘æ–‡ä»¶çœŸå®ä½ç½®çš„å ä½ç¬¦ã€‚åœ¨ Linux ä¸­æœ‰ä¸¤ç§ç±»å‹çš„æ–‡ä»¶é“¾æ¥: ç¬¦å·é“¾æ¥ï¼Œç¡¬é“¾æ¥ã€‚
ç¬¦å·é“¾æ¥(ä¹Ÿç§°ä¸ºè½¯é“¾æ¥)æ˜¯ä¸€ä¸ªå®å®åœ¨åœ¨çš„æ–‡ä»¶,è¯¥æ–‡ä»¶æŒ‡å‘å­˜æ”¾åœ¨è™šæ‹Ÿç›®å½•ç»“æ„ä¸­æŸä¸ªåœ°æ–¹çš„å¦ä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸¤ä¸ªä»¥ç¬¦å·æ–¹å¼é“¾æ¥åœ¨ä¸€èµ·çš„æ–‡ä»¶å½¼æ­¤çš„å†…å®¹å¹¶ä¸ç›¸åŒã€‚å¯ä»¥ç±»æ¯”ä¸ºwindowsç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ã€‚
è¦ä¸ºä¸€ä¸ªæ–‡ä»¶åˆ›å»ºç¬¦å·é“¾æ¥,åŸå§‹æ–‡ä»¶å¿…é¡»äº‹å…ˆå­˜åœ¨ã€‚ä½¿ç”¨ ln -s å‘½ä»¤åˆ›å»ºç¬¦å·é“¾æ¥ã€‚ln -s test_file slink_test_file
ç¡¬é“¾æ¥åˆ›å»ºçš„æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæ–‡ä»¶,å…¶ä¸­åŒ…å«äº†åŸå§‹æ–‡ä»¶çš„ä¿¡æ¯ä»¥åŠä½ç½®ã€‚ä½†æ˜¯ä¸¤è€…å°±æ ¹æœ¬è€Œè¨€æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ã€‚å¯ä»¥ç†è§£ä¸ºâ€œåŒä¸€æ–‡ä»¶å‡ºç°åœ¨ä¸åŒçš„ç›®å½•ä¸‹â€ã€‚è¦æƒ³åˆ›å»ºç¡¬é“¾æ¥,åŸå§‹æ–‡ä»¶ä¹Ÿå¿…é¡»äº‹å…ˆå­˜åœ¨,åªä¸è¿‡è¿™æ¬¡ä½¿ç”¨ ln å‘½ä»¤æ—¶ä¸éœ€è¦å†åŠ å…¥é¢å¤–çš„é€‰é¡¹äº†:ln test_file hlink_test_file

1.3.6.5 æ–‡ä»¶é‡å‘½å
é‡å‘½åæ–‡ä»¶ç§°ä¸ºç§»åŠ¨ã€‚mv å‘½ä»¤å¯ä»¥å°†æ–‡ä»¶å’Œç›®å½•ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®æˆ–æ˜¯é‡æ–°å‘½åï¼šmv old new

1.3.6.6 åˆ é™¤æ–‡ä»¶
rmçš„-i é€‰é¡¹ä¼šè¯¢é—®ä½ æ˜¯å¦çœŸçš„è¦åˆ é™¤è¯¥æ–‡ä»¶ã€‚shell æ²¡æœ‰å›æ”¶ç«™æˆ–è€…åƒåœ¾ç®±è¿™æ ·çš„ä¸œè¥¿, æ–‡ä»¶ä¸€æ—¦è¢«åˆ é™¤,å°±å†ä¹Ÿæ‰¾ä¸å›æ¥äº†ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨ rm å‘½ä»¤æ—¶,è¦å…»æˆæ€»æ˜¯åŠ å…¥-i é€‰é¡¹çš„å¥½ä¹ æƒ¯ã€‚

1.3.7 ç®¡ç†ç›®å½•1.3.7.1 åˆ›å»ºç›®å½•
å¯ä»¥æ ¹æ®éœ€è¦â€œæ‰¹é‡â€åœ°åˆ›å»ºç›®å½•å’Œå­ç›®å½•ã€‚ä¸ºæ­¤,è¦ä½¿ç”¨ mkdir å‘½ä»¤çš„-p é€‰é¡¹, mkdir å‘½ä»¤çš„-p é€‰é¡¹å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºç¼ºå¤±çš„çˆ¶ç›®å½•ã€‚

1.3.8 æŸ¥çœ‹æ–‡ä»¶å†…å®¹1.3.8.1 æŸ¥çœ‹æ–‡ä»¶ç±»å‹
file å‘½ä»¤æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å°å·¥å…·,èƒ½å¤Ÿæ¢æµ‹æ–‡ä»¶çš„å†…éƒ¨å¹¶åˆ¤æ–­æ–‡ä»¶ç±»å‹

3.8.2 æŸ¥çœ‹æ•´ä¸ªæ–‡ä»¶
cat


cat å‘½ä»¤æ˜¯æ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶ä¸­æ‰€æœ‰æ•°æ®çš„å¾—åŠ›å·¥å…·ã€‚
-n é€‰é¡¹ä¼šç»™æ‰€æœ‰çš„è¡ŒåŠ ä¸Šè¡Œå·
å¦‚æœåªæƒ³ç»™æœ‰æ–‡æœ¬çš„è¡ŒåŠ ä¸Šè¡Œå·,å¯ä»¥ç”¨-b é€‰é¡¹


more

less



lesså®ä¸º more å‘½ä»¤çš„å‡çº§ç‰ˆæœ¬
less å‘½ä»¤æä¾›äº†å¤šä¸ªéå¸¸å®ç”¨çš„ç‰¹æ€§,èƒ½ å¤Ÿå®ç°åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­å‰åç¿»åŠ¨,è¿˜æœ‰ä¸€äº›é«˜çº§æœç´¢åŠŸèƒ½ã€‚
less å‘½ä»¤è¿˜å¯ä»¥åœ¨å®Œæˆæ•´ä¸ªæ–‡ä»¶çš„è¯»å–ä¹‹å‰æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ã€‚

1.3.8.3 æŸ¥çœ‹éƒ¨åˆ†æ–‡ä»¶
tail å‘½ä»¤


tail å‘½ä»¤ä¼šæ˜¾ç¤ºæ–‡ä»¶æœ€åå‡ è¡Œçš„å†…å®¹(æ–‡ä»¶çš„â€œå°¾éƒ¨â€)ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹,å®ƒä¼šæ˜¾ç¤ºæ–‡ä»¶çš„ æœ«å°¾ 10 è¡Œã€‚
å¯ä»¥å‘ tail å‘½ä»¤ä¸­åŠ å…¥-n é€‰é¡¹æ¥ä¿®æ”¹æ‰€æ˜¾ç¤ºçš„è¡Œæ•°ï¼Œå¦‚é€šè¿‡åŠ å…¥-n 2, ä½¿å¾— tail å‘½ä»¤åªæ˜¾ç¤ºæ–‡ä»¶çš„æœ€åä¸¤è¡Œ
tail å‘½ä»¤æœ‰ä¸€ä¸ªéå¸¸é…·çš„ç‰¹æ€§:-f é€‰é¡¹,è¯¥é€‰é¡¹å…è®¸ä½ åœ¨å…¶ä»–è¿›ç¨‹ä½¿ç”¨æ­¤æ–‡ä»¶æ—¶æŸ¥çœ‹æ–‡ä»¶ çš„å†…å®¹ã€‚tail å‘½ä»¤ä¼šä¿æŒæ´»åŠ¨çŠ¶æ€å¹¶æŒç»­åœ°æ˜¾ç¤ºæ·»åŠ åˆ°æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚è¿™æ˜¯å®æ—¶ç›‘æµ‹ç³»ç»Ÿæ—¥å¿— çš„ç»ä½³æ–¹å¼ã€‚


head å‘½ä»¤


head å‘½ä»¤ä¼šæ˜¾ç¤ºæ–‡ä»¶å¼€å¤´è‹¥å¹²è¡Œ(æ–‡ä»¶çš„â€œå¤´éƒ¨â€)ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹,å®ƒä¼šæ˜¾ç¤ºæ–‡ä»¶å‰ 10 è¡Œçš„æ–‡æœ¬
head å‘½ä»¤ä¹Ÿæ”¯æŒ-n é€‰é¡¹
è¿™ä¸¤ä¸ªå‘½ä»¤ä¹Ÿå… è®¸ç®€å•åœ°åœ¨è¿å­—ç¬¦åé¢ç›´æ¥è¾“å…¥æƒ³è¦æ˜¾ç¤ºçš„è¡Œæ•°

1.4 æ›´å¤šçš„ bash shell å‘½ä»¤1.4.1 ç›‘æµ‹ç¨‹åº1.4.1.1 æ¢æŸ¥è¿›ç¨‹
ps å‘½ä»¤é»˜è®¤åªæ˜¾ç¤ºè¿è¡Œåœ¨å½“å‰ç»ˆç«¯ä¸­å±äºå½“å‰ç”¨æˆ·çš„é‚£äº›è¿›ç¨‹ã€‚
ps å‘½ä»¤çš„åŸºæœ¬è¾“å‡ºæ˜¾ç¤ºäº†ç¨‹åºçš„è¿›ç¨‹ ID(process ID,PID)ã€è¿›ç¨‹è¿è¡Œåœ¨å“ªä¸ªç»ˆç«¯(TTY) åŠå…¶å ç”¨çš„ CPU æ—¶é—´ã€‚
å¦‚æœéœ€è¦æŸ¥çœ‹ç³»ç»Ÿä¸­è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹,å¯ä»¥ä½¿ç”¨-ef é€‰é¡¹ç»„åˆã€‚-e é€‰é¡¹æŒ‡å®šæ˜¾ç¤ºç³»ç»Ÿä¸­è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹;-f é€‰é¡¹åˆ™æ‰©å……è¾“å‡ºå†…å®¹ä»¥æ˜¾ç¤ºä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯åˆ—ï¼š




åˆ—å
è¯´æ˜



UID
å¯åŠ¨è¯¥è¿›ç¨‹çš„ç”¨æˆ·


PID
è¿›ç¨‹ ID


PPID
çˆ¶è¿›ç¨‹çš„ PID(å¦‚æœè¯¥è¿›ç¨‹æ˜¯ç”±å¦ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨çš„)


C
è¿›ç¨‹ç”Ÿå‘½æœŸä¸­çš„ CPU åˆ©ç”¨ç‡


STIME
è¿›ç¨‹å¯åŠ¨æ—¶çš„ç³»ç»Ÿæ—¶é—´


TTY
è¿›ç¨‹æ˜¯ä»å“ªä¸ªç»ˆç«¯è®¾å¤‡å¯åŠ¨çš„


TIME
è¿è¡Œè¿›ç¨‹çš„ç´¯è®¡ CPU æ—¶é—´


CMD
å¯åŠ¨çš„ç¨‹åºåç§°



å¦‚æœè¿˜æƒ³è·å¾—æ›´å¤šçš„ä¿¡æ¯, å¯ä»¥ä½¿ç”¨-l é€‰é¡¹,äº§ç”Ÿé•¿æ ¼å¼è¾“å‡ºã€‚å¤šå‡ºçš„é‚£å‡ åˆ—ï¼š




åˆ—å
è¯´æ˜



F
å†…æ ¸åˆ†é…ç»™è¿›ç¨‹çš„ç³»ç»Ÿæ ‡å¿—


S
è¿›ç¨‹çš„çŠ¶æ€:O - æ­£åœ¨è¿è¡ŒS - ä¼‘çœ R - å¯è¿è¡Œ,æ­£ç­‰å¾…è¿è¡ŒZ - åƒµåŒ–,å·²ç»ˆæ­¢ä½†æ‰¾ä¸åˆ°å…¶çˆ¶è¿›ç¨‹T - åœæ­¢


PRI
è¿›ç¨‹çš„ä¼˜å…ˆçº§(æ•°å­—è¶Šå¤§,ä¼˜å…ˆçº§è¶Šä½)


NI
è°¦è®©åº¦(nice),ç”¨äºå†³å®šä¼˜å…ˆçº§


ADDR
è¿›ç¨‹çš„å†…å­˜åœ°å€


SZ
è¿›ç¨‹è¢«æ¢å‡ºæ—¶æ‰€éœ€äº¤æ¢ç©ºé—´çš„å¤§è‡´å¤§å°


WCHAN
è¿›ç¨‹ä¼‘çœ çš„å†…æ ¸å‡½æ•°åœ°å€



â€“forest é€‰é¡¹ç€å®è®¨äººå–œæ¬¢ã€‚è¯¥é€‰é¡¹èƒ½å¤Ÿä½¿ç”¨ ASCII å­—ç¬¦æ¥ç»˜åˆ¶å¯çˆ±çš„å›¾è¡¨ä»¥æ˜¾ç¤ºè¿›ç¨‹çš„å±‚çº§ä¿¡æ¯

1.4.1.2 å®æ—¶ç›‘æµ‹è¿›ç¨‹
top å‘½ä»¤ä¹Ÿå¯ä»¥æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯,ä½†é‡‡ç”¨çš„æ˜¯å®æ—¶æ–¹å¼
åœ¨é»˜è®¤æƒ…å†µä¸‹,top å‘½ä»¤åœ¨å¯åŠ¨æ—¶ä¼šæŒ‰ç…§%CPU å€¼æ¥å¯¹è¿›ç¨‹è¿›è¡Œæ’åº

1.4.1.3 ç»“æŸè¿›ç¨‹
åœ¨ Linux ä¸­,è¿›ç¨‹ä¹‹é—´é€šè¿‡ä¿¡å·æ¥é€šä¿¡ã€‚




ä¿¡å·
åç§°
æè¿°



1
HUP
æŒ‚èµ·


2
INT
ä¸­æ–­


3
QUIT
ç»“æŸè¿è¡Œ


9
KILL
æ— æ¡ä»¶ç»ˆæ­¢


11
SEGV
æ®µé”™è¯¯


15
TERM
å°½å¯èƒ½ç»ˆæ­¢


17
STOP
æ— æ¡ä»¶åœæ­¢è¿è¡Œ,ä½†ä¸ç»ˆæ­¢


18
TSTP
åœæ­¢æˆ–æš‚åœ,ä½†ç»§ç»­åœ¨åå°è¿è¡Œ


19
CONT
åœ¨ STOP æˆ– TSTP ä¹‹åæ¢å¤æ‰§è¡Œ



åœ¨ Linux ä¸­æœ‰ä¸¤ä¸ªå‘½ä»¤å¯ä»¥å‘è¿è¡Œä¸­çš„è¿›ç¨‹å‘å‡ºè¿›ç¨‹ä¿¡å·:kill å’Œ pkillã€‚


kill


kill å‘½ä»¤å¯ä»¥é€šè¿‡ PID å‘è¿›ç¨‹å‘é€ä¿¡å·, é—æ†¾çš„æ˜¯,ä½ åªèƒ½ä½¿ç”¨è¿›ç¨‹çš„ PID è€Œä¸èƒ½ä½¿ç”¨å…¶å¯¹åº”çš„ç¨‹åºå
ä¸æœç®¡æ•™çš„è¿›ç¨‹é€šå¸¸ä¼šå¿½ç•¥è¿™ä¸ªè¯·æ±‚ã€‚å¦‚æœè¦å¼ºåˆ¶ç»ˆæ­¢, åˆ™-s é€‰é¡¹æ”¯æŒæŒ‡å®šå…¶ä»–ä¿¡å·(ç”¨ä¿¡å·åæˆ–ä¿¡å·å€¼)ã€‚kill -9 PID


pkill


pkill å‘½ä»¤å¯ä»¥ä½¿ç”¨ç¨‹åºåä»£æ›¿ PID æ¥ç»ˆæ­¢è¿›ç¨‹,é™¤æ­¤ä¹‹å¤–,pkill å‘½ä»¤ ä¹Ÿå…è®¸ä½¿ç”¨é€šé…ç¬¦

1.4.2 ç›‘æµ‹ç£ç›˜ç©ºé—´1.4.2.1 æŒ‚è½½å­˜å‚¨è®¾å¤‡
Linux æ–‡ä»¶ç³»ç»Ÿä¼šå°†æ‰€æœ‰çš„ç£ç›˜éƒ½å¹¶å…¥å•ä¸ªè™šæ‹Ÿç›®å½•ã€‚åœ¨ä½¿ç”¨æ–°çš„å­˜å‚¨è®¾å¤‡ä¹‹å‰,éœ€è¦å°†å…¶æ”¾åœ¨è™šæ‹Ÿç›®å½•ä¸­ã€‚è¿™é¡¹å·¥ä½œç§°ä¸ºæŒ‚è½½(mounting)ã€‚
å®é™…çš„ç‰©ç†å­˜å‚¨è®¾å¤‡é€šè¿‡é©±åŠ¨è¢«æŠ½è±¡æˆ &#x2F;dev&#x2F;xxx è®¾å¤‡æ–‡ä»¶ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥ç”¨ç›®å½•æ ‘è®¿é—®å®ƒä»¬ã€‚å¿…é¡»æŠŠå®ƒä»¬æŒ‚è½½åˆ°è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰çš„æŸä¸ªæŒ‚è½½ç‚¹ä¹‹åï¼Œæ‰èƒ½ä»¥ç»Ÿä¸€çš„æ–¹å¼è®¿é—®å’Œç®¡ç†ã€‚


mount


ç”¨äºæŒ‚è½½å­˜å‚¨è®¾å¤‡çš„å‘½ä»¤å«ä½œ mountã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹,mount å‘½ä»¤ä¼šè¾“å‡ºå½“å‰ç³»ç»Ÿå·²æŒ‚è½½ çš„è®¾å¤‡åˆ—è¡¨ã€‚
å¦‚æœçŸ¥é“è®¾å¤‡åˆ†åŒºä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹,å¯ä»¥ä½¿ç”¨-t &lt;fs-type&gt;è¿‡æ»¤è¾“å‡ºã€‚
mount å‘½ä»¤æä¾›äº† 4 éƒ¨åˆ†ä¿¡æ¯: è®¾å¤‡æ–‡ä»¶å, è®¾å¤‡åœ¨è™šæ‹Ÿç›®å½•ä¸­çš„æŒ‚è½½ç‚¹, æ–‡ä»¶ç³»ç»Ÿç±»å‹, å·²æŒ‚è½½è®¾å¤‡çš„è®¿é—®çŠ¶æ€
æ‰‹åŠ¨æŒ‚è½½è®¾å¤‡çš„åŸºæœ¬å‘½ä»¤: mount -t type device directory, type å‚æ•°æŒ‡å®šäº†ç£ç›˜æ ¼å¼åŒ–æ‰€ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚ç¤ºä¾‹ï¼š mount -t vfat /dev/sdb1 /media/disk
-o é€‰é¡¹å…è®¸åœ¨æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿæ—¶æ·»åŠ ä¸€ç³»åˆ—ä»¥é€—å·åˆ†éš”çš„é¢å¤–é€‰é¡¹, å¦‚:




é€‰é¡¹
è¯´æ˜



ro
ä»¥åªè¯»å½¢å¼æŒ‚è½½


rw
ä»¥è¯»å†™å½¢å¼æŒ‚è½½


user
å…è®¸æ™®é€šç”¨æˆ·æŒ‚è½½è¯¥æ–‡ä»¶ç³»ç»Ÿ


check&#x3D;none
æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿæ—¶ä¸æ‰§è¡Œå®Œæ•´æ€§æ ¡éªŒ


loop
æŒ‚è½½æ–‡ä»¶



umount


ç§»é™¤å¯ç§»åŠ¨è®¾å¤‡æ—¶,ä¸èƒ½ç›´æ¥å°†è®¾å¤‡æ‹”ä¸‹,åº”è¯¥å…ˆå¸è½½ã€‚
umount å‘½ä»¤çš„æ ¼å¼éå¸¸ç®€å•:  umount [directory | device ]

1.4.2.2 ä½¿ç”¨ df å‘½ä»¤
æœ‰æ—¶éœ€è¦çŸ¥é“åœ¨æŸå°è®¾å¤‡ä¸Šè¿˜æœ‰å¤šå°‘ç£ç›˜ç©ºé—´ã€‚df å‘½ä»¤å¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹æ‰€æœ‰å·²æŒ‚è½½ç£ç›˜çš„ä½¿ç”¨æƒ…å†µ
df å‘½ä»¤ä¼šè¾“å‡ºå†…æ ¸æŒ‚è½½çš„æ‰€æœ‰è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ,å› æ­¤å¯ä»¥ä½¿ç”¨-t é€‰é¡¹æ¥æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹
è¯¥å‘½ä»¤çš„è¾“å‡º: è®¾å¤‡æ–‡ä»¶ä½ç½®, åŒ…å«å¤šå°‘ä»¥ 1024 å­—èŠ‚ä¸ºå•ä½çš„å—, ä½¿ç”¨äº†å¤šå°‘ä»¥ 1024 å­—èŠ‚ä¸ºå•ä½çš„å—, è¿˜æœ‰å¤šå°‘ä»¥ 1024 å­—èŠ‚ä¸ºå•ä½çš„å—å¯ç”¨, å·²ç”¨ç©ºé—´æ‰€å çš„ç™¾åˆ†æ¯”, è®¾å¤‡æŒ‚è½½ç‚¹
å¸¸ç”¨é€‰é¡¹ä¹‹ä¸€æ˜¯-h,è¯¥é€‰é¡¹ä¼šä»¥äººç±»æ˜“è¯»(humanreadable)çš„å½¢å¼æ˜¾ç¤ºç£ç›˜ç©ºé—´,é€šå¸¸ç”¨ M æ¥æ›¿ä»£å…†å­—èŠ‚,ç”¨ G æ¥æ›¿ä»£å‰å­—èŠ‚

1.4.2.3 ä½¿ç”¨ du å‘½ä»¤
du å‘½ä»¤å¯ä»¥æ˜¾ç¤ºæŸä¸ªç‰¹å®šç›®å½•(é»˜è®¤æƒ…å†µä¸‹æ˜¯å½“å‰ ç›®å½•)çš„ç£ç›˜ä½¿ç”¨æƒ…å†µã€‚
ä¸‹é¢è¿™äº›é€‰é¡¹èƒ½è®© du å‘½ä»¤çš„è¾“å‡ºæ›´åŠ æ¸…æ™°æ˜“è¯»ã€‚
-c:æ˜¾ç¤ºæ‰€æœ‰å·²åˆ—å‡ºæ–‡ä»¶çš„æ€»å¤§å°ã€‚
-h:æŒ‰äººç±»æ˜“è¯»æ ¼å¼è¾“å‡ºå¤§å°,åˆ†åˆ«ç”¨ K è¡¨ç¤ºåƒå­—èŠ‚ã€M è¡¨ç¤ºå…†å­—èŠ‚ã€G è¡¨ç¤ºå‰å­—èŠ‚ã€‚
-s:è¾“å‡ºæ¯ä¸ªå‚æ•°çš„æ±‡æ€»ä¿¡æ¯ã€‚



1.4.3 å¤„ç†æ•°æ®æ–‡ä»¶1.4.3.1 æ•°æ®æ’åº
å¤„ç†å¤§é‡æ•°æ®æ—¶çš„ä¸€ä¸ªå¸¸ç”¨å‘½ä»¤æ˜¯ sortã€‚è¿™æ˜¯ç”¨æ¥å¯¹æ•°æ®è¿›è¡Œæ’åºçš„å‘½ä»¤ã€‚
åœ¨é»˜è®¤æƒ…å†µä¸‹, sort å‘½ä»¤ä¼šä¾æ®å­—å…¸åºæ¥å¯¹æ–‡æœ¬æ–‡ä»¶ä¸­çš„æ•°æ®è¡Œè¿›è¡Œæ’åºã€‚
ä½¿ç”¨-n é€‰é¡¹å‘Šè¯‰ sort å‘½ä»¤å°†æ•°å­—æŒ‰å€¼æ’åº
åŠ å…¥-M é€‰é¡¹,é‚£ä¹ˆ sort å‘½ä»¤å°±èƒ½è¯†åˆ«ä¸‰å­—ç¬¦çš„æœˆä»½åå¹¶æ­£ç¡®æ’åº
-r â€“reverse é€†åºæ’åº(å‡åºå˜æˆé™åº)
-c â€“check ä¸æ’åº,ä½†æ£€æŸ¥è¾“å…¥æ•°æ®æ˜¯å¦æœ‰åº,æ— åºçš„è¯å°±æŠ¥å‘Š
-u â€“unique å’Œ-c é€‰é¡¹åˆç”¨æ—¶,æ£€æŸ¥ä¸¥æ ¼æ’åº;ä¸å’Œ-c é€‰é¡¹åˆç”¨æ—¶,ç›¸åŒè¡Œä»…è¾“å‡ºä¸€æ¬¡
åœ¨å¯¹æŒ‰å­—æ®µåˆ†éš”çš„æ•°æ®è¿›è¡Œæ’åºæ—¶,-k é€‰é¡¹å’Œ-t é€‰é¡¹éå¸¸æ–¹ä¾¿ã€‚ å…ˆä½¿ç”¨-t é€‰é¡¹æŒ‡å®šå­—æ®µåˆ†éš”ç¬¦,ç„¶åä½¿ç”¨-k é€‰é¡¹æŒ‡å®šæ’åºå­—æ®µ(ä»1å¼€å§‹)ã€‚ç¤ºä¾‹ï¼šsort -t &#39;:&#39; -k 3 -n /etc/passwd

1.4.3.2 æ•°æ®æœç´¢
grep [options] pattern [file]
å¦‚æœè¦è¿›è¡Œåå‘æœç´¢(è¾“å‡ºä¸åŒ¹é…æŒ‡å®šæ¨¡å¼çš„è¡Œ),å¯ä»¥ä½¿ç”¨-v é€‰é¡¹
å¦‚æœè¦æ˜¾ç¤ºåŒ¹é…æŒ‡å®šæ¨¡å¼çš„é‚£äº›è¡Œçš„è¡Œå·,å¯ä»¥ä½¿ç”¨-n é€‰é¡¹
å¦‚æœåªæƒ³çŸ¥é“æœ‰å¤šå°‘è¡Œå«æœ‰åŒ¹é…çš„æ¨¡å¼,å¯ä»¥ä½¿ç”¨-c é€‰é¡¹

1.4.3.3 æ•°æ®å‹ç¼©
gzip å‘½ä»¤ä¼šå‹ç¼©å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥æŒ‡å®šå¤šä¸ªæ–‡ä»¶åæˆ–æ˜¯ç”¨é€šé…ç¬¦æ¥ä¸€æ¬¡æ€§å‹ç¼©å¤šä¸ªæ–‡ä»¶ï¼Œå‹ç¼©åçš„æ–‡ä»¶ä¼šåœ¨åŸæ–‡ä»¶ååé¢æ·»åŠ  .gz æ‰©å±•åã€‚
è¦è§£å‹ç¼©æ–‡ä»¶,å¯ä»¥ä½¿ç”¨ gunzip å‘½ä»¤,æˆ–è€…ä½¿ç”¨ gzcat å‘½ä»¤æ¥æŸ¥çœ‹å‹ç¼©æ–‡ä»¶çš„å†…å®¹ã€‚

1.4.3.4 æ•°æ®å½’æ¡£
gzip å‘½ä»¤åªèƒ½å‹ç¼©æ–‡ä»¶ï¼Œè¦å‹ç¼©ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œéœ€è¦å…ˆå½’æ¡£ã€‚

å½’æ¡£å·¥å…·æ˜¯ tar å‘½ä»¤tar function [options] object1 object2 ...

å¸¸ç”¨function: -c â€“create åˆ›å»ºæ–°çš„ tar å½’æ¡£æ–‡ä»¶ -t â€“list åˆ—å‡º tar å½’æ¡£æ–‡ä»¶çš„å†…å®¹

å¸¸ç”¨option: -f file å°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶(æˆ–è®¾å¤‡) 

tar -cf test.tar test/ test2/è¯¥å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªåä¸º test.tar çš„å½’æ¡£æ–‡ä»¶, åŒ…å«ç›®å½• test å’Œ test2 çš„å†…å®¹ã€‚

tar -tf test.tar è¯¥å‘½ä»¤åˆ—å‡ºäº†(ä½†ä¸æå–)tar æ–‡ä»¶ test.tar çš„å†…å®¹ã€‚

tar -xvf test.tar è¯¥å‘½ä»¤ä» tar æ–‡ä»¶ test.tar ä¸­æå–å†…å®¹ã€‚å¦‚æœåˆ›å»ºçš„æ—¶å€™ tar æ–‡ä»¶å«æœ‰ç›®å½•ç»“æ„,åˆ™åœ¨å½“å‰ç›®å½•ä¸­é‡å»ºè¯¥ç›®å½•çš„æ•´ä¸ªç»“æ„ã€‚

åœ¨ä¸‹è½½å¼€æºè½¯ä»¶æ—¶ç»å¸¸ä¼šçœ‹åˆ°æ–‡ä»¶åä»¥.tgz ç»“å°¾,è¿™æ˜¯ç» gzip å‹ç¼©è¿‡çš„ tar æ–‡ä»¶,å¯ä»¥ç”¨ tar -zxvf filename.tgz æ¥æå–å…¶ä¸­çš„å†…å®¹ã€‚

tar å‘½ä»¤çš„æ“ä½œ





æ“ä½œ
é•¿é€‰é¡¹
æ è¿°



-A
â€“concatenate
å°†ä¸€ä¸ª tar å½’æ¡£æ–‡ä»¶è¿½åŠ åˆ°å¦ä¸€ä¸ª tar å½’æ¡£æ–‡ä»¶æœ«å°¾


-c
â€“create
åˆ›å»ºæ–°çš„ tar å½’æ¡£æ–‡ä»¶


-d
â€“diff
æ£€æŸ¥å½’æ¡£æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿçš„ä¸åŒä¹‹å¤„



â€“delete
ä» tar å½’æ¡£æ–‡ä»¶ä¸­åˆ é™¤æ–‡ä»¶


-r
â€“append
å°†æ–‡ä»¶è¿½åŠ åˆ° tar å½’æ¡£æ–‡ä»¶æœ«å°¾


-t
â€“list
åˆ—å‡º tar å½’æ¡£æ–‡ä»¶çš„å†…å®¹


-u
â€“update
å°†æ¯” tar å½’æ¡£æ–‡ä»¶ä¸­å·²æœ‰çš„åŒåæ–‡ä»¶æ›´æ–°çš„æ–‡ä»¶è¿½åŠ åˆ°è¯¥å½’æ¡£æ–‡ä»¶


-x
â€“extract
ä» tar å½’æ¡£æ–‡ä»¶ä¸­æå–æ–‡ä»¶



tar å‘½ä»¤é€‰é¡¹




é€‰é¡¹
æè¿°



-C dir
åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•


-f file
å°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶(æˆ–è®¾å¤‡)


-j
å°†è¾“å‡ºä¼ ç»™ bzip2 å‘½ä»¤è¿›è¡Œå‹ç¼©


-J
å°†è¾“å‡ºä¼ ç»™ xz å‘½ä»¤è¿›è¡Œå‹ç¼©


-p
ä¿ç•™æ–‡ä»¶çš„æ‰€æœ‰æƒé™


-v
åœ¨å¤„ç†æ–‡ä»¶æ—¶æ˜¾ç¤ºæ–‡ä»¶å


-z
å°†è¾“å‡ºä¼ ç»™ gzip å‘½ä»¤è¿›è¡Œå‹ç¼©


-Z
å°†è¾“å‡ºä¼ ç»™ compress å‘½ä»¤è¿›è¡Œå‹ç¼©


1.5 ç†è§£ shell1.5.3 ç†è§£å¤–éƒ¨å‘½ä»¤å’Œå†…å»ºå‘½ä»¤1.5.3.2 å†…å»ºå‘½ä»¤
ä½¿ç”¨å‘½ä»¤åˆ«å


alias å‘½ä»¤æ˜¯å¦ä¸€ä¸ªå®ç”¨çš„ shell å†…å»ºå‘½ä»¤ã€‚å‘½ä»¤åˆ«åå…è®¸ä¸ºå¸¸ç”¨å‘½ä»¤åŠå…¶å‚æ•°åˆ›å»ºå¦ä¸€ä¸ªåç§°,ä»è€Œå°†è¾“å…¥é‡å‡å°‘åˆ°æœ€ä½ã€‚alias alias-name=origin
å› ä¸ºå‘½ä»¤åˆ«åå±äº å†…å»ºå‘½ä»¤,æ‰€ä»¥åˆ«åä»…åœ¨å…¶è¢«å®šä¹‰çš„ shell è¿›ç¨‹ä¸­æ‰æœ‰æ•ˆã€‚

1.6 Linux ç¯å¢ƒå˜é‡1.6.1 ä»€ä¹ˆæ˜¯ç¯å¢ƒå˜é‡
bash shell ä¸­æœ‰ä¸¤ç§ç¯å¢ƒå˜é‡: å…¨å±€å˜é‡, å±€éƒ¨å˜é‡ã€‚

1.6.1.1 å…¨å±€ç¯å¢ƒå˜é‡
å…¨å±€ç¯å¢ƒå˜é‡å¯¹äº shell ä¼šè¯å’Œæ‰€æœ‰ç”Ÿæˆçš„å­ shell éƒ½æ˜¯å¯è§çš„ã€‚å±€éƒ¨ç¯å¢ƒå˜é‡åˆ™åªå¯¹åˆ›å»ºå®ƒ çš„ shell å¯è§ã€‚
å¯ä»¥ä½¿ç”¨ env å‘½ä»¤æˆ– printenv å‘½ä»¤æ¥æŸ¥çœ‹å…¨å±€å˜é‡
ä½¿ç”¨ echo å‘½ä»¤æ˜¾ç¤ºæŸä¸ªå˜é‡çš„å€¼ã€‚åœ¨å¼•ç”¨æŸä¸ªç¯å¢ƒå˜é‡æ—¶,å¿…é¡»åœ¨è¯¥å˜é‡åå‰åŠ ä¸Šç¾å…ƒ ç¬¦å·($)

1.6.2 è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰å˜é‡1.6.2.1 è®¾ç½®å±€éƒ¨ç”¨æˆ·è‡ªå®šä¹‰å˜é‡
ä½¿ç”¨ç­‰å·ä¸ºå˜é‡èµ‹å€¼,å€¼å¯ä»¥æ˜¯æ•°å€¼æˆ–å­—ç¬¦ä¸² my_variable=Hello
å¦‚æœç”¨äºèµ‹å€¼çš„å­—ç¬¦ä¸²åŒ…å«ç©ºæ ¼,åˆ™å¿…é¡»ç”¨å•å¼•å·æˆ–åŒå¼•å·æ¥ç•Œå®šè¯¥å­—ç¬¦ä¸²çš„èµ·æ­¢
åœ¨å˜é‡åã€ç­‰å·å’Œå€¼ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ã€‚å¦‚æœåœ¨èµ‹å€¼è¡¨è¾¾å¼ä¸­åŠ ä¸Šäº†ç©º æ ¼,é‚£ä¹ˆ bash shell ä¼šå°†å€¼è§†ä¸ºå•ç‹¬çš„å‘½ä»¤

1.6.2.2 è®¾ç½®å…¨å±€ç¯å¢ƒå˜é‡
export my_variable=value

1.6.3 åˆ é™¤ç¯å¢ƒå˜é‡
åˆ é™¤å·²æœ‰çš„ç¯å¢ƒå˜é‡ã€‚å¯ä»¥ç”¨ unset å‘½ä»¤æ¥å®Œæˆè¿™ ä¸ªæ“ä½œã€‚åœ¨ unset å‘½ä»¤ä¸­å¼•ç”¨ç¯å¢ƒå˜é‡æ—¶,è®°ä½ä¸è¦ä½¿ç”¨$ã€‚
å¦‚æœè¦ç”¨åˆ°(doing anything with)å˜é‡,å°±ä½¿ç”¨$;å¦‚æœè¦æ“ä½œ(doing anything to)å˜é‡,åˆ™ä¸ä½¿ç”¨$ã€‚
å¯¹äº PATH å˜é‡çš„ä¿®æ”¹åªèƒ½æŒç»­åˆ°é€€å‡ºæˆ–é‡å¯ç³»ç»Ÿã€‚è¿™ç§æ•ˆæœå¹¶ä¸èƒ½ä¸€ç›´å¥æ•ˆã€‚

1.6.6 å®šä½ç³»ç»Ÿç¯å¢ƒå˜é‡
å½“ä½ ç™»å½• Linux ç³»ç»Ÿå¯åŠ¨ bash shell æ—¶,é»˜è®¤æƒ…å†µä¸‹ bash ä¼šåœ¨å‡ ä¸ªæ–‡ä»¶ä¸­æŸ¥æ‰¾å‘½ä»¤ã€‚è¿™äº›æ–‡ä»¶ ç§°ä½œå¯åŠ¨æ–‡ä»¶æˆ–ç¯å¢ƒæ–‡ä»¶ã€‚

1.6.6.1 ç™»å½• shell
ç™»å½• shell é€šå¸¸ä¼šä» 5 ä¸ªä¸åŒçš„å¯ åŠ¨æ–‡ä»¶ä¸­è¯»å–å‘½ä»¤ã€‚  
&#x2F;etc&#x2F;profile  
$HOME&#x2F;.bash_profile  
$HOME&#x2F;.bashrc  
$HOME&#x2F;.bash_login  
$HOME&#x2F;.profile


&#x2F;etc&#x2F;profile æ–‡ä»¶æ˜¯ç³»ç»Ÿä¸­é»˜è®¤çš„ bash shell çš„ä¸»å¯åŠ¨æ–‡ä»¶ã€‚ç³»ç»Ÿä¸­çš„æ¯ä¸ªç”¨æˆ·ç™»å½•æ—¶éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå¯åŠ¨æ–‡ä»¶ã€‚
å…¶ä½™çš„å¯åŠ¨æ–‡ä»¶éƒ½ç”¨äºåŒä¸€ä¸ªç›®çš„:æä¾›ç”¨æˆ·ä¸“å±çš„å¯åŠ¨æ–‡ä»¶æ¥å®šä¹‰è¯¥ç”¨æˆ·æ‰€ç”¨åˆ°çš„ç¯å¢ƒ å˜é‡ã€‚å¤§å¤šæ•° Linux å‘è¡Œç‰ˆåªç”¨è¿™ 4 ä¸ªå¯åŠ¨æ–‡ä»¶ä¸­çš„ä¸€ä¸¤ä¸ªã€‚
åœ¨å¤§å¤šæ•°å‘è¡Œç‰ˆä¸­,ä¿å­˜ä¸ªäººç”¨æˆ·æ°¸ä¹…æ€§ bash shell å˜é‡çš„æœ€ä½³åœ°ç‚¹æ˜¯$HOME&#x2F;.bashrc æ–‡ä»¶ã€‚
å¯ä»¥æŠŠä¸ªäººçš„ alias è®¾ç½®æ”¾åœ¨$HOME&#x2F;.bashrc å¯åŠ¨æ–‡ä»¶ä¸­,ä½¿å…¶æ•ˆæœæ°¸ä¹…åŒ–ã€‚

1.7 ç†è§£ Linux æ–‡ä»¶æƒé™1.7.3 ç†è§£æ–‡ä»¶æƒé™
1.7.3.2 é»˜è®¤æ–‡ä»¶æƒé™
ä½¿ç”¨3ä½8è¿›åˆ¶æ•°æ¥è¡¨ç¤ºæƒé™ã€‚




æƒé™
äºŒè¿›åˆ¶å€¼
å…«è¿›åˆ¶å€¼
æè¿°



â€”
000
0
æ²¡æœ‰ä»»ä½•æƒé™


â€“x
001
1
åªæœ‰æ‰§è¡Œæƒé™


-w-
010
2
åªæœ‰å†™å…¥æƒé™


-wx
011
3
æœ‰å†™å…¥å’Œæ‰§è¡Œæƒé™


râ€“
100
4
åªæœ‰è¯»å–æƒé™


r-x
101
5
æœ‰è¯»å–å’Œæ‰§è¡Œæƒé™


rw-
110
6
æœ‰è¯»å–å’Œå†™å…¥æƒé™


rwx
111
7
æœ‰å…¨éƒ¨æƒé™(è¯»å–ã€å†™å…¥å’Œæ‰§è¡Œ)



umask å‘½ä»¤ç”¨æ¥è®¾ç½®æ–°å»ºæ–‡ä»¶å’Œç›®å½• çš„é»˜è®¤æƒé™
umask å€¼åªæ˜¯ä¸ªæ©ç , æŠŠ umask å€¼ä»å¯¹è±¡çš„å…¨æƒé™å€¼(full permission)ä¸­å‡æ‰ã€‚å¯¹æ–‡ä»¶è€Œè¨€,å…¨æƒé™å€¼æ˜¯ 666 (æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰è¯»å–å’Œå†™å…¥çš„æƒé™);å¯¹ç›®å½•è€Œè¨€,å…¨æƒé™å€¼åˆ™æ˜¯ 777(æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰è¯»å–ã€å†™å…¥ å’Œæ‰§è¡Œæƒé™), ç»“æœå°±æ˜¯æ–°å»ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™ã€‚
æ–‡ä»¶ä¸èƒ½ç›´æ¥æ‰§è¡Œã€‚æ–°å»ºæ–‡ä»¶æ˜¯æ™®é€šæ•°æ®ï¼ˆæ–‡æœ¬ã€é…ç½®ã€æºç ç­‰ï¼‰ï¼Œä¸æ˜¯ç¨‹åºã€‚å› æ­¤å…¨æƒé™ä¸º666
å¿…é¡»è¦æœ‰ x æƒé™æ‰èƒ½è¿›å…¥ç›®å½•ï¼Œå¦åˆ™ä½ å³ä½¿æœ‰ r ä¹Ÿåªèƒ½åˆ—å‡ºæ–‡ä»¶åï¼Œçœ‹ä¸åˆ°å†…å®¹ã€‚

1.7.4 æ›´æ”¹å®‰å…¨è®¾ç½®1.7.4.1 ä¿®æ”¹æƒé™
chmod å‘½ä»¤å¯ä»¥ä¿®æ”¹æ–‡ä»¶å’Œç›®å½•çš„å®‰å…¨è®¾ç½®ã€‚chmod options mode file
mode å‚æ•°å…è®¸ä½¿ç”¨å…«è¿›åˆ¶æ¨¡å¼ï¼ˆæ¨èï¼‰æˆ–ç¬¦å·æ¨¡å¼æ¥è¿›è¡Œå®‰å…¨è®¾ç½®ã€‚

1.9 å®‰è£…è½¯ä»¶1.9.1 è½¯ä»¶åŒ…ç®¡ç†åŸºç¡€
è½¯ä»¶åŒ…å­˜å‚¨åœ¨ç§°ä¸ºä»“åº“(repository)çš„æœåŠ¡å™¨ä¸Š,å¯ä»¥åˆ©ç”¨æœ¬åœ° Linux ç³»ç»Ÿä¸­çš„è½¯ä»¶åŒ…ç®¡ç† å™¨é€šè¿‡ Internet è®¿é—®,åœ¨å…¶ä¸­æœç´¢æ–°çš„è½¯ä»¶åŒ…,æˆ–æ˜¯æ›´æ–°ç³»ç»Ÿä¸­å·²å®‰è£…çš„è½¯ä»¶åŒ…ã€‚

1.9.2 åŸºäº Debian çš„ç³»ç»Ÿ
apt [options] command

1.9.2.1 ä½¿ç”¨ apt ç®¡ç†è½¯ä»¶åŒ…
apt list å‘½ ä»¤ä¼šæ˜¾ç¤ºä»“åº“ä¸­æ‰€æœ‰å¯ç”¨çš„è½¯ä»¶åŒ…,å¦‚æœå†åŠ å…¥â€“installed é€‰é¡¹,å°±å¯ä»¥é™åˆ¶ä»…è¾“å‡ºé‚£äº›å·²å®‰è£…åœ¨ç³»ç»Ÿä¸­çš„è½¯ä»¶åŒ…
å¦‚æœå·²ç»çŸ¥é“ç³»ç»Ÿä¸­çš„æŸä¸ªè½¯ä»¶åŒ…,å¸Œæœ›æ˜¾ç¤ºå…¶è¯¦ç»†ä¿¡æ¯,å¯ä»¥ä½¿ç”¨ show å‘½ä»¤æ¥æ“ä½œ: apt show package_name
apt show å‘½ä»¤å¹¶ä¸ä¼šæŒ‡æ˜è½¯ä»¶åŒ…æ˜¯å¦å·²ç»å®‰è£…ã€‚å®ƒåªæ ¹æ®è½¯ä»¶ä»“åº“æ˜¾ç¤ºè¯¥è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯ã€‚

1.9.2.2 ä½¿ç”¨ apt å®‰è£…è½¯ä»¶åŒ…
æŸ¥æ‰¾ç‰¹å®šçš„è½¯ä»¶åŒ…: apt search package_name 
search å‘½ä»¤çš„å¦™å¤„åœ¨äºä¸éœ€è¦åœ¨ package_name å‘¨å›´æ·»åŠ é€šé…ç¬¦,ç›´æ¥å°±æœ‰é€šé…ç¬¦çš„æ•ˆæœã€‚
å¦‚æœåªæƒ³æœç´¢è½¯ä»¶åŒ…åç§°,å¯ä»¥åŠ å…¥â€“name-only é€‰é¡¹ã€‚
å®‰è£…ï¼šapt install package_name 
å¯ä»¥ä½¿ç”¨ list å‘½ä»¤çš„â€“installed é€‰é¡¹æ£€æŸ¥å®‰è£…æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœåœ¨è¾“å‡ºä¸­çœ‹åˆ°äº†è½¯ä»¶åŒ…, é‚£ä¹ˆè¯´æ˜å·²ç»å®‰è£…å¥½äº†ã€‚

1.9.2.3 ä½¿ç”¨ apt å‡çº§è½¯ä»¶
upgrade å‘½ä»¤å¯ä»¥ä½¿ç”¨ä»“åº“ä¸­çš„ä»»ä½•æ–°ç‰ˆæœ¬å®‰å…¨åœ°å‡çº§ç³»ç»Ÿä¸­æ‰€æœ‰çš„è½¯ä»¶åŒ…:  apt upgrade
upgrade å‘½ä»¤åœ¨å‡çº§è¿‡ç¨‹ä¸­ä¸ä¼šåˆ é™¤ä»»ä½•è½¯ä»¶åŒ…ã€‚å¦‚æœå¿…é¡»åˆ é™¤æŸä¸ªè½¯ä»¶åŒ…æ‰èƒ½å®Œæˆå‡çº§, å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:  apt full-upgrade

1.9.2.4 ä½¿ç”¨ apt å¸è½½è½¯ä»¶åŒ…
apt çš„ remove å‘½ä»¤å¯ä»¥åˆ é™¤è½¯ä»¶åŒ…,åŒæ—¶ä¿ç•™æ•°æ®å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœè¦å°†è½¯ä»¶åŒ…ä»¥åŠç›¸å…³ çš„æ•°æ®å’Œé…ç½®æ–‡ä»¶å…¨éƒ¨åˆ é™¤,é‚£ä¹ˆéœ€è¦ä½¿ç”¨ purge å‘½ä»¤
å¦‚æœç¡®å®šæœ‰ä¾èµ–å…³ç³»çš„è½¯ä»¶åŒ…ä¸ä¼šå†æœ‰ä»–ç”¨,å¯ä»¥ä½¿ç”¨ autoremove å‘½ä»¤å°†å…¶åˆ é™¤

1.9.4 ä½¿ç”¨å®¹å™¨ç®¡ç†è½¯ä»¶
äº‘è®¡ç®—å¸¦æ¥äº†åº”ç”¨ç¨‹åºæ‰“åŒ…æ–¹å¼çš„ä¸€ç§æ–°èŒƒå¼:åº”ç”¨ç¨‹åºå®¹å™¨(application container)ã€‚åº”ç”¨ ç¨‹åºå®¹å™¨åˆ›å»ºäº†ä¸€ä¸ªç¯å¢ƒ,å…¶ä¸­åŒ…å«äº†åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„å…¨éƒ¨æ–‡ä»¶,åŒ…æ‹¬è¿è¡Œæ—¶åº“æ–‡ä»¶ã€‚å¼€å‘ äººå‘˜éšåå¯ä»¥å°†åº”ç”¨ç¨‹åºå®¹å™¨ä½œä¸ºå•ä¸ªè½¯ä»¶åŒ…åˆ†å‘,ä¿è¯èƒ½å¤Ÿåœ¨ä»»ä½• Linux ç³»ç»Ÿä¸­æ­£å¸¸è¿è¡Œã€‚

1.9.4.1 ä½¿ç”¨ snap å®¹å™¨
ä½¿ç”¨ snap å‘½ä»¤è¡Œå·¥å…·æŸ¥è¯¢ snap æ•°æ®åº“,æ˜¾ç¤ºå·²å®‰è£…çš„ snap åŒ…,ä»¥åŠå®‰è£…ã€å‡çº§å’Œåˆ é™¤ snap åŒ…ã€‚
snap list å‘½ä»¤æŸ¥çœ‹å½“å‰å·²å®‰è£…çš„ snap åº”ç”¨ç¨‹åºåˆ—è¡¨
snap find å‘½ä»¤å¯ä»¥åœ¨ snap ä»“åº“ä¸­æœç´¢æŒ‡å®šç¨‹åº
snap info å‘½ä»¤å¯ä»¥æŸ¥çœ‹ snap åº”ç”¨ç¨‹åº(ç®€ç§°ä¸º snap)çš„è¯¦ç»†ä¿¡æ¯
snap install å‘½ä»¤å¯ä»¥å®‰è£…æ–°çš„ snap
å¦‚æœéœ€è¦åˆ é™¤æŸä¸ª snap,ä½¿ç”¨ snap remove å‘½ä»¤å³å¯
Snap vs APT çš„åŒºåˆ«




ç‰¹æ€§
APT (Deb åŒ…)
Snap åŒ…



è½¯ä»¶å½¢å¼
.deb åŒ…
.snap åŒ…


ä¾èµ–ç®¡ç†
ä½¿ç”¨ç³»ç»Ÿåº“ï¼Œä¾èµ–éœ€è¦ç”± APT è§£å†³
è‡ªå¸¦ä¾èµ–ï¼Œå‡ ä¹æ— éœ€å¤–éƒ¨ä¾èµ–


å®‰è£…æ¥æº
Debian&#x2F;Ubuntu å®˜æ–¹ä»“åº“ æˆ– PPA
Snap Storeï¼ˆé›†ä¸­å¼ï¼‰


å‡çº§æœºåˆ¶
ç”±ç³»ç»ŸåŒ…ç®¡ç†å™¨ç»Ÿä¸€å‡çº§
Snapd åå°è‡ªåŠ¨æ»šåŠ¨æ›´æ–°


è¿è¡Œç¯å¢ƒ
ä¸ç³»ç»Ÿç¯å¢ƒå¼ºè€¦åˆ
è¿è¡Œåœ¨å®¹å™¨åŒ–æ²™ç›’ä¸­


ä½“ç§¯å¤§å°
é€šå¸¸è¾ƒå°ï¼ˆå…±ç”¨ç³»ç»Ÿåº“ï¼‰
è¾ƒå¤§ï¼ˆè‡ªå¸¦ä¾èµ–ï¼‰


å®‰å…¨æ€§
ä¾èµ–ç³»ç»Ÿçº§å®‰å…¨æœºåˆ¶
è‡ªå¸¦æ²™ç›’éš”ç¦»ï¼Œæ›´ç»†ç²’åº¦æƒé™æ§åˆ¶


å¯åŠ¨é€Ÿåº¦
å¿«ï¼Œç›´æ¥ä½¿ç”¨ç³»ç»Ÿåº“
ç¨æ…¢ï¼Œéœ€é€šè¿‡ snapd å¯åŠ¨ç¯å¢ƒ


å…¸å‹åº”ç”¨
ç³»ç»Ÿçº§å·¥å…·ã€ä¼ ç»Ÿè½¯ä»¶
æ¡Œé¢åº”ç”¨ã€è·¨å‘è¡Œç‰ˆçš„ç¨‹åº


TO BE CONTINUED
]]></content>
      <categories>
        <category>Linux Command Line and Shell Scripting Bible</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>reading note</tag>
        <tag>linux</tag>
        <tag>Linux Command Line and Shell Scripting Bible</tag>
      </tags>
  </entry>
  <entry>
    <title>250707-250714 å‘¨è®° 2024-xv6-labs(1)</title>
    <url>/2025/07/14/250707-250714-%E5%91%A8%E8%AE%B0-2024-xv6-labs-1/</url>
    <content><![CDATA[æœ¬å‘¨ä¸»è¦å®Œæˆäº†2024-xv6-labsçš„utilåˆ°cowçš„äº”ä¸ªå®éªŒã€‚
1. util lab1.1 sleepè¿™ä¸ªç®—æ˜¯æœ€ç®€å•çš„å®éªŒäº†ã€‚æŒ‰ç…§hintsä¸€æ­¥æ­¥å†™å³å¯ã€‚æ²¡æœ‰ä»»ä½•é¢å¤–éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚
1.2 pingpongè¿™ä¸ªå®éªŒçš„ä¸»è¦éš¾ç‚¹æ˜¯ç†è§£pipeå‡½æ•°çš„ä½¿ç”¨ã€‚å…ˆæŸ¥çœ‹ sys_pipeå‡½æ•°ï¼š
voidsys_pipe(void)&#123;   uint64 fdarray; // user pointer to array of two integers   struct file *rf, *wf;   int fd0, fd1;   struct proc *p = myproc();      argaddr(0, &amp;fdarray);   if(pipealloc(&amp;rf, &amp;wf) &lt; 0)&#123;    ...   &#125;     ...   if((fd0 = fdalloc(rf)) &lt; 0 || (fd1 = fdalloc(wf)) &lt; 0)&#123;    ...   &#125;   if(copyout(p-&gt;pagetable, fdarray, (char*)&amp;fd0, sizeof(fd0)) &lt; 0 ||    copyout(p-&gt;pagetable, fdarray+sizeof(fd0), (char *)&amp;fd1, sizeof(fd1)) &lt; 0)&#123;    ...    &#125;    ...&#125;

å†ç»§ç»­æŸ¥çœ‹ pipealloc fdalloc copyoutç­‰ç›¸å…³å‡½æ•°çš„å®šä¹‰ã€‚å¯è§ï¼Œpipeæ˜¯æŠŠä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦åˆ†åˆ«ä¼ ç»™äº†fdarray[0]å’Œfdarray[1]ï¼Œä¸”fdarray[0]åªè¯»ï¼Œfdarray[1]åªå†™ã€‚
è€Œæœ¬é¢˜ä¸­ï¼Œéœ€è¦çˆ¶-&gt;å­ å­-&gt;çˆ¶ä¸¤ä¸ªç®¡é“ã€‚ä¸”å¯¹äºçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹éƒ½éœ€è¦è¯»å’Œå†™ï¼Œæœ€åä»£ç å¦‚ä¸‹ï¼š
int p1[2]; // çˆ¶è¿›ç¨‹-&gt;å­è¿›ç¨‹int p2[2]; // å­è¿›ç¨‹-&gt;çˆ¶è¿›ç¨‹pipe(p1);pipe(p2);char buf;if(pid&gt;0)&#123;    close(p1[0]); // å…³é—­p1è¯»ç«¯    close(p2[1]); // å…³é—­p2å†™ç«¯    write(p1[1], &quot;a&quot;, 1);    close(p1[1]);    read(p2[0],&amp;buf,1);    close(p2[0]);    wait(0);    fprintf(2, &quot;%d: received pong\n&quot;, getpid());&#125;else&#123;    close(p1[1]);    close(p2[0]);    read(p1[0],&amp;buf,1);    close(p1[0]);    fprintf(2, &quot;%d: received ping\n&quot;, getpid());    write(p2[1],&quot;a&quot;,1);    close(p2[1]);&#125;

1.3 primesè¿™é¢˜æ›´ä¸ºè€ƒéªŒ pipeçš„ä½¿ç”¨ï¼Œè€Œä¸”è¦ç‰¹åˆ«å°å¿ƒï¼Œéœ€ç•™æ„å“ªäº›æ–‡ä»¶æè¿°ç¬¦ä¸ä¼šä½¿ç”¨äº†å¹¶æŠŠä»–ä»¬éƒ½å…³é—­ã€‚å¦åˆ™ä¼šå¯¼è‡´èµ„æºè€—å°½ï¼Œåœ¨å¤§çº¦37çš„åœ°æ–¹è¾“å‡ºä¹±ç ã€‚
è¯¥é¢˜æå–è´¨æ•°çš„æµç¨‹å¦‚ä¸‹ï¼š
//Input: file descriptor//Output: void//print the &quot;first&quot; prime in the sequence filtered by last process, and past the  //left sequence to next process recursively.primes(fd) :     if the sequence is empty do:        close(fd);        exit;    print the first number of the sequence;    fork;    pipe;    if is parent proc do:        pass the first number&#x27;s multiples;        write the left numnbers to son proc via pipe;        close(fd);        close(pipe&#x27;s write);        wait;    if is son proc do:        close(fd);        close(pipe&#x27;s write);        primes(pipe&#x27;s read);    exit;

1.4 findå®é™…ä¸Šï¼Œfindçš„å†™æ³•è·Ÿ lså†™æ³•å‡ ä¹ç›¸åŒï¼Œå¯¹äºç›®å½•æ–‡ä»¶è€Œè¨€ lsæ˜¯æ‰“å°ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè€Œ findåªæ‰“å°ä¸‹é¢åå­—ä¸ç¬¬äºŒä¸ªå‚æ•°ç›¸åŒçš„æ–‡ä»¶ã€‚åªæ˜¯è¦æ³¨æ„åˆ° findæ˜¯é€’å½’æŸ¥çœ‹ç›®å½•æ–‡ä»¶ï¼Œæ‰€ä»¥è¦é¢å¤–å¤„ç†â€.â€å’Œâ€..â€ã€‚
1.5 xargsè¿™é¢˜çš„å…³é”®æ˜¯ï¼Œå¦‚ä½•å¤„ç† xargså‰ |ä¹‹å‰çš„éƒ¨åˆ†çš„è¾“å‡ºã€‚
é¦–å…ˆè¦æŸ¥æ˜ï¼Œè¿™äº›è¾“å‡ºæ˜¯è¢«ç®¡é“é‡å®šå‘åˆ°äº† stdiné‡Œï¼Œè€Œ stdinå¯¹åº”çš„ fdä¸º0.
ç„¶åå°±æ˜¯ä½¿ç”¨readå°† stdiné‡Œçš„æ‹¼æ¥åœ¨åŸargvåé¢ã€‚æ³¨æ„ &#39; &#39;å’Œ &#39;\n&#39;çš„æƒ…å†µï¼Œå‰è€…ä»£è¡¨ä¸€ä¸ªå‚æ•°è¾“å…¥ç»“æŸï¼Œåè€…ä¸ä»…ä»£è¡¨ç»“æŸï¼Œè¿˜éœ€è¦ç«‹å³æ‰§è¡Œä¸€æ¬¡ã€‚
æ³¨æ„åœ¨ exec()ä¸­ï¼Œargvæœ«å°¾éœ€ä»¥ 0æ ‡å¿—ã€‚
2. syscall lab2.1 traceè¿™é¢˜å…¶å®ç†æ¸…æµç¨‹å³å¯ï¼Œå¹¶ä¸å¤æ‚ï¼š
å°† traceçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ©ç ï¼‰ç»™ myproc()ä¿å­˜ â€”â€”â€”â€” æ‰€ä»¥ procç»“æ„ä½“éœ€è¦æ–°æ·»åŠ ä¸€ä¸ªå±æ€§ maskæ¥å­˜ã€‚ç„¶åæ¯å½“ myproc()æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æ—¶å€™ï¼Œæ£€æŸ¥æ©ç ä¸­å¯¹äºè¯¥ç³»ç»Ÿè°ƒç”¨å¯¹åº”çš„ä½æ˜¯å¦ä¸º1ï¼ˆp-&gt;mask&amp;(1&lt;&lt;num)ï¼‰ï¼Œä»¥æ­¤æ¥å†³å®šæ˜¯å¦æ‰“å°è¯¥ç³»ç»Ÿè°ƒç”¨ã€‚
2.2 attackè¿™é“é¢˜ã€‚ã€‚ã€‚ã€‚emmmmã€‚ã€‚ã€‚è¯´å®è¯æˆ‘ç°åœ¨éƒ½æ²¡æœ‰æƒ³é€šã€‚
è¿™é“é¢˜æ€è·¯å¾ˆæ˜æ˜¾ï¼šæ—¢ç„¶æ–°åˆ†é…çš„å†…å­˜ä¿ç•™äº†å…¶å…ˆå‰ä½¿ç”¨çš„å…§å®¹ï¼Œé‚£ä¹ˆattackä¹Ÿç”³è¯·å†…å­˜ï¼Œåœ¨å…¶ä¸­çš„æŸä¸€é¡µä¸­çš„32ä¸ªåç§»å¼€å§‹8å­—èŠ‚å°±ä¸€å®šæ˜¯ secrestã€‚
å…³é”®åœ¨äºï¼šå“ªä¸€é¡µï¼Ÿ
è¯´å®è¯ï¼Œæˆ‘çœŸæ˜¯ä¸‡ç­–å°½çŸ£ï¼Œæ— è®ºæ˜¯æ‰“å°ç”³è¯·çš„æ¯ä¸€é¡µå¼€å¤´40å­—èŠ‚ï¼Œè¿˜æ˜¯ç”¨å‰ç¼€å­—ç¬¦æ¥æ¯”è¾ƒï¼ˆè¿™ä¸ªç”šè‡³è¯¡å¼‚å¾—ä¸€å¡Œç³Šæ¶‚ï¼šattackç”³è¯·åé‚£ä¸€å­˜ç€secretçš„é¡µå¼€å¤´2å­—èŠ‚æ˜¯ä¹±ç ï¼‰ï¼Œéƒ½ä¸€ä¸€å¤±è´¥äº†ğŸ˜­ã€‚
æœ€åæ˜¯åœ¨ä¸å¾—å·²ï¼Œå»githubä¸Šæ‰¾åˆ°äº†å‚è€ƒï¼šç”³è¯·32é¡µçš„ç¬¬16é¡µã€‚
ä»¥ä¸‹æ˜¯ä½œè€…çš„åŸè¯ï¼šä¸èƒ½ç†è§£ï¼è¿™ä¸ª16æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿï¼Ÿ
ï¼ˆæˆ‘ä¹Ÿä¸èƒ½ç†è§£ã€‚ã€‚ã€‚ï¼‰
3. pgtbl labç¬¬3ç« æ˜¯æˆ‘ç›®å‰ä¸ºæ­¢xv6ä¸­åšè¿‡çš„æœ€ç—›è‹¦çš„å®éªŒäº†ğŸ˜­,æˆ‘çœŸèŠ±äº†ä¸¤ä¸‰å¤©æ—¶é—´åšè¿™ä¸ªã€‚å°¤å…¶æ˜¯æœ€åä¸€ä¸ªè¶…çº§å—çš„éƒ¨åˆ†ï¼Œæˆ‘æäº†çº¦14ä¸ªå°æ—¶ï¼Œæ‰è¿‡æµ‹è¯•ã€‚ã€‚ã€‚
3.1 ugetpidè¿™ä¸ªé¢˜ç›®çš„éš¾ç‚¹ã€‚ã€‚ã€‚åœ¨äºçœ‹ä¸æ‡‚é¢˜ç›®ï¼Œæ‰¾ä¸åˆ°è¯¥åœ¨å“ªé‡Œå†™ä»€ä¹ˆï¼ˆbushiï¼‰ã€‚
ä½†å…¶å®ä¹Ÿå¾ˆç®€å•ï¼šåœ¨ç”¨æˆ·ç©ºé—´é‡Œæ‹¿ä¸€é¡µç©ºé—´ USYSCALLå­˜ usyscallï¼Œusyscallæ¥å­˜ä¸€äº›ä¸œè¥¿ï¼ˆè¿™é‡Œæ˜¯ getpid()ï¼‰procå®šä¹‰é‡Œæ·»åŠ å®ƒçš„åœ°å€ï¼Œallocproc freeproc proc_pagetable proc_freepagetableè¿™äº›ä¸è¿›ç¨‹å†…å­˜åˆ†é…é‡Šæ”¾çš„å‡½æ•°é‡Œé¢ä¹Ÿç±»ä¼¼åœ°åŠ ä¸Šå¤„ç† USYSCALLçš„éƒ¨åˆ†å³å¯ã€‚
ä½†æ˜¯æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼šå…³äº USYSCALLé¡µâ€user can access but read onlyâ€.
3.2 vmprintè¿™ä¸ªçš„å…³é”®ç‚¹åœ¨äºï¼Œææ¸…æ¥šè™šæ‹Ÿé¡µå’Œå¯¹åº”çš„ä¸‰çº§é¡µè¡¨ã€‚

å¦‚æœPTEå¶åœ¨0çº§é¡µè¡¨ä¸Šï¼Œåˆ™å¯¹åº”çš„è™šæ‹Ÿé¡µç›¸å¯¹äºåˆå§‹è™šæ‹Ÿé¡µçš„åç§»æ˜¯åœ¨30~38ä½ä¸Šï¼›
å¦‚æœPTEå¶åœ¨1çº§é¡µè¡¨ä¸Šï¼Œåˆ™å¯¹åº”çš„è™šæ‹Ÿé¡µç›¸å¯¹äºåˆå§‹è™šæ‹Ÿé¡µçš„åç§»æ˜¯åœ¨21~29ä½ä¸Šï¼›
å¦‚æœPTEå¶åœ¨2çº§é¡µè¡¨ä¸Šï¼Œåˆ™å¯¹åº”çš„è™šæ‹Ÿé¡µç›¸å¯¹äºåˆå§‹è™šæ‹Ÿé¡µçš„åç§»æ˜¯åœ¨12~20ä½ä¸Šã€‚

ï¼ˆPTEå¶æŒ‡çš„æ˜¯æœ‰æ•ˆçš„ï¼Œä¸”ä¸è¡¨ç¤ºä¸‹ä¸€çº§é¡µè¡¨çš„pteé¡¹ï¼‰
3.3 super blockå¤ªå›°éš¾äº†ï¼å¤ªå›°éš¾äº†ï¼ğŸ˜­
æˆ‘æœ€åç”šè‡³ä¹Ÿæ˜¯é’»äº†ç©ºå­ï¼ˆæˆ‘ç•™äº†10ä¸ªè¶…çº§å—ï¼Œè€Œæµ‹è¯•æœ€å¤šç”¨8ä¸ªè¶…çº§å—ï¼‰æ‰è¿‡çš„ã€‚
é¢˜ç›®çš„æ€è·¯å¾ˆæ¸…æ™°ï¼šç•™å‡ ä¸ªâ€super blockâ€ä½¿å¾—ç”³è¯·å¤§å†…å­˜ç©ºé—´æ—¶ä¸æ˜¯ç»™ä»–å¾ˆå¤šä¸ªå°é¡µè€Œæ˜¯ç»™ä»–å‡ ä¸ªè¶…çº§å—ã€‚é‚£ä¹ˆï¼Œåªè¦åœ¨ç®¡ç†åˆ†é…é¡µçš„æ•°æ®ç»“æ„ä¸­æ·»åŠ è¶…çº§é¡µå¹¶ç»™å®ƒä»¬æ ‡å¿—ï¼Œå¹¶åœ¨å¤„ç†é¡µçš„ç”³è¯·é‡Šæ”¾çš„å‡½æ•°ä¸­ç±»ä¼¼åœ°åŠ ä¸Šç›¸åº”å¤„ç†é€»è¾‘å³å¯ã€‚
ä½†æ˜¯ï¼ï¼ï¼æœ‰ä¸€äº›å‘ï¼

å½“åœ°å€æœªå¯¹é½æ—¶ï¼Œæ™®é€šé¡µå¯ä»¥ç›´æ¥ PGROUNDUPå¯¹é½ã€‚ä½†è¶…çº§é¡µä¸èƒ½ç±»æ¯”ï¼å¦‚æœç›´æ¥SUPERPGROUNDUPå†åˆ†é…è¶…çº§å—çš„è¯ï¼Œä¼šå¯¼è‡´å†…å­˜åœ°å€ç©ºé—´å‡ºç°â€œç©ºéš™â€ï¼Œpanic(â€œuvmcopy: page not presentâ€)ã€‚æ‰€ä»¥ä¸ºäº†é˜²æ­¢è¿™ä¸ªé—®é¢˜ï¼Œè¦å…ˆé€šè¿‡åˆ†é…æ™®é€šå—çš„æ–¹å¼è¿›è¡Œå¯¹é½ã€‚
è¶…çº§é¡µå¿…é¡»æ˜¯åœ¨ç¬¬1çº§é¡µè¡¨ä¸Šçš„pteè¡¨ç¤ºï¼Œè€Œä¸æ˜¯æ™®é€šé¡µçš„ç¬¬0çº§ã€‚å› ä¸ºè¶…çº§é¡µ2MBï¼Œæ™®é€šé¡µ4KBï¼Œä¸€ä¸ªç¬¬1çº§é¡µè¡¨ä¸Šçš„pteè¡¨ç¤º512ä¸ªç¬¬0çº§pteâ€”â€”â€”â€”ç¬¬1çº§çš„pteè¡¨ç¤º2MBã€‚

4. trap lab4.1 backtraceè¿™é¢˜ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç…§ç€è¿™ä¸ªç¬”è®°ä¸Šå…³äºæ ˆå¸§å¸ƒå±€çš„ç¤ºæ„å›¾å†™ä»£ç å¹¶æ‰“å°å³å¯ã€‚
4.2 alarmè™½æ˜¯ çº¢ é¢˜ï¼Œä½†æˆ‘è§‰å¾—æ¯” pgtblé‚£é“ è“ é¢˜è¶…çº§å—ç®€å•å¾—å¤šã€‚ã€‚ã€‚
äº‹å®ä¸Šï¼Œè·Ÿç€hintsä¸€æ­¥æ­¥åšå°±å¥½ï¼Œåªæ˜¯è¦æ³¨æ„ï¼šåœ¨è¿›å…¥handlerå‡½æ•°æ—¶ï¼Œæ—¶é’Ÿè®¡æ•°å¹¶ä¸ä¼šè‡ªç„¶åœæ­¢ï¼Œæˆ‘ä»¬è¯¥åœ¨ procé¢å¤–è®¾ç½®ä¸€ä¸ªå±æ€§æ¥åˆ¤æ–­å½“å‰æ˜¯å¦å¤„äºhandlerä¸­ã€‚
è€Œä¸”ï¼Œä¸ºäº†æ¢å¤ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬è¿˜åº”è¯¥è®¾ä¸€ä¸ªç»“æ„ä½“å±æ€§ä½œä¸ºå¤‡ä»½ï¼Œæ¥å­˜è¿›å…¥handlerä¹‹å‰çš„trapframeçš„æ‰€æœ‰å†…å®¹ã€‚
5. cow labè¿™ä¸ªå®éªŒä¹ŸæŒºã€‚ã€‚ã€‚å…ˆæ˜¯filetestæ­»æ´»è¿‡ä¸äº†ï¼ŒèŠ±äº†æˆ‘å‡ ä¸ªå°æ—¶æ‰¾bugï¼Œç„¶åæŠŠbugä¸€æ”¹ï¼Œå˜¿ï¼æ‚¨çŒœæ€ä¹ˆç€ï¼Ÿthreetestä¹Ÿè¿‡ä¸äº†äº†ğŸ¤£ã€‚æœ€åæ‰¾äº†ä¸¤ä¸ªå¤šå°æ—¶æ‰æ‰¾åˆ°åŸæ¥æ˜¯ kfreeè¿™è¾¹çš„é—®é¢˜ã€‚
åšæ³•å…¶å®ä¹Ÿæ˜¯è·Ÿç€hintsä¸€æ­¥æ­¥æ¥ï¼Œï¼ˆæ³¨æ„trapè¦å¤„ç†çš„æ˜¯  r_scause()==15çš„æƒ…æ™¯ï¼‰åªæ˜¯è¿˜æ˜¯æœ‰å‘ï¼š
ç”±äºæˆ‘æŠŠå‡å¼•ç”¨è®¡æ•°çš„é€»è¾‘ä¸kfreeå†™ä¸€èµ·çš„ï¼Œæ‰€ä»¥æˆ‘å¤©çœŸçš„ä»¥ä¸ºåªéœ€è¦å¼€å§‹å‡å¼•ç”¨è®¡æ•°æ—¶å’Œæœ«å°¾æ›´æ–° freelistæ‰éœ€è¦åŠ é”ï¼Œè€Œä¸­é—´æ˜¯ä¸ç”¨é”çš„ã€‚ç„¶å kerneltrapç»™æˆ‘ç‹ ç‹ ä¸Šäº†ä¸€è¯¾ã€‚ğŸ˜‚
æœ€åè¿˜å¾—åˆ«å¿˜äº†åœ¨ usetrapæ·»åŠ å¤„ç†è™šæ‹Ÿåœ°å€è¶…å‡ºæœ€å¤§å€¼æ—¶æ€æ­»è¿›ç¨‹çš„é€»è¾‘ï¼Œå¦åˆ™ usertests -qè¿‡ä¸äº†ã€‚ğŸ¤£
6. æ„Ÿè°¢
MITçš„cs6.828ä»¥åŠxv6-labsçš„è®¾è®¡è€…ä»¬ï¼Œæ„Ÿè°¢ä»–ä»¬æä¾›å¦‚æ­¤ä¼˜è´¨çš„é¡¹ç›®ã€‚è™½ç„¶å†™çš„æ—¶å€™å¾ˆç—›è‹¦ğŸ˜‚ä½†ç¡®å®æˆ‘æ„Ÿåˆ°è‡ªå·±å¯¹äºCè¯­è¨€å’Œæ“ä½œç³»ç»Ÿçš„ç†è§£ä¸è®¤è¯†æœ‰æ‰€æ·±å…¥ã€‚
siriusyaozï¼Œåœ¨åšå®éªŒçš„æ—¶å€™ï¼Œä½ çš„å…³äºè¿™ä¸ªå®éªŒçš„ä»£ç ç»™äºˆäº†æˆ‘å¾ˆå¤šå¯å‘ğŸ¥¹ã€‚

]]></content>
      <categories>
        <category>2024-xv6-labs</category>
      </categories>
      <tags>
        <tag>C</tag>
        <tag>Projects</tag>
        <tag>Operating System</tag>
        <tag>2024-xv6-labs</tag>
      </tags>
  </entry>
  <entry>
    <title>250824 thinking å•ä¾‹æ¨¡å¼</title>
    <url>/2025/08/24/250824-thinking-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[1. ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿå•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹æ¥è®¿é—®è¯¥å®ä¾‹ã€‚
2. ä¸ºä»€ä¹ˆéœ€è¦å•ä¾‹æ¨¡å¼ï¼Ÿåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¤šä¸ªçº¿ç¨‹ä½¿ç”¨åŒä¸€ä»½èµ„æºã€‚
2.1 ä¸ºä»€ä¹ˆä¸ä½¿ç”¨å…¨å±€å˜é‡ï¼Ÿåœ¨ä¸€äº›è¾ƒä¸ºç®€å•çš„ç¯å¢ƒä¸­ï¼Œç›´æ¥ä½¿ç”¨ä¸€äº›å…¨å±€å˜é‡ä¾›æ‰€æœ‰çº¿ç¨‹ä½¿ç”¨æ˜¯å¾ˆå¥½çš„ã€‚
ä½†æ˜¯ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡æ˜¯èµ„æºå¯†é›†å‹çš„ï¼Œä½¿ç”¨å…¨å±€å˜é‡ä¼šå¯¼è‡´èµ„æºçš„æµªè´¹ã€‚è€Œä¸”ï¼Œç®€å•çš„å…¨å±€å˜é‡æ²¡æœ‰æä¾›è®¿é—®æ§åˆ¶ï¼ˆå°è£…ï¼‰ï¼Œçº¿ç¨‹å¯ä»¥ä»»æ„åœ°è®¿é—®å’Œä¿®æ”¹ã€‚
è€Œå•ä¾‹æ¨¡å¼å°±å¯ä»¥å®ç°æŒ‰éœ€åˆ›å»ºå®ä¾‹ï¼Œé¿å…äº†èµ„æºçš„æµªè´¹ã€‚è€Œä¸”æä¾›äº†ç±»å°è£…ï¼Œç¡®ä¿ä¸ä¼šæœ‰æ„å¤–çš„ä¿®æ”¹ã€‚
3. å•ä¾‹æ¨¡å¼çš„å®ç°ï¼ˆC++ï¼‰è¿™å…¶å®ä½“ç°äº†ä¸€ç§staticå…³é”®å­—çš„å¦™ç”¨ã€‚
class Singleton &#123;public:    static Singleton* getInstance() &#123;        static Singleton instance;        return &amp;instance;    &#125;    //...other public interface ...private:    Singleton() &#123;&#125;    //...other members&#125;;//...existing code ...auto instance = Singleton::getInstance();// ... call public interface ...

ç±»å›¾ï¼š

    classDiagram
    class Singleton {
        +getInstance() Singleton
    }
  

3.1 çº¿ç¨‹å®‰å…¨C++11 Â§6.7 (stmt.dcl) è§„å®šï¼š

If control enters the declaration concurrently while the variable is being initialized, the concurrent execution shall wait for completion of the initialization.

å‡½æ•°ä½œç”¨åŸŸå†…çš„å±€éƒ¨é™æ€å˜é‡çš„åˆå§‹åŒ–æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚
3.2 æ‡’åŠ è½½ç”±äºstaticå…³é”®å­—çš„ç‰¹æ€§ï¼Œå®ä¾‹æ˜¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨getInstance()æ—¶æ‰åˆ›å»º, ä¹‹åçš„è°ƒç”¨éƒ½åªæ˜¯è¿”å›å·²æœ‰çš„å®ä¾‹ã€‚
]]></content>
      <categories>
        <category>Design Pattern</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>Object Oriented Programming</tag>
        <tag>Design Pattern</tag>
        <tag>Singleton Pattern</tag>
      </tags>
  </entry>
  <entry>
    <title>250824 thinking äºŒå‰æ ‘éå†çš„è¿­ä»£æ³•</title>
    <url>/2025/08/24/250824-thinking-%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86%E7%9A%84%E8%BF%AD%E4%BB%A3%E6%B3%95/</url>
    <content><![CDATA[å…³äºäºŒå‰æ ‘çš„éå†ï¼Œæœ‰é€’å½’æ³•å’Œè¿­ä»£æ³•ä¸¤ç§ã€‚é€’å½’æ³•ç®€å•æ˜“æ‡‚ï¼Œä½†æ˜¯è¿­ä»£æ³•è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦ä½¿ç”¨æ ˆæ¥æ¨¡æ‹Ÿé€’å½’çš„è¿‡ç¨‹ã€‚
è¿™é‡Œä»¥â€œå°†äºŒå‰æ ‘æŒ‰æŸç§é¡ºåºéå†è¾“å‡ºâ€ä¸ºä¾‹ï¼Œä»‹ç»è¿­ä»£æ³•çš„å®ç°ã€‚
å…³é”®åœ¨äºç†è§£æŸä¸ªèŠ‚ç‚¹è¾“å‡ºçš„æ—¶æœºã€‚
1. å‰åºéå†
å…ˆè¾“å‡ºï¼Œå†å°†å·¦å­èŠ‚ç‚¹å…¥æ ˆã€‚æ²¡æœ‰å·¦å­èŠ‚ç‚¹äº†ï¼Œæ‰è€ƒè™‘å³å­èŠ‚ç‚¹çš„å…¥æ ˆã€‚

vector&lt;int&gt; preorderTraversal(TreeNode* root) &#123;        vector&lt;int&gt; ans;        stack&lt;TreeNode*&gt; stk;        while(!stk.empty() || root!=nullptr)&#123;            while(root!=nullptr)&#123;                ans.push_back(root-&gt;val);                stk.emplace(root);                root=root-&gt;left;            &#125;            root=stk.top()-&gt;right;            stk.pop();        &#125;        return ans;    &#125;

2. ä¸­åºéå†
å…ˆå°†å·¦å­èŠ‚ç‚¹å…¥æ ˆï¼Œæ²¡æœ‰å·¦å­èŠ‚ç‚¹äº†ï¼Œæ‰è¾“å‡ºå½“å‰èŠ‚ç‚¹ï¼Œç„¶åè€ƒè™‘å³å­èŠ‚ç‚¹çš„å…¥æ ˆã€‚

vector&lt;int&gt; inorderTraversal(TreeNode* root) &#123;        vector&lt;int&gt; ans;        stack&lt;TreeNode*&gt; stk;        while(!stk.empty() || root!=nullptr)&#123;            while(root!=nullptr)&#123;                stk.emplace(root);                root=root-&gt;left;            &#125;            root=stk.top();            stk.pop();            ans.push_back(root-&gt;val);            root=root-&gt;right;        &#125;        return ans;    &#125;

3. ååºéå†
å…ˆå°†å·¦å­èŠ‚ç‚¹å…¥æ ˆï¼Œæ²¡æœ‰å·¦å­èŠ‚ç‚¹äº†ï¼Œæ‰è€ƒè™‘å³å­èŠ‚ç‚¹çš„å…¥æ ˆã€‚å¦‚æœå³å­èŠ‚ç‚¹ä¹Ÿæ²¡æœ‰äº†ï¼Œæ‰è¾“å‡ºå½“å‰èŠ‚ç‚¹ã€‚


éš¾ç‚¹ï¼šå¦‚ä½•åˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹æ˜¯å¦å·²ç»éå†è¿‡äº†ï¼Ÿ


ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆprevæ¥è®°å½•ä¸Šä¸€ä¸ªéå†çš„èŠ‚ç‚¹ã€‚
å¦‚æœå½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ä¸ºç©ºï¼Œæˆ–è€…å³å­èŠ‚ç‚¹å·²ç»éå†è¿‡äº†ï¼Œæ‰è¾“å‡ºå½“å‰èŠ‚ç‚¹ã€‚
å¦åˆ™ï¼Œå°†å³å­èŠ‚ç‚¹å…¥æ ˆï¼Œç„¶åè€ƒè™‘å·¦å­èŠ‚ç‚¹çš„å…¥æ ˆã€‚

vector&lt;int&gt; postorderTraversal(TreeNode* root) &#123;        vector&lt;int&gt; ans;        stack&lt;TreeNode*&gt;stk;        TreeNode* prev=nullptr;        while(!stk.empty()||root!=nullptr)&#123;            while(root!=nullptr)&#123;                stk.emplace(root);                root=root-&gt;left;            &#125;            root=stk.top();            if(root-&gt;right==nullptr || root-&gt;right==prev)&#123;                ans.push_back(root-&gt;val);                prev=root;                stk.pop();                root=nullptr; // è¿™é‡Œå¾ˆé‡è¦ï¼å¦åˆ™ä¼šå› ä¸ºrootä¸ä¸ºç©ºè€Œâ€œå…¥æ ˆ-å‡ºæ ˆâ€æ— é™å¾ªç¯            &#125;            else&#123;                root=root-&gt;right;            &#125;        &#125;        return ans;    &#125;

]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>data structure &amp; algorithm</tag>
        <tag>Binary Tree</tag>
      </tags>
  </entry>
  <entry>
    <title>250926 thinking 0-1èƒŒåŒ…dp</title>
    <url>/2025/09/26/250926-thinking-0-1%E8%83%8C%E5%8C%85dp/</url>
    <content><![CDATA[æœ¬æ–‡çš„å†…å®¹æ˜¯0-1èƒŒåŒ…çš„ç©ºé—´ä¼˜åŒ–ã€å€’åºéå†ï¼Œä»¥åŠè‡³å¤š&#x2F;æ°å¥½&#x2F;è‡³å°‘å˜ä½“ã€‚ä¸€äº›åŸºæœ¬æ¦‚å¿µä¸å†èµ˜è¿°ã€‚
1. ç©ºé—´ä¼˜åŒ–ç”±äºå®ƒçš„é€’æ¨è¡¨è¾¾å¼ï¼š
$$dp[i][c] &#x3D; \max{, dp[i-1][c],; dp[i-1][c-w[i]] + v[i] ,}$$
dp[i][c]: éå†åˆ°ç¬¬ i ä¸ªç‰©å“æ—¶ï¼Œè‹¥æ€»å®¹é‡ä¸º c æ—¶èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼
å¯ä»¥å‘ç°æ¯æ¬¡æ›´æ–°å€¼æ—¶ï¼Œéƒ½æ˜¯ i-1 æ›´æ–° i çš„ï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥å†™ä¸ºï¼š
$$dp[c] &#x3D; \max{, dp[c],; dp[c-w[i]] + v[i] ,}$$
2. å€’åºéå†åœ¨ä½¿ç”¨ä¸€ç»´æ•°ç»„è¿›è¡Œç©ºé—´ä¼˜åŒ–æ—¶ï¼Œå®¹é‡ c å¿…é¡»â€œå€’åºéå†â€ï¼ˆä»æœ€å¤§å®¹é‡ C é€’å‡åˆ° w[i]ï¼‰ã€‚
Why?

è‹¥æ­£åºéå†ï¼ˆc ä»å°åˆ°å¤§ï¼‰ï¼Œåœ¨åŒä¸€è½® i çš„æ›´æ–°ä¸­ï¼Œdp[c-w[i]] å·²ç»è¢«æœ¬è½® i æ›´æ–°è¿‡ï¼Œä¼šå¯¼è‡´åŒä¸€ç‰©å“ i è¢«å¤ç”¨å¤šæ¬¡ï¼Œç­‰ä»·æˆâ€œå®Œå…¨èƒŒåŒ…â€çš„æ•ˆæœï¼›
å€’åºéå†èƒ½ä¿è¯æœ¬è½®è®¡ç®—ä¾èµ–çš„æ˜¯â€œä¸Šä¸€è½® i-1 çš„ç»“æœâ€ï¼Œä»è€Œä¿æŒ 0-1 çº¦æŸã€‚

æ›´å½¢å¼åŒ–çš„è§£é‡Šï¼šç»´æŠ¤ä¸å˜å¼â€œåœ¨å¤„ç†ç‰©å“ i æ—¶ï¼Œæ‰€æœ‰ç”¨äºè®¡ç®—çš„ dp[*] å‡æ¥è‡ª i-1 çš„çŠ¶æ€â€ã€‚å€’åºä½¿å¾— dp[c-w[i]] åœ¨æœ¬è½®å°šæœªæ›´æ–°ï¼Œä»æ˜¯ i-1 çš„å€¼ã€‚
ä¸€ä¸ªåä¾‹ï¼ˆæ­£åºå¯¼è‡´å¤ç”¨ï¼‰ï¼šå®¹é‡ c = w[i] æ›´æ–°äº† dp[w[i]]ï¼Œéšå c = 2*w[i] åˆè¯»åˆ°åˆšæ›´æ–°è¿‡çš„ dp[w[i]]ï¼ŒæŠŠ i ç”¨äº†ä¸¤æ¬¡ã€‚
3. åˆå§‹åŒ–ä¸å˜ä½“æ ¹æ®ç›®æ ‡çº¦æŸä¸åŒï¼Œdp çš„åˆå§‹åŒ–ä¸è½¬ç§»è¾¹ç•Œéœ€è¦è°ƒæ•´ï¼š

0-1 èƒŒåŒ…ï¼ˆè‡³å¤šå®¹é‡ Cï¼‰ï¼š

åˆå§‹åŒ–ï¼šdp[0..C] = 0ï¼›
è½¬ç§»ï¼šå€’åº for c = C..w[i]ï¼Œdp[c] = max(dp[c], dp[c - w[i]] + v[i])ï¼›
ç»“æœï¼šmax(dp[0..C])ï¼Œå¸¸è§„é¢˜é€šå¸¸å– dp[C]ã€‚


æ°å¥½å®¹é‡çš„æ–¹æ¡ˆæ•°ï¼ˆè®¡æ•°é—®é¢˜ï¼‰ï¼š

ç›®æ ‡ï¼šé€‰æ‹©è‹¥å¹²ä»¶ç‰©å“ä½¿æ€»å®¹é‡æ°å¥½ä¸º C çš„å­é›†æ•°ï¼ˆä¸è®¡é¡ºåºï¼‰ã€‚
åˆå§‹åŒ–ï¼šdp[0] = 1ï¼Œå…¶ä½™ dp[1..C] = 0ï¼›
è½¬ç§»ï¼ˆå€’åºï¼‰ï¼šdp[c] += dp[c - w[i]]ï¼›
æ³¨æ„ï¼šå€’åºæ˜¯ 0-1 è¯­ä¹‰ï¼ˆæ¯ä»¶ç‰©å“è‡³å¤šç”¨ä¸€æ¬¡ï¼‰ï¼›è‹¥å†™æˆæ­£åºä¼šå˜æˆâ€œåºåˆ—è®¡æ•°&#x2F;å¯é‡å¤ä½¿ç”¨â€ï¼Œè¯­ä¹‰é”™è¯¯ã€‚


è‡³å°‘å®¹é‡ï¼ˆat least Cï¼‰ï¼š

ä¸¤ç§åšæ³•ï¼š
æŠŠç­”æ¡ˆå®šä¹‰ä¸ºè¾¾åˆ°â€œä»»æ„ c &gt;&#x3D; Câ€çš„æœ€å¤§ä»·å€¼ï¼Œéå†æ‰€æœ‰ c&gt;&#x3D;C çš„ dpï¼›
é€šè¿‡å®¹é‡æˆªæ–­&#x2F;åç§»æ„é€ è¾…åŠ©æ•°ç»„ï¼ˆå¦‚æœé¢˜ç›®æœ‰é¢å¤–ç»“æ„ï¼Œæœ‰æ—¶æ›´é«˜æ•ˆï¼‰ã€‚


å¸¸è§å®ç°ï¼šä»æŒ‰è‡³å¤šå®¹é‡çš„è½¬ç§»ï¼Œæœ€ç»ˆå– max(dp[C..C_max])ã€‚



4. ä¾‹é¢˜3685. å«ä¸Šé™å…ƒç´ çš„å­åºåˆ—å’Œ

å¯¹ nums å‡åºæ’åºï¼Œåˆ†å±‚å¤„ç†â€œå€¼ä¸º x çš„å…ƒç´ â€ã€‚è¿™æ ·å½“æˆ‘ä»¬å¤„ç†åˆ° x æ—¶ï¼Œdp ä¸­åŒ…å«äº†â€œæ‰€æœ‰å°äºç­‰äº x çš„åŸå§‹å…ƒç´ â€çš„å­é›†å’Œå¯è¾¾æ€§ã€‚ ç»´æŠ¤ä¸€ä¸ªå¸ƒå°” bitset dpï¼Œdp[s]&#x3D;1 è¡¨ç¤ºå’Œ s å¯è¾¾ï¼›æ’å…¥ä¸€ä¸ªå€¼ v æ—¶åš dp |&#x3D; (dp &lt;&lt; v)ã€‚å¤§äº x çš„å…ƒç´ éƒ½è¢« cap æˆ xï¼Œå‰©ä½™æ•°é‡ remain &#x3D; n - curã€‚æ£€æŸ¥æ˜¯å¦å­˜åœ¨ 0 â‰¤ i â‰¤ min(remain, âŒŠk&#x2F;xâŒ‹) ä½¿å¾— dp[k - i*x] ä¸ºçœŸã€‚

func subsequenceSumAfterCapping(nums []int, k int) []bool &#123;	slices.Sort(nums)	n := len(nums)	ans := make([]bool, n)	// f[s]==1 è¡¨ç¤ºå’Œ s å¯è¾¾	f := big.NewInt(1)	// æ©ç  u = (1&lt;&lt;(k+1)) - 1ï¼Œç¡®ä¿ä½é•¿ &lt;= k+1	u := new(big.Int).Lsh(big.NewInt(1), uint(k+1))	u.Sub(u, big.NewInt(1))	// å¤ç”¨ä¸€ä¸ªä¸´æ—¶ big.Intï¼Œé¿å…æ¯æ¬¡ newï¼ˆå¾®ä¼˜åŒ–ï¼‰	var t big.Int	i := 0	for x := 1; x &lt;= n; x++ &#123;		// æ’å…¥æ‰€æœ‰å€¼ç­‰äº x çš„åŸå§‹å…ƒç´ ï¼šf |= f &lt;&lt; x		for i &lt; n &amp;&amp; nums[i] == x &#123;			t.Lsh(f, uint(nums[i])) // t = f &lt;&lt; v			f.Or(f, &amp;t)             // f |= t			f.And(f, u)             // æˆªæ–­åˆ° k+1 ä½			i++		&#125;		// å¤§äº x çš„éƒ¨åˆ†éƒ½è¢« cap æˆ xï¼Œæœ€å¤šè¿˜èƒ½å– j = min(n-i, k/x) ä¸ª		limit := n - i		if k/x &lt; limit &#123;			limit = k / x		&#125;		ok := false		for j := 0; j &lt;= limit; j++ &#123;			// target &gt;= 0 æ’æˆç«‹ï¼Œå› ä¸º j &lt;= k/x			if f.Bit(k-j*x) == 1 &#123;				ok = true				break			&#125;		&#125;		ans[x-1] = ok	&#125;	return ans&#125;






]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>data structure &amp; algorithm</tag>
        <tag>dynamic programming</tag>
        <tag>0-1 bag dp</tag>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>250824 thinking åŸƒæ°ç­›</title>
    <url>/2025/08/24/250824-thinking-%E5%9F%83%E6%B0%8F%E7%AD%9B/</url>
    <content><![CDATA[åŸƒæ°ç­›æ˜¯ä¸€ç§ç®€å•çš„ç­›æ³•ï¼Œç”¨äºæ±‚å°äºç­‰äºnçš„æ‰€æœ‰è´¨æ•°ã€‚
æµç¨‹Prime(n):    mark i from 2 to n as prime (initial)    for i from 2 to n:            if i is marked as prime:                for j from i^2 to n with step i:                    mark j as not prime    return all marked primes

è§£é‡Šï¼š
ä¸ºä»€ä¹ˆæ˜¯ä»$i^2$å¼€å§‹æ ‡è®°éè´¨æ•°ï¼Ÿ
å› ä¸ºå¦‚æœä¸€ä¸ªæ•°ä¸æ˜¯è´¨æ•°ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæœ‰ä¸€ä¸ªå°äºç­‰äº$\sqrt{n}$çš„è´¨å› å­ã€‚
æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦ä»$i^2$å¼€å§‹æ ‡è®°ï¼Œå› ä¸ºå°äº$i^2$çš„æ•°ï¼Œä¸€å®šå·²ç»è¢«å°äº$i$çš„æ•°æ ‡è®°è¿‡äº†ã€‚



]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>data structure &amp; algorithm</tag>
        <tag>mathematics</tag>
        <tag>sieve of Eratosthenes</tag>
      </tags>
  </entry>
  <entry>
    <title>250824 thinking çŠ¶å‹dp</title>
    <url>/2025/08/24/250824-thinking-%E7%8A%B6%E5%8E%8Bdp/</url>
    <content><![CDATA[çŠ¶å‹dpä½¿ç”¨äºŒè¿›åˆ¶æ•°æ¥è¡¨ç¤ºçŠ¶æ€ï¼Œå°†å½“å‰å·²é€‰å…ƒç´ çš„é›†åˆè¡¨ç¤ºä¸ºä¸€ä¸ªäºŒè¿›åˆ¶æ•°ã€‚é€‚ç”¨äºéœ€è¦æšä¸¾æ¯ä¸€ç§æ’åˆ—è¿›è¡Œåˆ¤æ–­ã€ä¸”æœ€å¤§çš„$n$æœ‰$10&lt;n&lt;20$çš„é¢˜ç›®ã€‚çŠ¶å‹dpèƒ½ä½¿å¾—æ—¶é—´å¤æ‚åº¦ä»æš´åŠ›æœç´¢çš„$O(n!)$é™åˆ°$O(n*2^n)$(ç›¸é‚»æ— å…³)æˆ–è€…$O(n^2 * 2^n)$(ç›¸é‚»ç›¸å…³)ã€‚
è‹¥å½“å‰è¡¨ç¤ºå·²é€‰å…ƒç´ çš„é›†åˆçš„äºŒè¿›åˆ¶æ©ç ä¸ºmaskï¼Œåˆ™ï¼›

mask &amp;(1&lt;&lt;i) : è¡¨ç¤ºç¬¬iä¸ªå…ƒç´ æ˜¯å¦è¢«é€‰æ‹©
mask|(1&lt;&lt;i) : è¡¨ç¤ºå°†ç¬¬iä¸ªå…ƒç´ åŠ å…¥é›†åˆ
popcount(mask) : è¡¨ç¤ºé›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°

1. ç›¸é‚»æ— å…³å½“å‰ä½ç½®çš„é€‰æ‹©ä¸ä¾èµ–äºå‰ä¸€ä¸ªä½ç½®çš„é€‰æ‹©ï¼Œåªä¾èµ–äºå½“å‰å·²é€‰å…ƒç´ çš„é›†åˆã€‚
$dp[mask]$è¡¨ç¤ºçŠ¶æ€ä¸ºmaskçš„æƒ…å†µ(å³å·²ç»é€‰æ‹©çš„é›†åˆçš„äºŒè¿›åˆ¶æ©ç ä¸ºmask)ä¸‹çš„æœ€ä¼˜è§£ã€‚
1.1 ä¾‹é¢˜å‡è®¾æœ‰ä» 1 åˆ° n çš„ n ä¸ªæ•´æ•°ã€‚ç”¨è¿™äº›æ•´æ•°æ„é€ ä¸€ä¸ªæ•°ç»„ permï¼ˆä¸‹æ ‡ä» 1 å¼€å§‹ï¼‰ï¼Œåªè¦æ»¡è¶³ä¸‹è¿°æ¡ä»¶ ä¹‹ä¸€ ï¼Œè¯¥æ•°ç»„å°±æ˜¯ä¸€ä¸ª ä¼˜ç¾çš„æ’åˆ— ï¼š

perm[i] èƒ½å¤Ÿè¢« i æ•´é™¤
i èƒ½å¤Ÿè¢« perm[i] æ•´é™¤
1 &lt;&#x3D; n &lt;&#x3D; 15

ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›å¯ä»¥æ„é€ çš„ ä¼˜ç¾æ’åˆ— çš„ æ•°é‡ ã€‚
int countArrangement(int n) &#123;        vector&lt;int&gt; dp(1 &lt;&lt; n, 0);        dp[0] = 1;        for(int m = 0; m &lt; 1 &lt;&lt; n; ++m) &#123;            int l = popcount((unsigned) m);            ++l;            for(int j = 0; j &lt; n; ++j) &#123;                int p = j + 1;                if(!(m &amp; (1&lt;&lt;j)))&#123;                    if((l % p == 0)||(p % l == 0))&#123;                        dp[m | (1&lt;&lt;j)] += dp[m];                     &#125;                &#125;            &#125;        &#125;        return dp.back();    &#125;

2. ç›¸é‚»ç›¸å…³å½“å‰ä½ç½®çš„é€‰æ‹©ä¸ä»…ä¾èµ–äºå½“å‰å·²é€‰å…ƒç´ çš„é›†åˆï¼Œè¿˜ä¾èµ–äºå‰ä¸€ä¸ªä½ç½®çš„é€‰æ‹©ã€‚
$dp[mask][i]$è¡¨ç¤ºçŠ¶æ€ä¸ºmaskã€å‰ä¸€ä¸ªä½ç½®çš„é€‰æ‹©ä¸ºiçš„æƒ…å†µä¸‹çš„æœ€ä¼˜è§£ã€‚
2.1 ä¾‹é¢˜ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums ï¼Œå®ƒåŒ…å« n ä¸ª äº’ä¸ç›¸åŒ çš„æ­£æ•´æ•°ã€‚å¦‚æœ nums çš„ä¸€ä¸ªæ’åˆ—æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œæˆ‘ä»¬ç§°å®ƒæ˜¯ä¸€ä¸ªç‰¹åˆ«çš„æ’åˆ—ï¼š

å¯¹äº 0 &lt;&#x3D; i &lt; n - 1 çš„ä¸‹æ ‡ i ï¼Œè¦ä¹ˆ nums[i] % nums[i+1] &#x3D;&#x3D; 0 ï¼Œè¦ä¹ˆ nums[i+1] % nums[i] &#x3D;&#x3D; 0 ã€‚
2 &lt;&#x3D; nums.length &lt;&#x3D; 14
1 &lt;&#x3D; nums[i] &lt;&#x3D; 1e9

è¯·ä½ è¿”å›ç‰¹åˆ«æ’åˆ—çš„æ€»æ•°ç›®ã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·å°†å®ƒå¯¹ $10^9 + 7$ å–ä½™åè¿”å›ã€‚
int specialPerm(vector&lt;int&gt;&amp; nums) &#123;        const int mod = 1e9+7;        int n=nums.size();        vector&lt;vector&lt;int&gt;&gt;dp(1&lt;&lt;n,vector&lt;int&gt;(n,0));        for(int i=0;i&lt;n;++i)&#123;            dp[1&lt;&lt;i][i]=1;        &#125;        for(int m=0;m&lt;1&lt;&lt;n;++m)&#123;            for(int i=0;i&lt;n;++i)&#123;                if(m &amp; (1&lt;&lt;i))&#123;                    for(int j=0;j&lt;n;++j)&#123;                        if(!(m&amp;(1&lt;&lt;j)))&#123;                            if((nums[i]%nums[j]==0)||(nums[j]%nums[i]==0))&#123;                                dp[m|(1&lt;&lt;j)][j]=(dp[m|(1&lt;&lt;j)][j] + dp[m][i])%mod;                            &#125;                        &#125;                    &#125;                &#125;            &#125;        &#125;        int ans=0;        for(int i=0;i&lt;n;++i)&#123;            ans=(ans+dp[(1&lt;&lt;n)-1][i])%mod;        &#125;        return ans;    &#125;]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>data structure &amp; algorithm</tag>
        <tag>dynamic programming</tag>
        <tag>state compression</tag>
      </tags>
  </entry>
  <entry>
    <title>250926 thinking åæ‚”å †</title>
    <url>/2025/09/26/250926-thinking-%E5%8F%8D%E6%82%94%E5%A0%86/</url>
    <content><![CDATA[åæ‚”æ˜¯è´ªå¿ƒçš„ä¸€ç§ç­–ç•¥ï¼Œç”¨äºåœ¨å½“å‰å¯èƒ½ä¸æ˜¯å…¨å±€æœ€ä¼˜è§£æ—¶ï¼Œâ€œåæ€â€å·²åšè¿‡çš„é€‰æ‹©ã€‚
è€Œå¯¹äºè¿™æ ·çš„ç­–ç•¥ï¼Œå¸¸ä½¿ç”¨å †æ¥è¾…åŠ©å®ç°ã€‚å…·ä½“æ¥è¯´å°±æ˜¯å°†å·²åšçš„é€‰æ‹©æŒ‰ç…§æŸç§è§„åˆ™æ”¾å…¥æœ€å¤§å †ä¸­ã€‚â€œåæ‚”â€å°±æ˜¯â€œæ’¤é”€â€å †é¡¶çš„é€‰æ‹©ï¼Œå³ä»£ä»·æœ€å¤§çš„é€‰æ‹©ã€‚
ç”¨æœ€å¤§å †åœ¨çº¦æŸè§¦å‘æ—¶â€œæ’¤é”€&#x2F;æ›¿æ¢â€å½“å‰é›†åˆé‡Œæœ€å·®çš„é‚£ä¸ªå·²é€‰é¡¹ã€‚
1. ç¤ºä¾‹LCP30. é­”å¡”æ¸¸æˆ
magicTower(nums[0..n-1], hp)&#123;    declare a empty max heap, named heap.    ans := 0    for num in nums; do        if num &lt; 0; then            heap.push(num) // push the negative number into the heap, so that we can recover the choice later if needed        fi        hp += num        if hp &lt;= 0; then            if heap.isEmpty(); then //cannot recover                return -1            fi            ans++            hp -= heap.pop() // recover the smallest negative number, namely the most costly choice        fi    end    return ans&#125;]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>data structure &amp; algorithm</tag>
        <tag>greedy</tag>
        <tag>heap</tag>
        <tag>rollback</tag>
      </tags>
  </entry>
  <entry>
    <title>250926 thinking å­åºåˆ—åˆ¤æ–­</title>
    <url>/2025/09/26/250926-thinking-%E5%AD%90%E5%BA%8F%E5%88%97%E5%88%A4%E6%96%AD/</url>
    <content><![CDATA[1. ä»‹ç»å¼•ä¾‹ï¼šæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²tã€‚ç°æœ‰è‹¥å¹²å­—ç¬¦é›†åˆ$s_i$ï¼Œéœ€è¦åˆ¤æ–­å¯¹äºæ¯ä¸€ä¸ª$s_i$ï¼Œå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨tä¸­å‡ºç°ã€‚
ä¸€ç§æ–¹å¼æ˜¯ï¼Œå¯¹äºtä¸­çš„æ‰€æœ‰å­—ç¬¦å»ºç«‹ä¸€ä¸ªmapã€‚ç„¶åå¯¹äºä¸€ä¸ª$s_i$ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ cï¼Œè‹¥map[c]éƒ½åˆ¤æ–­ä¸ºå­˜åœ¨ï¼Œåˆ™$s_i$çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åœ¨tä¸­å‡ºç°ï¼Œå¦åˆ™ä¸æ˜¯ã€‚
ç°åœ¨å°†é—®é¢˜æ¢ä¸ºâ€œæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²tã€‚ç°æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²é›†åˆ$s$ï¼Œéœ€è¦åˆ¤æ–­å¯¹äºæ¯ä¸€ä¸ªå…ƒç´ $e_i$ï¼Œå®ƒæ˜¯å¦æ˜¯tçš„å­åºåˆ—ã€‚â€
è¿™ä¸ªæ—¶å€™ï¼Œä¸ä»…ä»…è¦è€ƒè™‘å­—ç¬¦çš„å­˜åœ¨ä¸å¦äº†ï¼Œè¿˜è¦è€ƒè™‘å­—ç¬¦ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»ã€‚
æ¯”æ–¹è¯´ï¼Œt=aaabbbï¼Œe=baã€‚åˆ¤æ–­eæ˜¯å¦æ˜¯tçš„å­åºåˆ—æ—¶ï¼Œæˆ‘ä»¬è¿˜è¦åˆ¤æ–­åœ¨tçš„båé¢çš„å…ƒç´ ä¸­æ˜¯å¦è¿˜æœ‰aã€‚
æˆ‘ä»¬ä½¿ç”¨çš„mapå¾—èƒ½å¤Ÿâ€œå±è”½â€åœ¨tçš„æŸä¸ªå…ƒç´ å‰é¢çš„æ‰€æœ‰å…ƒç´ çš„å­˜åœ¨æ€§ã€‚
äºæ˜¯ä½¿ç”¨nxtï¼Œnxt[i][c]: tä¸­ä¸‹æ ‡ä¸å°äºiçš„å…ƒç´ ä¸­å‡ºç°cçš„æœ€å°ä¸‹æ ‡ã€‚
2. è§£é‡Šå°†nxt[t.length][c]åˆå§‹åŒ–ä¸€ä¸ªå¾ˆå¤§çš„å€¼BIGï¼Œä½œä¸ºåˆ¤æ–­å­˜åœ¨ä¾æ®ã€‚
å…¶ä»–nxt[i][c]æ„å»ºï¼š
for i in t.length-1 to 0; do    copy nxt[i+1] to nxt[i]    nxt[i][t[i]] = iend loop

å¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²$e_i$åˆ¤æ–­:
idx := 0for c in e_i; do    idx = nxt[idx][c]    if idx == BIG; then        c does not exist in t[idx:]=&gt; e_i is not a substring of t.    else         idx++ # for next search should begin at idx+1    fiend loop

3. ä¾‹é¢˜åŒ¹é…å­åºåˆ—çš„å•è¯æ•°
ç»™å‡ºgoçš„è§£æ³•ç¤ºä¾‹
func numMatchingSubseq(s string, words []string) int &#123;    nxt := make([][26]int,len(s)+1)    for i := range nxt[len(s)]&#123;        nxt[len(s)][i] = 2147483647    &#125;    for i:=len(s)-1;i&gt;=0;i--&#123;        nxt[i] = nxt[i+1] //nxtæ˜¯æ•°ç»„çš„slice,nxt[i]æ˜¯æ•°ç»„ç±»å‹ã€‚æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œå¯ä»¥ç›´æ¥è¿™æ ·èµ‹å€¼        nxt[i][s[i]-&#x27;a&#x27;]=i    &#125;    ans := 0    for _,str := range words&#123;        idx := 0        for _,c := range str&#123;            idx = nxt[idx][c-&#x27;a&#x27;]            if(idx==2147483647)&#123;                ans--                break            &#125;            idx++        &#125;        ans++    &#125;    return ans&#125;
]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>data structure &amp; algorithm</tag>
        <tag>string</tag>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>250926 thinking å·®åˆ†</title>
    <url>/2025/09/26/250926-thinking-%E5%B7%AE%E5%88%86/</url>
    <content><![CDATA[1. ç®€ä»‹å¯¹äºä¸€ä¸ªæ•°ç»„aï¼Œæ„é€ çš„è¿™æ ·çš„ä¸€ä¸ªæ•°ç»„dç§°ä¸ºaçš„å·®åˆ†æ•°ç»„ï¼š

d[i] =
\begin{cases}
0, & \text{if } i = 0 \\
a[i] - a[i-1], & \text{otherwise}
\end{cases}


2. æ€§è´¨
å¯¹dæ„é€ å‰ç¼€å’Œæ•°ç»„å¾—åˆ°a
å¯¹äºaçš„ä¸€ä¸ªä¸‹æ ‡åŒºé—´[i,j)å¯¹åº”çš„å…ƒç´ ç»Ÿä¸€åŠ ä¸Šä¸€ä¸ªæ•°cåï¼Œåˆ™å¯¹åº”çš„dçš„å˜åŒ–ä¸ºï¼šd[i](now)=&gt;d[i](prev)+c d[j](now)=&gt;d[j](prev)-cã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œå·®åˆ†æ•°ç»„çš„æ„é€ å¯ä»¥å°†ä¸€ä¸ªåŒºé—´çš„å˜åŒ–æ˜ å°„ä¸ºä¸¤ä¸ªå…ƒç´ çš„å˜åŒ–ã€‚

åœ¨å®é™…æ“ä½œæ—¶ï¼Œè¿˜è¦æ³¨æ„j&#x3D;&#x3D;a.lengthï¼Œæ­¤æ—¶è¶…å‡ºdç´¢å¼•èŒƒå›´ï¼ˆå› ä¸ºåœ¨å‰é¢çš„æ„é€ ä¸­d.length&#x3D;&#x3D;a.lengthï¼‰ã€‚å› æ­¤ä¸ºäº†æ–¹ä¾¿ï¼Œé€šå¸¸è®©d.length&#x3D;a.length+1ï¼Œå³è®¾ç½®ä¸€ä¸ªdummyã€‚

3. ä¾‹é¢˜3355.é›¶æ•°ç»„å˜æ¢I
goå‚è€ƒè§£æ³•ï¼šï¼ˆby çµç¥ï¼‰
func isZeroArray(nums []int, queries [][]int) bool &#123;	diff := make([]int, len(nums)+1)	for _, q := range queries &#123;		diff[q[0]]++		diff[q[1]+1]--	&#125;	sumD := 0	for i, x := range nums &#123;		sumD += diff[i]		// æ­¤æ—¶ sumD è¡¨ç¤º x=nums[i] è¦å‡æ‰å¤šå°‘		if x &gt; sumD &#123; // x æ— æ³•å˜æˆ 0			return false		&#125;	&#125;	return true&#125;]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>data structure &amp; algorithm</tag>
        <tag>go</tag>
        <tag>difference</tag>
      </tags>
  </entry>
  <entry>
    <title>250926 thinking ç¿»è½¬é“¾è¡¨</title>
    <url>/2025/09/26/250926-thinking-%E7%BF%BB%E8%BD%AC%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[1. æ“ä½œä»¥è¿™é“é¢˜ä¸ºå®ä¾‹ã€‚
å¯¹é“¾è¡¨çš„æŸä¸€éƒ¨åˆ†è¿›è¡Œç¿»è½¬æ—¶ï¼Œéœ€è¦è®°å½•ä»¥ä¸‹è¿™å‡ ä¸ªèŠ‚ç‚¹ï¼š

p0: å‘ç”Ÿç¿»è½¬åŒºåŸŸçš„å‰ç½®èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†åŒºåŸŸç¿»è½¬åçš„è¿æ¥ï¼ˆå¾ªç¯ç»“æŸï¼Œp0.nextä¸ºç¿»è½¬ååŒºé—´çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ã€‚ä¸ºäº†ç»Ÿä¸€å¤„ç†ï¼ˆå› ä¸ºåŸé“¾è¡¨æœ‰çš„ç¿»è½¬åŒºåŸŸæ²¡æœ‰å‰ç½®èŠ‚ç‚¹ï¼‰ï¼Œå…ˆæ„é€ dummy=ListNode&#123;next: head&#125;ã€‚è¿™æ ·çš„è¯ï¼Œç¿»è½¬åçš„é“¾è¡¨çš„å¤´èŠ‚ç‚¹å³ä¸ºdummy.nextã€‚p0å¯èƒ½ä¸ºdummyã€‚
cur: å½“å‰éå†åˆ°çš„èŠ‚ç‚¹ï¼Œå¾ªç¯ç»“æŸï¼Œcurä¸ºåŒºåŸŸåçš„ç¬¬ä¸€ä¸ªå…ƒç´ 
pre: å½“å‰éå†åˆ°çš„èŠ‚ç‚¹çš„åŸé“¾è¡¨ä¸­çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨ç¿»è½¬åå°±æ˜¯nextã€‚åœ¨æœ€åˆç¿»è½¬å‰ä¸ºnullptr,å¾ªç¯ç»“æŸï¼Œpreä¸ºç¿»è½¬åçš„åŒºåŸŸçš„ç¬¬ä¸€ä¸ªå…ƒç´ 
nxt: å½“å‰éå†åˆ°çš„èŠ‚ç‚¹çš„åŸé“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸‹ä¸€ä¸ªcurï¼Œåœ¨ç¿»è½¬åå®ƒçš„nextå°±æ˜¯preã€‚

æ“ä½œå¦‚ä¸‹ï¼š
cur := p0.nextpre := nullptrfor cur in area; do    nxt := cur.next    cur.next = pre    pre = cur    cur = nxtend loop// one loop only change one &quot;next&quot;// end loop, cur is next node for this area at the timep0.next.next=cur // set next pointer of the reversed area&#x27;s last node  p0.next=pre // previous node&#x27;s next pointer points to the first node 

2. ä¾‹é¢˜25.kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨
è¿™ä¸ªé¢˜çš„æœ‰ä¸€ä¸ªå…³é”®ï¼šæ‰¾åˆ°æ¯ä¸€ä¸ªç¿»è½¬åŒºé—´çš„p0ã€‚å®ƒå®é™…å°±æ˜¯ä¸Šä¸€ä¸ªåŒºé—´æœªç¿»è½¬æ—¶çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
goç¤ºä¾‹è§£æ³•
/** * Definition for singly-linked list. * type ListNode struct &#123; *     Val int *     Next *ListNode * &#125; */func reverseKGroup(head *ListNode, k int) *ListNode &#123;    cnt := 0    for p:=head;p!=nil;p=p.Next&#123;        cnt++    &#125;    dummy := &amp;ListNode&#123;0,head&#125;    p0 := dummy    for ; cnt&gt;=k ; cnt-=k &#123;        cur := p0.Next        var pre *ListNode        nextp := p0.Next        for i:=0;i&lt;k;i++&#123;            nxt := cur.Next            cur.Next = pre            pre = cur            cur = nxt        &#125;        p0.Next.Next=cur        p0.Next = pre        p0=nextp    &#125;     return dummy.Next&#125;
]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>data structure &amp; algorithm</tag>
        <tag>go</tag>
        <tag>linkList</tag>
      </tags>
  </entry>
  <entry>
    <title>250928-251005 weekly electron</title>
    <url>/2025/10/05/250928-251005-weekly-electron/</url>
    <content><![CDATA[å°è¯•ä½¿ç”¨electronå°†Reactç”Ÿæˆçš„é™æ€ç½‘é¡µæ‰“åŒ…æˆæ¡Œé¢åº”ç”¨ã€‚
0. é¡¹ç›®ç»“æ„é™æ€ç½‘é¡µèµ„æºdiståº”å…ˆç§»åŠ¨åˆ°applicationé¡¹ç›®ä¸­ã€‚
.â”œâ”€â”€ applicationâ”‚   â”œâ”€â”€ package.jsonâ”‚   â””â”€â”€ main.jsâ”œâ”€â”€ dist|    â””â”€â”€ index.htmlâ””â”€â”€ web    â”œâ”€â”€ package.json    â”œâ”€â”€ vite.config.js    â”œâ”€â”€ src       â”œâ”€â”€ App.jsx       â””â”€â”€ components           â””â”€â”€ Navigation.jsx   

1. é¡¹ç›®åˆå§‹åŒ–ä¸å®‰è£…å‚è€ƒï¼šæ•™ç¨‹
ä½†æ˜¯åœ¨å®‰è£…æ—¶å‡ºç°é—®é¢˜ï¼Œæ˜¯ç½‘ç»œçš„åŸå› ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤åå®‰è£…ï¼Œè§£å†³ï¼š
npm config set registry https://registry.npmmirror.com; $env:ELECTRON_MIRROR = &quot;https://npmmirror.com/mirrors/electron/&quot;

åé¢è¿è¡Œå‘½ä»¤å‡ºç°ç½‘ç»œé—®é¢˜ä¹Ÿå¦‚æ­¤ã€‚
2. æ‰“åŒ…å¯¹webé¡¹ç›®ä½¿ç”¨npm run buildåç”Ÿæˆçš„é™æ€ç½‘é¡µè¿›è¡Œæ‰“åŒ…ã€‚
ä½†éœ€è¦æ³¨æ„ï¼š

Vite çš„æ„å»ºäº§ç‰©é»˜è®¤ä½¿ç”¨ä»¥ â€œ&#x2F;â€ å¼€å¤´çš„èµ„æºè·¯å¾„ï¼ˆå¦‚ &#x2F;assets&#x2F;â€¦ï¼‰ï¼Œåœ¨ Electron ä»¥ file:&#x2F;&#x2F; åŠ è½½æœ¬åœ°æ–‡ä»¶æ—¶ï¼Œè¿™ç§ç»å¯¹è·¯å¾„ä¼šè§£æåˆ°ç£ç›˜æ ¹ç›®å½•ã€‚å› æ­¤åº”è¯¥æ”¹ä¸ºï¼š

// vite.config.jsimport &#123; defineConfig &#125; from &#x27;vite&#x27;import react from &#x27;@vitejs/plugin-react&#x27;// https://vite.dev/config/export default defineConfig(&#123;  plugins: [react()],  base: &#x27;./&#x27;,&#125;)


åœ¨applicationé¡¹ç›®ä¸­ï¼Œæ–‡ä»¶åŠ è½½è·¯å¾„çš„å†™æ³•ã€‚

const &#123; app, BrowserWindow &#125; = require(&#x27;electron/main&#x27;)const path = require(&#x27;path&#x27;)const createWindow = () =&gt; &#123;  const win = new BrowserWindow(&#123;    width: 800,    height: 600  &#125;)    win.loadFile(path.join(__dirname, &#x27;..&#x27;, &#x27;dist&#x27;, &#x27;index.html&#x27;));&#125;app.whenReady().then(() =&gt; &#123;  createWindow()  app.on(&#x27;activate&#x27;, () =&gt; &#123;    if (BrowserWindow.getAllWindows().length === 0) &#123;      createWindow()    &#125;  &#125;)&#125;)app.on(&#x27;window-all-closed&#x27;, () =&gt; &#123;  if (process.platform !== &#x27;darwin&#x27;) &#123;    app.quit()  &#125;&#125;)

ä½†å³ä½¿æ˜¯è¿™æ ·ï¼Œè·¯ç”±ä¹Ÿä¼šå‡ºç°é—®é¢˜ã€‚å‘ç°æ˜¯ç”±äºsrcæºæ–‡ä»¶ä¸­React Routeræ²¡æœ‰é…ç½®å¥½ã€‚
æ›´æ–°åçš„src&#x2F;App.jsx:
import &#123; BrowserRouter, HashRouter, Routes, Route &#125; from &#x27;react-router-dom&#x27;import &#123; Container &#125; from &#x27;react-bootstrap&#x27;import Navigation from &#x27;./components/Navigation&#x27;import Home from &#x27;./pages/Home&#x27;import Books from &#x27;./pages/Books&#x27;import Borrowings from &#x27;./pages/Borrowings&#x27;import &#x27;bootstrap/dist/css/bootstrap.min.css&#x27;import &#x27;./App.css&#x27;const RouterComponent = window.location.protocol === &#x27;file:&#x27; ? HashRouter : BrowserRouterfunction App() &#123;  return (    &lt;RouterComponent&gt;      &lt;Navigation /&gt;      &lt;Container className=&quot;mt-3&quot;&gt;        &lt;Routes&gt;          &lt;Route path=&quot;/&quot; element=&#123;&lt;Home /&gt;&#125; /&gt;          &lt;Route path=&quot;/books&quot; element=&#123;&lt;Books /&gt;&#125; /&gt;          &lt;Route path=&quot;/borrowings&quot; element=&#123;&lt;Borrowings /&gt;&#125; /&gt;        &lt;/Routes&gt;      &lt;/Container&gt;    &lt;/RouterComponent&gt;  )&#125;export default App

åŒæ—¶åœ¨Navigationç»„ä»¶ä¸­ï¼Œæ³¨æ„LinkContainer åŒ…è£¹å“ç‰ŒåŒºï¼Œé¿å… file:&#x2F;&#x2F; ä¸‹ href&#x3D;â€&#x2F;â€œ çš„é—®é¢˜ã€‚
import &#123; Navbar, Nav, Container &#125; from &#x27;react-bootstrap&#x27;import &#123; LinkContainer &#125; from &#x27;react-router-bootstrap&#x27;function Navigation() &#123;  return (    &lt;Navbar bg=&quot;dark&quot; variant=&quot;dark&quot; expand=&quot;lg&quot;&gt;      &lt;Container&gt;        &lt;LinkContainer to=&quot;/&quot;&gt;          &lt;Navbar.Brand&gt;å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ&lt;/Navbar.Brand&gt;        &lt;/LinkContainer&gt;        &lt;Navbar.Toggle aria-controls=&quot;basic-navbar-nav&quot; /&gt;        &lt;Navbar.Collapse id=&quot;basic-navbar-nav&quot;&gt;          &lt;Nav className=&quot;me-auto&quot;&gt;            &lt;LinkContainer to=&quot;/&quot;&gt;              &lt;Nav.Link&gt;é¦–é¡µ&lt;/Nav.Link&gt;            &lt;/LinkContainer&gt;            &lt;LinkContainer to=&quot;/books&quot;&gt;              &lt;Nav.Link&gt;å›¾ä¹¦ç®¡ç†&lt;/Nav.Link&gt;            &lt;/LinkContainer&gt;            &lt;LinkContainer to=&quot;/borrowings&quot;&gt;              &lt;Nav.Link&gt;å€Ÿé˜…ç®¡ç†&lt;/Nav.Link&gt;            &lt;/LinkContainer&gt;          &lt;/Nav&gt;        &lt;/Navbar.Collapse&gt;      &lt;/Container&gt;    &lt;/Navbar&gt;  )&#125;export default Navigation

å†é‡æ–°npm run buildç”Ÿæˆé™æ€ç½‘é¡µ, å¹¶å°†distç›®å½•ç§»åŠ¨åˆ°applicationé¡¹ç›®ä¸­ã€‚
]]></content>
  </entry>
  <entry>
    <title>251003 thinking factory method&amp; abstract factory</title>
    <url>/2025/10/03/251003-thinking-factory-method-abstract-factory/</url>
    <content><![CDATA[1. å·¥å‚æ–¹æ³•ä»¥ç‚¹èœä¸ºä¾‹ã€‚
type dish interface&#123; Cook() &#125;type pizza struct&#123;&#125;type burger struct&#123;&#125;func (*pizza) Cook() &#123;  &#125;func (*burger) Cook() &#123;  &#125;

è‹¥ä¸ç”¨å·¥å‚æ–¹æ³•ï¼Œåˆ™å®¢æˆ·ç«¯ç›´è¿äº§å“ï¼Œæ–°å¢äº§å“è¦æ”¹åˆ†æ”¯ï¼Œä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚
func orderDish(typeName string) dish &#123;    switch typeName &#123;    case &quot;pizza&quot;:        d := &amp;pizza&#123;&#125;        d.Cook() // &quot;cook pizza&quot;        return d    case &quot;burger&quot;:        d := &amp;burger&#123;&#125;        d.Cook() // &quot;cook burger&quot;        return d    default:        return nil    &#125;&#125;
è€Œä½¿ç”¨å·¥å‚æ–¹æ³•åï¼Œå®¢æˆ·ç«¯åªä¾èµ–æŠ½è±¡å·¥å‚ï¼Œæ–°å¢äº§å“æ—¶åªéœ€è¦æ–°å¢å…·ä½“å·¥å‚å³å¯ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚
å³ï¼ŒæŠŠâ€œæ€ä¹ˆåšèœâ€çš„ç»†èŠ‚ä»ç”¨æˆ·ï¼ˆè½¯ä»¶å¼€å‘ç¨‹åºå‘˜ï¼‰æ‰‹é‡Œæ‹¿èµ°ï¼Œäº¤ç»™å„è‡ªçš„å·¥å‚ï¼ˆä¸­é—´ä»¶ï¼‰ã€‚
type Factory interface &#123;    Create() dish&#125;type PizzaFactory struct&#123;&#125;func (PizzaFactory) Create() dish &#123; return &amp;pizza&#123;&#125; &#125;type BurgerFactory struct&#123;&#125;func (BurgerFactory) Create() dish &#123; return &amp;burger&#123;&#125; &#125;func order(factory Factory) dish &#123;    d := factory.Create()    d.Cook()     return d&#125;

è¿™æ ·çš„è¯ï¼Œæ–°å¢äº§å“æ—¶åªéœ€è¦æ–°å¢äº§å“ + å·¥å‚å³å¯ï¼Œæ— éœ€ä¿®æ”¹ç”¨æˆ·ç¨‹åºã€‚ç¬¦åˆå¼€é—­åŸåˆ™ã€‚
type sushi struct&#123;&#125;func (s *sushi) Cook() &#123;  &#125;type SushiFactory struct&#123;&#125;func (SushiFactory) Create() dish &#123; return &amp;sushi&#123;&#125; &#125;

å®¢æˆ·ç«¯åªä¾èµ–æŠ½è±¡å·¥å‚ï¼Œåªéœ€è°ƒç”¨å·¥å‚æ–¹æ³•å³å¯ï¼Œä¸ç”¨ä¿®æ”¹ã€‚
ç±»å›¾ï¼š

    classDiagram
  class Dish {
    +Cook() 
  }
  class Pizza {
    +Cook() 
  }
  class Burger {
    +Cook() 
  }
  Dish &lt;|.. Pizza
  Dish &lt;|.. Burger

  class Factory {
    +Create() Dish
  }
  class PizzaFactory
  class BurgerFactory
  Factory &lt;|.. PizzaFactory
  Factory &lt;|.. BurgerFactory

  Factory ..&gt; Dish : Create()
  

2. æŠ½è±¡å·¥å‚åœºæ™¯ï¼šå¥—é¤ç”±ä¸¤ä¸ªç›¸å…³ç»„ä»¶ç»„æˆï¼ˆèœ Dish + é¥®æ–™ Drinkï¼‰ï¼ŒåŒä¸€é£æ ¼çš„ç»„ä»¶åº”è¯¥ä¸€èµ·åˆ›å»ºå¹¶ä¿æŒæ­é…ä¸€è‡´ï¼ˆæ„å¼ï¼šPizza+Coffeeï¼Œç¾å¼ï¼šBurger+Colaï¼‰ã€‚
// äº§å“æ—æ¥å£type dish interface&#123; Cook() &#125;type drink interface&#123; Serve() &#125;// å…·ä½“äº§å“type pizza struct&#123;&#125;func (*pizza) Cook() &#123;  &#125;type burger struct&#123;&#125;func (*burger) Cook() &#123;  &#125;type coffee struct&#123;&#125;func (coffee) Serve() &#123;  &#125;type cola struct&#123;&#125;func (cola) Serve() &#123;  &#125;    

æŠ½è±¡å·¥å‚æä¾›â€œåŒæ—¶åˆ›å»ºå¤šä¸ªç›¸å…³äº§å“â€çš„ç»Ÿä¸€æ¥å£ï¼Œå®¢æˆ·ç«¯åªé€‰æ‹©å·¥å‚ï¼ˆé£æ ¼ï¼‰ï¼Œä¸å†ä¼ å­—ç¬¦ä¸²ã€‚
ä¸­é—´ä»¶ï¼šå·¥å‚æ–¹æ³•çš„â€œå®ç°â€ï¼Œè´Ÿè´£åˆ›å»ºå…·ä½“äº§å“ã€‚
// æŠ½è±¡å·¥å‚ï¼šä¸€æ¬¡åˆ›å»ºåŒä¸€é£æ ¼çš„å¤šä¸ªç›¸å…³äº§å“type kitchenFactory interface &#123;    CreateDish() dish    CreateDrink() drink&#125;// å…·ä½“å·¥å‚ï¼šæ„å¼ï¼ˆPizza + Coffeeï¼‰type italianFactory struct&#123;&#125;func (italianFactory) CreateDish() dish   &#123; return &amp;pizza&#123;&#125; &#125;func (italianFactory) CreateDrink() drink &#123; return &amp;coffee&#123;&#125; &#125;// å…·ä½“å·¥å‚ï¼šç¾å¼ï¼ˆBurger + Colaï¼‰type americanFactory struct&#123;&#125;func (americanFactory) CreateDish() dish   &#123; return &amp;burger&#123;&#125; &#125;func (americanFactory) CreateDrink() drink &#123; return &amp;cola&#123;&#125; &#125;

ç”¨æˆ·åªéœ€è¦ä¾èµ–æŠ½è±¡å·¥å‚ï¼Œæ— éœ€çŸ¥é“å…·ä½“äº§å“ã€‚
func orderSet(f kitchenFactory) (dish, drink) &#123;    d := f.CreateDish()    d.Cook()    r := f.CreateDrink()    r.Serve()    return d, r&#125;

ç±»å›¾ï¼š

    classDiagram
class dish {
+Cook()
}
class drink {
+Serve()
}

class pizza {
+Cook()
}
class burger {
+Cook()
}
class coffee {
+Serve()
}
class cola {
+Serve()
}

dish &lt;|.. pizza
dish &lt;|.. burger
drink &lt;|.. coffee
drink &lt;|.. cola

class kitchenFactory {
+CreateDish() dish
+CreateDrink() drink
}
class italianFactory
class americanFactory

kitchenFactory &lt;|.. italianFactory
kitchenFactory &lt;|.. americanFactory

italianFactory ..&gt; dish : CreateDish()
italianFactory ..&gt; drink : CreateDrink()
americanFactory ..&gt; dish : CreateDish()
americanFactory ..&gt; drink : CreateDrink()
  




å®¢æˆ·ç«¯ä¸å†™ switchã€ä¸ä¼  â€œpizza&#x2F;burgerâ€ å­—ç¬¦ä¸²ï¼›åªé€‰é£æ ¼å·¥å‚ï¼ˆItalian&#x2F;Americanï¼‰ã€‚
æ­é…å…³ç³»ç”±å·¥å‚ä¿è¯ï¼Œé˜²æ­¢â€œé£æ ¼æ··æ­â€é€ æˆä¸šåŠ¡ä¸ä¸€è‡´ã€‚
æ‰©å±•æ–°é£æ ¼æ—¶ï¼Œä»…æ–°å¢â€œå…·ä½“å·¥å‚ + å…¶äº§å“â€ï¼Œä¿æŒå¼€é—­åŸåˆ™ã€‚

]]></content>
      <categories>
        <category>Design Pattern</category>
      </categories>
      <tags>
        <tag>Design Pattern</tag>
        <tag>go</tag>
        <tag>Interface Oriented Programming</tag>
        <tag>Factory Method</tag>
        <tag>Abstract Factory</tag>
      </tags>
  </entry>
  <entry>
    <title>250926 tool docker install&amp;command</title>
    <url>/2025/09/26/250926-tool-docker-install-command/</url>
    <content><![CDATA[1. å›½å†…ubuntuæœåŠ¡å™¨å®‰è£…docker(ä½¿ç”¨aliyuné•œåƒæº,rootç”¨æˆ·)1.1. å®‰è£…apt updateapt install -y apt-transport-https ca-certificates curl gnupg lsb-releasecurl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | apt-key add - # å¯èƒ½éœ€è¦å…ˆå®‰è£…curladd-apt-repository &quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot; # å¯èƒ½éœ€è¦å…ˆapt install software-properties-commonapt updateapt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

1.2. æ¢æºvim /etc/docker/daemon.json #å¯èƒ½éœ€è¦å…ˆå®‰è£…vim

ç„¶åæ·»åŠ å›½å†…çš„é•œåƒä»“åº“
&#123;	&quot;registry-mirrors&quot;: [	    &quot;https://docker.registry.cyou&quot;,	    &quot;https://docker-cf.registry.cyou&quot;,	    &quot;https://dockercf.jsdelivr.fyi&quot;,	    &quot;https://docker.jsdelivr.fyi&quot;,	    &quot;https://dockertest.jsdelivr.fyi&quot;,	    &quot;https://mirror2.aliyuncs.com&quot;,	    &quot;https://dockerproxy.com&quot;,	    &quot;https://mirror.baidubce.com&quot;,	    &quot;https://docker.m.daocloud.io&quot;,	    &quot;https://docker.nju.edu.cn&quot;,	    &quot;https://docker.mirrors.sjtug.sjtu.edu.cn&quot;,	    &quot;https://docker.mirrors.ustc.edu.cn&quot;,	    &quot;https://mirror.iscas.ac.cn&quot;,	    &quot;https://docker.rainbond.cc&quot;	]&#125;

1.3. å¯åŠ¨systemctl start dockersystemctl enable docker # å¼€æœºè‡ªå¯

2. éƒ¨åˆ†å¸¸ç”¨å‘½ä»¤dockerçš„æ ¸å¿ƒæ¦‚å¿µå›´ç»•ç€é•œåƒimageã€å®¹å™¨containerã€å·volumeã€‚è¿™é‡Œä¸å¯¹è¿™äº›æ¦‚å¿µè¿›è¡Œè¯´æ˜ï¼Œä»…å±•ç¤ºå‘½ä»¤ã€‚
2.1 image2.1.1. æŸ¥çœ‹æœ¬åœ°å·²æœ‰é•œåƒdocker images

æˆ–è€…æ›´æ¨èï¼š
docker image ls

ä¼šæ˜¾ç¤º REPOSITORYã€TAGã€IMAGE IDã€å¤§å°ç­‰ä¿¡æ¯ã€‚
2.1.2. æ‹‰å–é•œåƒä»¥postgresä¸ºä¾‹
docker pull postgres:latest

ä¹Ÿå¯ä»¥æŒ‡å®šç‰ˆæœ¬ï¼š
docker pull postgres:15

2.1.3. åˆ é™¤é•œåƒåˆ é™¤æŸä¸ªé•œåƒï¼š
docker rmi &lt;IMAGE_ID&gt;

å¦‚æœé•œåƒæ­£åœ¨è¢«å®¹å™¨ä½¿ç”¨ï¼Œè¦ä¹ˆå…ˆåœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼Œè¦ä¹ˆåŠ  -f å¼ºåˆ¶åˆ é™¤ï¼š
docker rmi -f &lt;IMAGE_ID&gt;

2.1.4. æ¸…ç†ä¸ç”¨çš„é•œåƒæ¸…ç†æ‰€æœ‰æ‚¬ç©ºé•œåƒï¼ˆdanglingï¼Œåå­—æ˜¯ &lt;none&gt; çš„ï¼‰ï¼š
docker image prune

æ¸…ç†æ‰€æœ‰ä¸ç”¨çš„é•œåƒï¼ˆæ…ç”¨ï¼Œä¼šæ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨ç›¸å…³é•œåƒï¼‰ï¼š
docker image prune -a

2.1.5. é•œåƒæ„å»ºæŸç›®å½•ä¸‹æœ‰ Dockerfileå¯ä»¥è‡ªå·±æ„å»ºé•œåƒï¼š
docker build -t myapp:1.0 &lt;dir&gt;

è¿™é‡Œ -t ç»™é•œåƒåŠ åå­—å’Œç‰ˆæœ¬å·ã€‚
2.1.6. é•œåƒä¿å­˜ä¸å¯¼å…¥å¯¼å‡ºé•œåƒåˆ°æ–‡ä»¶ï¼š
docker save -o myapp.tar myapp:1.0

ä»æ–‡ä»¶å¯¼å…¥é•œåƒï¼š
docker load -i myapp.tar

2.2 containerå®¹å™¨å°±ç›¸å½“äºä¸€ä¸ªé…ç½®å¥½çš„è™šæ‹Ÿæœº
2.2.1. æŸ¥çœ‹å®¹å™¨
æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š

docker ps


æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰ï¼š

docker ps -a

2.2.2. å¯åŠ¨&#x2F;åœæ­¢&#x2F;é‡å¯å®¹å™¨
å¯åŠ¨å·²å­˜åœ¨çš„å®¹å™¨ï¼š

docker start &lt;CONTAINER_ID æˆ– NAME&gt;


åœæ­¢å®¹å™¨ï¼š

docker stop &lt;CONTAINER_ID æˆ– NAME&gt;


é‡å¯å®¹å™¨ï¼š

docker restart &lt;CONTAINER_ID æˆ– NAME&gt;

2.2.3. è¿›å…¥å®¹å™¨
äº¤äº’å¼è¿›å…¥å®¹å™¨ï¼ˆå¸¸ç”¨ï¼‰ï¼š

docker exec -it &lt;CONTAINER_ID æˆ– NAME&gt; bash


ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«çš„æŒ‡ä»¤ï¼Œå¦‚ä»¥ä¸‹æ˜¯è¿æ¥å®¹å™¨é‡Œçš„PostgreSQLï¼š

docker exec -it &lt;id/name&gt; psql -U postgres -d postgres

2.2.4. æŸ¥çœ‹å®¹å™¨æ—¥å¿—docker logs &lt;CONTAINER_ID æˆ– NAME&gt;

å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼š
docker logs -f &lt;CONTAINER_ID æˆ– NAME&gt;

2.2.5. åˆ é™¤å®¹å™¨
åˆ é™¤å·²åœæ­¢çš„å®¹å™¨ï¼š

docker rm &lt;CONTAINER_ID æˆ– NAME&gt;


åˆ é™¤æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨ï¼š

docker container prune

2.2.6. å®¹å™¨ä¸é•œåƒå…³ç³»
åŸºäºé•œåƒåˆ›å»ºå®¹å™¨ï¼š

docker run -d --name mycontainer myimage:latest

ä»…æ˜¯ä¸€ä¸ªæœ€å°åŒ–çš„æŒ‡ä»¤ï¼Œå®é™…å¯èƒ½è¿˜éœ€è¦-pæŒ‡å®šç«¯å£æ˜ å°„ï¼Œ-eæŒ‡å®šå®¹å™¨è¿è¡Œçš„ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œ-væŠŠå®¹å™¨çš„æ•°æ®ï¼ˆè™šæ‹Ÿæœºçš„ä¸€ä¸ªç›®å½•ï¼‰æ˜ å°„åˆ°å®¿ä¸»æœºçš„å·é‡Œï¼Œæ¯”å¦‚ï¼š
docker run -d \  --name pgdb \  -e POSTGRES_USER=admin \  -e POSTGRES_PASSWORD=secret123 \  -e POSTGRES_DB=mydb \  -p 5432:5432 \  -v pgdata:/var/lib/postgresql/data \  postgres:latest


æŸ¥çœ‹å®¹å™¨ä½¿ç”¨çš„é•œåƒï¼š

docker inspect &lt;CONTAINER_ID&gt; | grep Image

2.2.7. å…¶ä»–å¸¸ç”¨
æŸ¥çœ‹å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µï¼š

docker stats


æ‹·è´æ–‡ä»¶ï¼š  ä»å®¿ä¸»æœºæ‹·è´åˆ°å®¹å™¨ï¼š

docker cp localfile &lt;CONTAINER_ID&gt;:/path/in/container

ä»å®¹å™¨æ‹·è´åˆ°å®¿ä¸»æœºï¼š
docker cp &lt;CONTAINER_ID&gt;:/path/in/container localfile

2.3 volume2.3.1. æŸ¥çœ‹å·
æŸ¥çœ‹æ‰€æœ‰å·ï¼š

docker volume ls


æŸ¥çœ‹æŸä¸ªå·çš„è¯¦ç»†ä¿¡æ¯ï¼ˆæŒ‚è½½ç‚¹ã€åˆ›å»ºæ—¶é—´ç­‰ï¼‰ï¼š

docker volume inspect &lt;VOLUME_NAME&gt;

2.3.2. åˆ›å»ºå·docker volume create myvolume

ä¹Ÿå¯ä»¥å¸¦é€‰é¡¹ï¼š
docker volume create --driver local --opt type=none --opt device=/path/on/host --opt o=bind myvolume

ï¼ˆæŠŠå®¿ä¸»æœºç›®å½•ç»‘å®šä¸ºå·ï¼‰
2.3.3. åˆ é™¤å·
åˆ é™¤æŸä¸ªå·ï¼š

docker volume rm &lt;VOLUME_NAME&gt;


åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å·ï¼š

docker volume prune


æ³¨æ„ï¼šæ­£åœ¨ä½¿ç”¨çš„å·ä¸èƒ½åˆ é™¤ã€‚

2.3.4. åœ¨å®¹å™¨ä¸­æŒ‚è½½å·è¿è¡Œå®¹å™¨æ—¶æŒ‚è½½ï¼š
docker run -d \  --name pgdb \  -e POSTGRES_PASSWORD=secret123 \  -v pgdata:/var/lib/postgresql/data \  postgres:latest

è¿™é‡Œ pgdata å°±æ˜¯ä¸€ä¸ªå·ï¼Œæ•°æ®ä¼šä¿å­˜åœ¨å®¿ä¸»æœº /var/lib/docker/volumes/pgdata/_dataã€‚
2.3.5. å·ä¸æ–‡ä»¶æ‹·è´
å®¿ä¸»æœºç›´æ¥è®¿é—®å·çš„æ•°æ®ï¼š

ls /var/lib/docker/volumes/&lt;VOLUME_NAME&gt;/_data


ä¹Ÿå¯ä»¥ç”¨å®¹å™¨æ“ä½œå·çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼š

docker run --rm -v &lt;VOLUME_NAME&gt;:/data busybox ls /data

2.3.6. æŸ¥çœ‹å·å ç”¨ç©ºé—´Docker æœ¬èº«ä¸èƒ½ç›´æ¥æ˜¾ç¤ºå·çš„å¤§å°ï¼Œå¯ä»¥é€šè¿‡å®¿ä¸»æœºå‘½ä»¤ï¼š
du -sh /var/lib/docker/volumes/*
2.4. docker systemdocker system æ˜¯ Docker æä¾›çš„ä¸€ä¸ªé¡¶çº§ç®¡ç†å‘½ä»¤ï¼Œç”¨æ¥æŸ¥çœ‹å’Œæ¸…ç† Docker çš„æ•´ä½“èµ„æºï¼ˆé•œåƒã€å®¹å™¨ã€å·ã€æ„å»ºç¼“å­˜ç­‰ï¼‰ã€‚
2.4.1. æŸ¥çœ‹ Docker æ•´ä½“èµ„æºå ç”¨docker system df

ç±»ä¼¼ df -hï¼Œä¼šæ˜¾ç¤ºï¼š

é•œåƒå¤§å°
å®¹å™¨å ç”¨ç©ºé—´
å·å ç”¨ç©ºé—´
æ„å»ºç¼“å­˜å¤§å°

2.4.2. æ¸…ç†æœªä½¿ç”¨èµ„æºdocker system prune

ä¼šåˆ é™¤ï¼š

å·²åœæ­¢çš„å®¹å™¨
æœªä½¿ç”¨çš„ç½‘ç»œ
æ‚¬ç©ºçš„é•œåƒï¼ˆæ²¡æœ‰ tag çš„ &lt;none&gt; é•œåƒï¼‰
æ„å»ºç¼“å­˜

æ›´å½»åº•ï¼š
docker system prune -a

è¿˜ä¼šåˆ é™¤ æ‰€æœ‰æœªè¢«å®¹å™¨ä½¿ç”¨çš„é•œåƒï¼ˆä¸ä»…ä»…æ˜¯ &lt;none&gt;ï¼‰ã€‚
å†åŠ ä¸Šå·ï¼ˆæ…ç”¨ï¼ä¼šæ¸…ç©ºæœªä½¿ç”¨çš„å·é‡Œçš„æ•°æ®ï¼‰ï¼š
docker system prune --volumes

2.4.3. æŸ¥çœ‹ Docker ä¿¡æ¯docker system info

æ˜¾ç¤º Docker è¿è¡Œç¯å¢ƒçš„ä¿¡æ¯ï¼ˆç‰ˆæœ¬ã€å­˜å‚¨é©±åŠ¨ã€ç½‘ç»œã€CPU&#x2F;å†…å­˜é™åˆ¶ç­‰ï¼‰ã€‚
3. dockeræ—¥å¿—ç®¡ç†3.1. æ—¥å¿—æ–‡ä»¶ä½ç½®Docker å®¹å™¨æ—¥å¿—é»˜è®¤åœ¨ï¼š
/var/lib/docker/containers/&lt;container-id&gt;/&lt;container-id&gt;-json.log

æ¯ä¸ªå®¹å™¨éƒ½æœ‰ä¸€ä¸ª .log æ–‡ä»¶ï¼Œå¯èƒ½ä¼šæ— é™é•¿ã€‚
3.2. æ–¹æ³•1: ç›´æ¥æ¸…ç©ºæŸä¸ªå®¹å™¨æ—¥å¿—æ‰¾åˆ°å®¹å™¨ IDï¼š
docker ps -a

ç„¶åæ¸…ç©ºæ—¥å¿—æ–‡ä»¶ï¼š
truncate -s 0 /var/lib/docker/containers/&lt;container-id&gt;/&lt;container-id&gt;-json.log


truncate -s 0 ä¼šæŠŠæ–‡ä»¶æ¸…é›¶ï¼Œä½†ä¸ä¼šåˆ é™¤æ–‡ä»¶ã€‚å®¹å™¨è¿˜åœ¨è·‘ï¼Œä¸å—å½±å“ã€‚

3.3. æ–¹æ³•2: æ‰¹é‡æ¸…ç©ºæ‰€æœ‰å®¹å™¨æ—¥å¿—ä¸€è¡Œå‘½ä»¤æ¸…ç†å…¨éƒ¨ï¼š
for log in $(find /var/lib/docker/containers/ -name *-json.log); do  truncate -s 0 $logdone


3.4. æ–¹æ³•3: é…ç½®æ—¥å¿—å¤§å°é™åˆ¶åœ¨è¿è¡Œå®¹å™¨æ—¶æŒ‡å®šæ—¥å¿—å‚æ•°ï¼š
docker run -d \  --name myapp \  --log-opt max-size=100m \  --log-opt max-file=3 \  myimage

è¿™æ ·æ¯ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§ 100MBï¼Œæœ€å¤šä¿ç•™ 3 ä¸ªã€‚
ä½¿ç”¨docker-compose.ymlå¯ä»¥è¿™æ ·å†™ï¼š
logging:  driver: &quot;json-file&quot;  options:    max-size: &quot;100m&quot;    max-file: &quot;3&quot;


3.5. æ–¹æ³•4: ä¿®æ”¹ Docker å…¨å±€é…ç½®ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰vim /etc/docker/daemon.json

&#123;  &quot;log-driver&quot;: &quot;json-file&quot;,  &quot;log-opts&quot;: &#123;    &quot;max-size&quot;: &quot;100m&quot;,    &quot;max-file&quot;: &quot;3&quot;  &#125;&#125;

ç„¶åé‡å¯ Dockerï¼š
systemctl restart docker


]]></content>
      <categories>
        <category>tool</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>tool</tag>
      </tags>
  </entry>
  <entry>
    <title>250824 thinking å¿«é€Ÿæ’åº</title>
    <url>/2025/08/25/250824-thinking-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[å¿«é€Ÿæ’åºçš„Hoareåˆ†åŒºæ³•çš„åŸºæœ¬æ€æƒ³ä¸æµç¨‹æ˜¯ç®€å•æ˜æ™°çš„ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œä¾‹å¦‚æ˜¯å·¦æŒ‡é’ˆå…ˆåŠ¨è¿˜æ˜¯å³æŒ‡é’ˆå…ˆåŠ¨ã€æŒ‡é’ˆç§»åŠ¨æ¡ä»¶ç­‰ã€‚ç¨æœ‰ä¸æ…ï¼Œå°±å¯èƒ½ç”šè‡³å¯¼è‡´æ­»å¾ªç¯ã€‚
1. ä¼ªä»£ç ç¤ºä¾‹è¿™é‡Œæ˜¯ä»å°åˆ°å¤§çš„é¡ºåºæ’åºã€‚
// input: arr, lo, hi// arr: array to be sorted// lo, hi: the area to be sorted is [lo, hi)// output: sorted arrQuickSort(arr, lo, hi):    if lo &gt;= hi:         return // in this case, no element left in the area, no need to sort    pivot := arr[lo]    left := lo    right := hi    while left &lt; right; do        do            right--        while arr[right] &gt; pivot // right pointer moves to the left until it points to an element smaller than pivot or points to pivot, so right pointer is always safe        do            left++        while left &lt; right and arr[left] &lt; pivot // but left pointer could overflow if there is no control, so it should always be checked with left &lt; right        if left &lt; right; then            swap(arr[left], arr[right])        else             break        end if    end while    swap(arr[lo], arr[right])     QuickSort(arr, lo, right)    QuickSort(arr, right + 1, hi)

2. è§£é‡Š2.1 å·¦å³æŒ‡é’ˆç§»åŠ¨çš„é¡ºåºä¸ºä»€ä¹ˆæ˜¯å…ˆå³åå·¦ï¼Ÿè€ƒè™‘ä¸€ä¸ªä¾‹å­ï¼š[1, 3, 4, 5, 7], ä»¥1ä¸ºåŸºå‡†è¿›è¡Œåˆ†åŒºã€‚å¦‚æœå…ˆå·¦åå³ï¼Œåˆ™å·¦æŒ‡é’ˆåœ¨3å¤„å°±ä¼šåœä¸‹ã€‚ç„¶åå³æŒ‡é’ˆç§»åŠ¨ï¼Œç”±äºå·¦æŒ‡é’ˆæŒ¡ç€ï¼Œå®ƒä¾¿åªèƒ½ç§»åŠ¨åˆ°3è¿™é‡Œï¼Œè€Œä¸æ˜¯æ­£ç¡®çš„ä½ç½®1ã€‚è¿™æ—¶å€™å¦‚æœäº¤æ¢3å’Œ1ï¼Œåˆ™3çš„ä½ç½®å°±è¢«é”™è¯¯åœ°äº¤æ¢äº†ã€‚
2.2 ä¸ºä»€ä¹ˆå¾ªç¯é€€å‡ºåäº¤æ¢æ—¶å°†pivotå’Œrightè¿›è¡Œäº¤æ¢è€Œä¸æ˜¯leftï¼Ÿå› ä¸ºrightæŒ‡é’ˆç§»åŠ¨çš„æ¡ä»¶æ˜¯arr[right] &gt; pivotï¼Œä¹Ÿå°±æ˜¯è¯´å½“å®ƒä¸ç§»åŠ¨æ—¶å€™ï¼Œä¸€å®šæ˜¯arr[right]&lt;=pivotã€‚è€ŒleftæŒ‡é’ˆç§»åŠ¨çš„æ¡ä»¶æ˜¯left &lt; right &amp;&amp; arr[left] &lt; pivotï¼Œå½“å¾ªç¯é€€å‡ºæ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ä¿è¯ä¸€å®šæœ‰arr[left]&gt;=pivotï¼Œå› ä¸ºæœ‰å¯èƒ½æ˜¯left &lt; rightæ¡ä»¶ä¸æ»¡è¶³å¯¼è‡´çš„é€€å‡ºã€‚è€Œpivotæ‰€æŒ‡ä»£çš„å…ƒç´ åœ¨æœ€å·¦è¾¹ï¼Œä¸å³è¾¹çš„ä¸€ä¸ªä¸å¤§äºå®ƒçš„å…ƒç´ äº¤æ¢æ˜¯å®‰å…¨çš„ã€‚ 
2.3 æŒ‡é’ˆç§»åŠ¨æ¡ä»¶ä¸ºä»€ä¹ˆä¸å¸¦â€&#x3D;â€?è¿™æ˜¯ç”±leftå’Œrightçš„è¯­ä¹‰æ‰€å†³å®šçš„ã€‚leftæ˜¯â€œåœ¨pivotçš„å·¦è¾¹â€ï¼Œè€Œrightæ˜¯â€œåœ¨pivotçš„å³è¾¹â€ã€‚
]]></content>
      <categories>
        <category>data structure &amp; algorithm</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>data structure &amp; algorithm</tag>
        <tag>quick sort</tag>
        <tag>Hoare partition</tag>
      </tags>
  </entry>
</search>
